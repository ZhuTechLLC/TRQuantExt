# Docker ä½¿ç”¨æŒ‡å—

## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`


## å¿«é€Ÿå¼€å§‹

### 1. æ„å»ºDockeré•œåƒ

```bash
# ä½¿ç”¨ä¾¿æ·è„šæœ¬
./docker-run.sh build

# æˆ–ä½¿ç”¨docker-compose
docker-compose build

# æˆ–ç›´æ¥ä½¿ç”¨docker
docker build -t jqquant:latest .
```

### 2. éªŒè¯é…ç½®

```bash
./docker-run.sh verify
```

### 3. è¿è¡Œæµ‹è¯•å›æµ‹

```bash
./docker-run.sh test
```

### 4. è¿è¡Œå®Œæ•´å›æµ‹

```bash
./docker-run.sh run --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

## é€šè¿‡ Docker å¯åŠ¨ GUIï¼ˆå¸¦æ¡Œé¢å›¾æ ‡ï¼‰

ä¸ºäº†åœ¨ Ubuntu ä¸Šâ€œä¸€é”®å¯åŠ¨â€éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆï¼Œå¯ä½¿ç”¨ GUI å®¹å™¨è„šæœ¬ä¸æ¡Œé¢å¿«æ·æ–¹å¼ã€‚

### 1. å¯åŠ¨ GUI å®¹å™¨

```bash
# ç¬¬ä¸€æ¬¡è¿è¡Œå»ºè®®å¼ºåˆ¶æ„å»ºé•œåƒ
./docker/run_gui_container.sh --build

# ä¹‹åç›´æ¥è¿è¡Œï¼ˆè‡ªåŠ¨æ£€æµ‹é•œåƒ/åˆ›å»ºå®¹å™¨ï¼‰
./docker/run_gui_container.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ„å»º/ä½¿ç”¨é•œåƒ `jqquant/gui:latest`
- å°† `~/.local/share/jqquant/{config,logs,results}` æŒ‚è½½åˆ°å®¹å™¨ä¸­æŒä¹…åŒ–è´¦å·ä¸ç»“æœ
- åŒæ­¥ `investment-manual` åˆ°å®¿ä¸»æœºå¹¶ä»¥åªè¯»æ–¹å¼æŒ‚è½½
- é€šè¿‡ `xhost` æ‰“å¼€ X11 æƒé™ï¼Œç¡®ä¿ PyQt6 GUI å¯ä»¥æ˜¾ç¤º

> è‹¥ä½¿ç”¨ Waylandï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨äº† XWaylandï¼ˆUbuntu 22.04+ é»˜è®¤å¯ç”¨ï¼‰ã€‚å¦‚é‡æƒé™é—®é¢˜ï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œ `xhost +local:docker`ã€‚

### 2. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆShow Apps & Dockï¼‰

```bash
./docker/install_docker_shortcut.sh
```

å®‰è£…å®Œæˆåï¼š

- `~/.local/bin/jqquant-docker`ï¼šå‘½ä»¤è¡Œå¯åŠ¨å™¨
- `~/.local/share/applications/jqquant-docker.desktop`ï¼šåº”ç”¨å¿«æ·æ–¹å¼
- åœ¨ â€œShow Applicationsâ€ ä¸­æœç´¢ â€œéŸ¬ç¿é‡åŒ– (Docker)â€ å¹¶æ‹–æ‹½åˆ° Dockï¼Œå³å¯å•å‡»å¯åŠ¨

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

## ä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker-compose build

# éªŒè¯é…ç½®
docker-compose run --rm jqquant python verify_config.py

# è¿è¡Œæµ‹è¯•
docker-compose run --rm jqquant python test_backtest.py

# è¿è¡Œå®Œæ•´å›æµ‹
docker-compose run --rm jqquant python main.py \
    --strategy ma_cross \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities 000001.XSHE 600000.XSHG
```

### è¿›å…¥å®¹å™¨Shell

```bash
docker-compose run --rm jqquant /bin/bash
```

## ä½¿ç”¨ä¾¿æ·è„šæœ¬

`docker-run.sh` æä¾›äº†ä¾¿æ·çš„å‘½ä»¤ï¼š

```bash
# æ„å»ºé•œåƒ
./docker-run.sh build

# éªŒè¯é…ç½®
./docker-run.sh verify

# è¿è¡Œæµ‹è¯•
./docker-run.sh test

# è¿è¡Œå›æµ‹ï¼ˆä¼ é€’å‚æ•°ï¼‰
./docker-run.sh run --strategy ma_cross --start 2024-08-01 --end 2024-10-31 --securities 000001.XSHE

# è¿›å…¥Shell
./docker-run.sh shell
```

## ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤

### æ„å»ºé•œåƒ

```bash
docker build -t jqquant:latest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py --help
```

### è¿è¡Œå›æµ‹

```bash
docker run --rm \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    -v $(pwd)/data:/app/data \
    -v $(pwd)/logs:/app/logs \
    jqquant:latest python main.py \
        --strategy ma_cross \
        --start 2024-08-01 \
        --end 2024-10-31 \
        --securities 000001.XSHE 600000.XSHG
```

## å·æŒ‚è½½è¯´æ˜

Dockerå®¹å™¨ä¼šæŒ‚è½½ä»¥ä¸‹ç›®å½•ï¼š

- `./config` â†’ `/app/config` (åªè¯») - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è´¦å·ä¿¡æ¯
- `./results` â†’ `/app/results` - å›æµ‹ç»“æœï¼ŒHTMLæŠ¥å‘Š
- `./data` â†’ `/app/data` - æ•°æ®ç¼“å­˜
- `./logs` â†’ `/app/logs` - æ—¥å¿—æ–‡ä»¶

è¿™æ ·å¯ä»¥ï¼š
- âœ… é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸Šï¼Œå®‰å…¨ä¸”æ˜“äºä¿®æ”¹
- âœ… å›æµ‹ç»“æœæŒä¹…åŒ–ä¿å­˜
- âœ… æ•°æ®ç¼“å­˜å¯ä»¥å¤ç”¨
- âœ… æ—¥å¿—å¯ä»¥æŸ¥çœ‹

## ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
docker run --rm \
    -e PYTHONUNBUFFERED=1 \
    -v $(pwd)/config:/app/config:ro \
    -v $(pwd)/results:/app/results \
    jqquant:latest python main.py ...
```

## å¸¸è§é—®é¢˜

### Q: TA-Libå®‰è£…å¤±è´¥ï¼Ÿ

A: Dockerfileå·²ç»åŒ…å«äº†TA-Libçš„ç¼–è¯‘å®‰è£…ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. ä½¿ç”¨é¢„ç¼–è¯‘çš„TA-Libé•œåƒ

### Q: å¦‚ä½•æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Ÿ

A: 
```bash
# ä½¿ç”¨docker-compose
docker-compose logs

# ä½¿ç”¨docker
docker logs <container_id>
```

### Q: å¦‚ä½•æ¸…ç†Dockerèµ„æºï¼Ÿ

A:
```bash
# åˆ é™¤é•œåƒ
docker rmi jqquant:latest

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ

A: é…ç½®æ–‡ä»¶åœ¨ `./config` ç›®å½•ï¼Œé€šè¿‡volumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ç¡®ä¿ `config/jqdata_config.json` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„è´¦å·ä¿¡æ¯ã€‚

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ä½¿ç”¨docker-compose**: ä¾¿äºç®¡ç†å’Œé…ç½®
2. **è®¾ç½®èµ„æºé™åˆ¶**: åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶
3. **ä½¿ç”¨.envæ–‡ä»¶**: ç®¡ç†æ•æ„Ÿä¿¡æ¯
4. **å®šæœŸæ¸…ç†**: æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨
5. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½resultså’Œdataç›®å½•

## ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ„å»ºé•œåƒ
./docker-run.sh build

# 2. éªŒè¯é…ç½®
./docker-run.sh verify

# 3. è¿è¡Œæµ‹è¯•
./docker-run.sh test

# 4. è¿è¡Œå®Œæ•´å›æµ‹
./docker-run.sh run --strategy adaptive_momentum_a_v2 \
    --start 2024-08-01 \
    --end 2024-10-31 \
    --securities $(cat config/stock_pool.json | jq -r '.high_growth_stocks[]' | tr '\n' ' ')
```

## ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç¯å¢ƒ | Docker |
|------|---------|--------|
| ä¾èµ–ç®¡ç† | éœ€è¦è™šæ‹Ÿç¯å¢ƒ | å®¹å™¨å†…å·²åŒ…å« |
| é…ç½® | æœ¬åœ°æ–‡ä»¶ | VolumeæŒ‚è½½ |
| éš”ç¦»æ€§ | ä½ | é«˜ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| æ€§èƒ½ | é«˜ | ç•¥ä½ |

## ä¸‹ä¸€æ­¥

1. âœ… Dockeré…ç½®å·²å®Œæˆ
2. ğŸš€ æ„å»ºé•œåƒ: `./docker-run.sh build`
3. ğŸ§ª éªŒè¯é…ç½®: `./docker-run.sh verify`
4. ğŸ¯ è¿è¡Œå›æµ‹: `./docker-run.sh test`

