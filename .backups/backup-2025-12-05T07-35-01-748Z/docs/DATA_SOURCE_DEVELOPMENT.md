# æ•°æ®æºå¼€å‘æ–‡æ¡£

> éŸ¬ç¿é‡åŒ–å¹³å° - æ•°æ®æ¥å…¥ä¸åˆ†æç³»ç»Ÿå¼€å‘æ€»ç»“

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®èƒŒæ™¯](#é¡¹ç›®èƒŒæ™¯)
2. [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
3. [æ•°æ®æºé…ç½®](#æ•°æ®æºé…ç½®)
4. [æ ¸å¿ƒæ¨¡å—](#æ ¸å¿ƒæ¨¡å—)
5. [APIæ¥å£è¯´æ˜](#apiæ¥å£è¯´æ˜)
6. [æ•°æ®çŠ¶æ€é¢æ¿](#æ•°æ®çŠ¶æ€é¢æ¿)
7. [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
8. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## é¡¹ç›®èƒŒæ™¯

### å‚è€ƒèµ„æ–™

æœ¬å¼€å‘å‚è€ƒäº†ä»¥ä¸‹ä¸»æµé‡åŒ–å¹³å°çš„æ¶æ„è®¾è®¡ï¼š

| å¹³å° | ç‰¹ç‚¹ | å€Ÿé‰´å†…å®¹ |
|------|------|----------|
| **PandaAI** | å¯è§†åŒ–å·¥ä½œæµ + AIä»£ç ç”Ÿæˆ | å¤šæ•°æ®æºç»Ÿä¸€æ¥å…¥ã€å› å­åº“è®¾è®¡ |
| **å¤šå¹³å°AIåŠ©æ‰‹** | è‡ªç„¶è¯­è¨€ç”Ÿæˆç­–ç•¥ä»£ç  | è·¨å¹³å°é€‚é…ã€APIçŸ¥è¯†åº“ |
| **ä¸­é‡‘AIQuant** | åˆ¸å•†ç›´è¿ + æ¯«ç§’çº§è¡Œæƒ… | ä¸€ä½“åŒ–ç»ˆç«¯è®¾è®¡ |
| **æœºæ„çº§é‡åŒ–å¹³å°** | æ•°æ®ä¸­å° + äº‹ä»¶é©±åŠ¨ | Cursor IDEé›†æˆã€ç­–ç•¥æµæ°´çº¿ |

### è®¾è®¡ç›®æ ‡

1. **çœŸå®æ•°æ®æ¥å…¥**ï¼šè¿æ¥AKShareç­‰å…è´¹æ•°æ®æºï¼Œè·å–å®æ—¶å¸‚åœºæ•°æ®
2. **æœ¬åœ°ç¼“å­˜**ï¼šä½¿ç”¨MongoDBç¼“å­˜æ•°æ®ï¼Œå‡å°‘APIè°ƒç”¨
3. **æ•°æ®é€æ˜**ï¼šæ¯ä¸ªåˆ†ææ­¥éª¤éƒ½è®°å½•æ•°æ®æ¥æºå’Œæ–¹æ³•
4. **Cursoré›†æˆ**ï¼šç”Ÿæˆç»“æ„åŒ–Promptï¼Œæ”¯æŒåœ¨Cursorä¸­æ·±åº¦åˆ†æ

---

## æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·ç•Œé¢å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  GUIé¢æ¿  â”‚  Cursor IDE  â”‚  å‘½ä»¤è¡Œå·¥å…·  â”‚  Web API              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åˆ†æå¼•æ“å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MainlineAnalysisEngine  â”‚  ScoringModel  â”‚  CursorIntegration  â”‚
â”‚  â”œâ”€ æ•°æ®é‡‡é›†             â”‚  â”œâ”€ å…­ç»´è¯„åˆ†    â”‚  â”œâ”€ Promptç”Ÿæˆ      â”‚
â”‚  â”œâ”€ æ•°æ®éªŒè¯             â”‚  â”œâ”€ æƒé‡è®¡ç®—    â”‚  â”œâ”€ ç»“æœä¿å­˜        â”‚
â”‚  â”œâ”€ æ¿å—åˆ†æ             â”‚  â””â”€ ç»¼åˆè¯„çº§    â”‚  â””â”€ ç­–ç•¥ç”Ÿæˆ        â”‚
â”‚  â”œâ”€ èµ„é‡‘åˆ†æ             â”‚                 â”‚                     â”‚
â”‚  â”œâ”€ æƒ…ç»ªåˆ†æ             â”‚                 â”‚                     â”‚
â”‚  â””â”€ ä¸»çº¿ç»¼åˆ             â”‚                 â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•°æ®è·å–å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RealDataFetcher                                                â”‚
â”‚  â”œâ”€ fetch_sector_flow()     æ¿å—èµ„é‡‘æµå‘ (åŒèŠ±é¡º)               â”‚
â”‚  â”œâ”€ fetch_concept_board()   æ¦‚å¿µæ¿å—è¡Œæƒ… (åŒèŠ±é¡º)               â”‚
â”‚  â”œâ”€ fetch_northbound_flow() åŒ—å‘èµ„é‡‘                            â”‚
â”‚  â”œâ”€ fetch_market_sentiment() å¸‚åœºæƒ…ç»ª                           â”‚
â”‚  â”œâ”€ fetch_macro_data()      å®è§‚æ•°æ®                            â”‚
â”‚  â””â”€ fetch_dragon_tiger()    é¾™è™æ¦œ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•°æ®æºå±‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  AKShare    â”‚  â”‚  MongoDB    â”‚  â”‚  æ–‡ä»¶ç¼“å­˜   â”‚             â”‚
â”‚  â”‚  (å®æ—¶API)  â”‚  â”‚  (æœ¬åœ°ç¼“å­˜) â”‚  â”‚  (ç¦»çº¿å¤‡ä»½) â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                  â”‚
â”‚  ä¼˜å…ˆçº§: AKShare â†’ MongoDB â†’ æ–‡ä»¶ç¼“å­˜ â†’ ç¤ºä¾‹æ•°æ®                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—ç»“æ„

```
markets/ashare/mainline/
â”œâ”€â”€ __init__.py              # æ¨¡å—å¯¼å‡º
â”œâ”€â”€ real_data_fetcher.py     # çœŸå®æ•°æ®è·å–å™¨ â˜…æ ¸å¿ƒ
â”œâ”€â”€ analysis_engine.py       # ä¸»çº¿åˆ†æå¼•æ“
â”œâ”€â”€ cursor_integration.py    # Cursor IDEé›†æˆ
â”œâ”€â”€ scoring_model.py         # è¯„åˆ†æ¨¡å‹
â”œâ”€â”€ llm_analyzer.py          # LLMåˆ†æå™¨
â”œâ”€â”€ data_sources.py          # æ•°æ®æºå®šä¹‰
â””â”€â”€ engine.py                # åŸæœ‰å¼•æ“ï¼ˆä¿ç•™å…¼å®¹ï¼‰

gui/widgets/
â”œâ”€â”€ data_status_panel.py     # æ•°æ®çŠ¶æ€é¢æ¿ â˜…æ–°å¢
â””â”€â”€ data_source_panel.py     # ä¿¡æ¯è·å–é¢æ¿ï¼ˆå·²é›†æˆçŠ¶æ€é¢æ¿ï¼‰
```

---

## æ•°æ®æºé…ç½®

### æ•°æ®æºé€‰æ‹©åŸåˆ™

| ä¼˜å…ˆçº§ | æ•°æ®æº | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|--------|--------|------|----------|
| 1 | **åŒèŠ±é¡º** | ç¨³å®šã€æ•°æ®å…¨ | æ¿å—èµ„é‡‘æµå‘ã€æ¦‚å¿µè¡Œæƒ… |
| 2 | **ä¸œæ–¹è´¢å¯Œ** | æ•°æ®ä¸°å¯Œ | åŒ—å‘èµ„é‡‘ã€æ¶¨åœæ± ã€é¾™è™æ¦œ |
| 3 | **æ–°æµªè´¢ç»** | é€Ÿåº¦å¿« | é¾™è™æ¦œå¤‡ç”¨ |
| 4 | **MongoDBç¼“å­˜** | æœ¬åœ° | ç¦»çº¿/åŠ é€Ÿ |
| 5 | **ç¤ºä¾‹æ•°æ®** | å›ºå®š | ç½‘ç»œä¸å¯ç”¨æ—¶ |

### æ•°æ®æºæ›¿æ¢è®°å½•

ç”±äºä¸œæ–¹è´¢å¯Œå­˜åœ¨åçˆ¬è™«æœºåˆ¶ï¼Œä»¥ä¸‹æ¥å£å·²æ›¿æ¢ä¸ºåŒèŠ±é¡ºï¼š

| åŸæ¥å£ (ä¸œæ–¹è´¢å¯Œ) | æ–°æ¥å£ (åŒèŠ±é¡º) | æ›¿æ¢åŸå›  |
|------------------|-----------------|----------|
| `stock_sector_fund_flow_rank` | `stock_fund_flow_industry` | è¿æ¥è¶…æ—¶ |
| `stock_board_concept_name_em` | `stock_fund_flow_concept` | è¿æ¥è¢«æ‹’ç» |

---

## æ ¸å¿ƒæ¨¡å—

### 1. RealDataFetcherï¼ˆçœŸå®æ•°æ®è·å–å™¨ï¼‰

**æ–‡ä»¶**: `markets/ashare/mainline/real_data_fetcher.py`

**åŠŸèƒ½**:
- ä»AKShareè·å–å®æ—¶å¸‚åœºæ•°æ®
- è‡ªåŠ¨ç¼“å­˜åˆ°MongoDBå’Œæ–‡ä»¶
- ç½‘ç»œå¤±è´¥æ—¶ä¼˜é›…é™çº§åˆ°ç¼“å­˜æ•°æ®
- æä¾›è¿æ¥æµ‹è¯•åŠŸèƒ½

**å…³é”®æ–¹æ³•**:

```python
from markets.ashare.mainline import RealDataFetcher

fetcher = RealDataFetcher()

# è·å–æ‰€æœ‰æ•°æ®
data = fetcher.fetch_all_data()

# æµ‹è¯•æ‰€æœ‰è¿æ¥
status = fetcher.test_all_connections()

# è·å–å•é¡¹æ•°æ®
sector = fetcher.fetch_sector_flow()      # æ¿å—èµ„é‡‘æµå‘
concept = fetcher.fetch_concept_board()   # æ¦‚å¿µæ¿å—
northbound = fetcher.fetch_northbound_flow()  # åŒ—å‘èµ„é‡‘
sentiment = fetcher.fetch_market_sentiment()  # å¸‚åœºæƒ…ç»ª
dragon = fetcher.fetch_dragon_tiger()     # é¾™è™æ¦œ
```

### 2. MainlineAnalysisEngineï¼ˆä¸»çº¿åˆ†æå¼•æ“ï¼‰

**æ–‡ä»¶**: `markets/ashare/mainline/analysis_engine.py`

**åŠŸèƒ½**:
- å¤šæ­¥éª¤åˆ†ææµç¨‹
- æ¯æ­¥è®°å½•æ•°æ®æºå’Œæ–¹æ³•
- å¤šç»´åº¦ä¸»çº¿è¯†åˆ«
- ç”ŸæˆCursoråˆ†æPrompt

**åˆ†ææµç¨‹**:

```
æ•°æ®é‡‡é›† â†’ æ•°æ®éªŒè¯ â†’ æ¿å—åˆ†æ â†’ èµ„é‡‘åˆ†æ â†’ æƒ…ç»ªåˆ†æ â†’ ä¸»çº¿ç»¼åˆ
```

**ä½¿ç”¨ç¤ºä¾‹**:

```python
from markets.ashare.mainline import MainlineAnalysisEngine

engine = MainlineAnalysisEngine()
result = engine.run_full_analysis()

# ç»“æœåŒ…å«
# - mainlines: è¯†åˆ«çš„ä¸»çº¿åˆ—è¡¨
# - steps: åˆ†ææ­¥éª¤è®°å½•
# - raw_data: åŸå§‹æ•°æ®
# - cursor_prompt: Cursoråˆ†æPrompt
```

### 3. CursorIntegrationï¼ˆCursoré›†æˆï¼‰

**æ–‡ä»¶**: `markets/ashare/mainline/cursor_integration.py`

**åŠŸèƒ½**:
- ç”Ÿæˆç»“æ„åŒ–åˆ†æPrompt
- ä¿å­˜åˆ†æç»“æœåˆ°æ–‡ä»¶
- æ”¯æŒç­–ç•¥å¼€å‘Promptç”Ÿæˆ

**ä½¿ç”¨ç¤ºä¾‹**:

```python
from markets.ashare.mainline import generate_analysis_prompt, quick_analysis, strategy_prompt

# å®Œæ•´åˆ†æ
prompt = generate_analysis_prompt()

# å¿«é€Ÿåˆ†æ
prompt = quick_analysis()

# ç­–ç•¥å¼€å‘
prompt = strategy_prompt("äººå·¥æ™ºèƒ½")
```

### 4. DataStatusPanelï¼ˆæ•°æ®çŠ¶æ€é¢æ¿ï¼‰

**æ–‡ä»¶**: `gui/widgets/data_status_panel.py`

**åŠŸèƒ½**:
- æ˜¾ç¤ºAKShareå’ŒMongoDBè¿æ¥çŠ¶æ€
- å®æ—¶æµ‹è¯•å„APIæ¥å£
- æ˜¾ç¤ºå»¶è¿Ÿå’Œæ•°æ®æ¡æ•°
- æ˜¾ç¤ºç¼“å­˜çŠ¶æ€

---

## APIæ¥å£è¯´æ˜

### å½“å‰å¯ç”¨çš„APIæ¥å£

| APIåç§° | å‡½æ•° | æ•°æ®æº | æ•°æ®å†…å®¹ |
|---------|------|--------|----------|
| åŒ—å‘èµ„é‡‘ | `stock_hsgt_fund_flow_summary_em` | ä¸œæ–¹è´¢å¯Œ | æ²ªæ·±æ¸¯é€šèµ„é‡‘æµå‘ |
| å¸‚åœºèµ„é‡‘ | `stock_market_fund_flow` | ä¸œæ–¹è´¢å¯Œ | å¤§ç›˜èµ„é‡‘æµå‘ |
| æ¶¨åœæ±  | `stock_zt_pool_em` | ä¸œæ–¹è´¢å¯Œ | æ¶¨åœè‚¡ç¥¨åˆ—è¡¨ |
| é¾™è™æ¦œ | `stock_lhb_detail_em` | ä¸œæ–¹è´¢å¯Œ | é¾™è™æ¦œæ˜ç»† |
| æ¦‚å¿µæ¿å— | `stock_fund_flow_concept` | **åŒèŠ±é¡º** | æ¦‚å¿µèµ„é‡‘æµå‘ |
| è¡Œä¸šæ¿å— | `stock_fund_flow_industry` | **åŒèŠ±é¡º** | è¡Œä¸šèµ„é‡‘æµå‘ |

### æ•°æ®å­—æ®µè¯´æ˜

**æ¿å—èµ„é‡‘æµå‘ (sector_flow)**:
```python
{
    "sector_name": "å†›å·¥ç”µå­",      # è¡Œä¸šåç§°
    "change_pct": 2.71,             # æ¶¨è·Œå¹…(%)
    "main_net_inflow": 16.18,       # å‡€æµå…¥(äº¿å…ƒ)
    "main_net_ratio": 15.5,         # å‡€æµå…¥å æ¯”(%)
    "inflow": 95.35,                # æµå…¥èµ„é‡‘(äº¿å…ƒ)
    "outflow": 79.17,               # æµå‡ºèµ„é‡‘(äº¿å…ƒ)
    "leader_stock": "å®è¾¾ç”µå­",     # é¢†æ¶¨è‚¡
    "leader_change": 14.31,         # é¢†æ¶¨è‚¡æ¶¨å¹…(%)
}
```

**æ¦‚å¿µæ¿å— (concept_board)**:
```python
{
    "board_name": "é’›ç™½ç²‰æ¦‚å¿µ",     # æ¦‚å¿µåç§°
    "change_pct": 4.31,             # æ¶¨è·Œå¹…(%)
    "net_inflow": 3.41,             # å‡€æµå…¥(äº¿å…ƒ)
    "inflow": 16.34,                # æµå…¥èµ„é‡‘(äº¿å…ƒ)
    "outflow": 12.93,               # æµå‡ºèµ„é‡‘(äº¿å…ƒ)
    "company_count": 14,            # æˆåˆ†è‚¡æ•°é‡
    "leader_stock": "é‡‘æµ¦é’›ä¸š",     # é¢†æ¶¨è‚¡
    "leader_change": 10.07,         # é¢†æ¶¨è‚¡æ¶¨å¹…(%)
}
```

**åŒ—å‘èµ„é‡‘ (northbound_flow)**:
```python
{
    "today_net": 45.8,              # ä»Šæ—¥å‡€æµå…¥(äº¿å…ƒ)
    "week_net": 125.6,              # æœ¬å‘¨å‡€æµå…¥(äº¿å…ƒ)
    "month_net": 380.2,             # æœ¬æœˆå‡€æµå…¥(äº¿å…ƒ)
    "details": [                    # æ˜ç»†
        {"æ¿å—": "æ²ªè‚¡é€š", "æˆäº¤å‡€ä¹°é¢": 40.1, "èµ„é‡‘å‡€æµå…¥": 38.5},
        {"æ¿å—": "æ·±è‚¡é€š", "æˆäº¤å‡€ä¹°é¢": 45.1, "èµ„é‡‘å‡€æµå…¥": 42.3},
    ],
    "fetch_date": "2025-11-28",
}
```

**å¸‚åœºæƒ…ç»ª (market_sentiment)**:
```python
{
    "up_limit_count": 70,           # æ¶¨åœå®¶æ•°
    "down_limit_count": 3,          # è·Œåœå®¶æ•°
    "continuous_limit": {           # è¿æ¿ç»Ÿè®¡
        1: 45, 2: 15, 3: 5, 4: 2, 5: 1
    },
    "sentiment_score": 72,          # æƒ…ç»ªå¾—åˆ†(0-100)
    "fetch_date": "2025-11-28",
}
```

---

## æ•°æ®çŠ¶æ€é¢æ¿

### åŠŸèƒ½è¯´æ˜

æ•°æ®çŠ¶æ€é¢æ¿ä½äº **ä¿¡æ¯è·å– â†’ æ•°æ®æºç®¡ç†** é¡µé¢åº•éƒ¨ï¼Œæä¾›ï¼š

1. **ä¸»è¦æ•°æ®æºçŠ¶æ€**
   - AKShare: æ˜¾ç¤ºç‰ˆæœ¬å’Œå®‰è£…çŠ¶æ€
   - MongoDB: æ˜¾ç¤ºè¿æ¥çŠ¶æ€å’Œå»¶è¿Ÿ

2. **APIæ¥å£çŠ¶æ€**
   - åŒ—å‘èµ„é‡‘
   - å¸‚åœºèµ„é‡‘æµå‘
   - æ¶¨åœæ± 
   - é¾™è™æ¦œ
   - æ¦‚å¿µæ¿å—
   - æ¿å—èµ„é‡‘æµå‘

3. **ç¼“å­˜çŠ¶æ€**
   - ç¼“å­˜ç›®å½•è·¯å¾„
   - ç¼“å­˜æ–‡ä»¶æ•°é‡

### çŠ¶æ€æŒ‡ç¤º

| çŠ¶æ€ | é¢œè‰² | å«ä¹‰ |
|------|------|------|
| âœ… æ­£å¸¸ | ç»¿è‰² | APIå¯ç”¨ï¼Œæ•°æ®è·å–æˆåŠŸ |
| âš ï¸ è­¦å‘Š | é»„è‰² | è¿æ¥ä¸ç¨³å®šæˆ–æ•°æ®ä¸ºç©º |
| âŒ é”™è¯¯ | çº¢è‰² | è¿æ¥å¤±è´¥æˆ–APIä¸å¯ç”¨ |
| â³ æµ‹è¯•ä¸­ | è“è‰² | æ­£åœ¨æµ‹è¯•è¿æ¥ |

---

## ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

```python
# 1. å¯¼å…¥æ¨¡å—
from markets.ashare.mainline import (
    MainlineAnalysisEngine,
    RealDataFetcher,
    generate_analysis_prompt,
)

# 2. è¿è¡Œå®Œæ•´åˆ†æ
engine = MainlineAnalysisEngine()
result = engine.run_full_analysis()

# 3. æŸ¥çœ‹ä¸»çº¿
for ml in result['mainlines']:
    print(f"{ml.name}: {ml.score}åˆ†")
    print(f"  æ ¸å¿ƒé€»è¾‘: {ml.core_logic}")
    print(f"  æ¨è: {ml.recommendation}")

# 4. è·å–Cursor Prompt
prompt = result['cursor_prompt']
# å¤åˆ¶åˆ°Cursor Chatè¿›è¡Œæ·±åº¦åˆ†æ
```

### å‘½ä»¤è¡Œæµ‹è¯•

```bash
# æµ‹è¯•æ•°æ®æºè¿æ¥
cd /home/taotao/.local/share/jqquant
source venv/bin/activate

python -c "
from markets.ashare.mainline import RealDataFetcher
fetcher = RealDataFetcher()
result = fetcher.test_all_connections()
print(result)
"
```

### GUIä½¿ç”¨

1. å¯åŠ¨åº”ç”¨: `python JQQuant.py`
2. ç‚¹å‡»å·¦ä¾§ **ğŸ“¡ ä¿¡æ¯è·å–**
3. é€‰æ‹© **ğŸ“Š æ•°æ®æºç®¡ç†** æ ‡ç­¾
4. æ»šåŠ¨åˆ°åº•éƒ¨æŸ¥çœ‹ **æ•°æ®æºè¿æ¥çŠ¶æ€**
5. ç‚¹å‡» **ğŸ”„ æµ‹è¯•è¿æ¥** æŒ‰é’®

---

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ä¸œæ–¹è´¢å¯ŒAPIè¶…æ—¶

**ç—‡çŠ¶**: `Connection aborted`, `RemoteDisconnected`

**è§£å†³æ–¹æ¡ˆ**: ç³»ç»Ÿå·²è‡ªåŠ¨åˆ‡æ¢åˆ°åŒèŠ±é¡ºæ•°æ®æºï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†ã€‚

#### 2. MongoDBè¿æ¥å¤±è´¥

**ç—‡çŠ¶**: `MongoDB æœªè¿æ¥`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥MongoDBæœåŠ¡
sudo systemctl status mongod

# å¯åŠ¨MongoDB
sudo systemctl start mongod
```

#### 3. AKShareæœªå®‰è£…

**ç—‡çŠ¶**: `AKShare æœªå®‰è£…`

**è§£å†³æ–¹æ¡ˆ**:
```bash
pip install akshare -U
```

#### 4. æ•°æ®ä¸ºç©º

**ç—‡çŠ¶**: APIè¿”å›æ•°æ®ä¸ºç©º

**å¯èƒ½åŸå› **:
- éäº¤æ˜“æ—¶é—´
- ç½‘ç»œé—®é¢˜
- APIé™æµ

**è§£å†³æ–¹æ¡ˆ**: ç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f ~/.local/share/jqquant/logs/jqquant.log

# æŸ¥çœ‹ç¼“å­˜æ–‡ä»¶
ls -la ~/.local/share/jqquant/cache/
```

---

## æ›´æ–°æ—¥å¿—

### 2025-11-28

- âœ… åˆ›å»ºæ•°æ®çŠ¶æ€é¢æ¿ (`data_status_panel.py`)
- âœ… ä¿®å¤åŒ—å‘èµ„é‡‘APIï¼ˆä½¿ç”¨ `stock_hsgt_fund_flow_summary_em`ï¼‰
- âœ… æ›¿æ¢ä¸œæ–¹è´¢å¯Œæ¿å—APIä¸ºåŒèŠ±é¡º
  - `stock_sector_fund_flow_rank` â†’ `stock_fund_flow_industry`
  - `stock_board_concept_name_em` â†’ `stock_fund_flow_concept`
- âœ… æ·»åŠ APIè¿æ¥æµ‹è¯•åŠŸèƒ½ (`test_all_connections`)
- âœ… é›†æˆæ•°æ®çŠ¶æ€é¢æ¿åˆ°GUI

### å¾…åŠäº‹é¡¹

- [ ] æ·»åŠ æ›´å¤šæ•°æ®æºï¼ˆTuShare Pro, Windï¼‰
- [ ] å®ç°å› å­è®¡ç®—å¼•æ“
- [ ] å¼€å‘Cursor VSCodeæ’ä»¶
- [ ] æ·»åŠ æ•°æ®è´¨é‡ç›‘æ§
- [ ] å®ç°å†å²æ•°æ®å›è¡¥

---

## é™„å½•

### A. AKShareç‰ˆæœ¬è¦æ±‚

```
akshare >= 1.17.0
```

### B. MongoDBé…ç½®

```yaml
# é»˜è®¤é…ç½®
uri: mongodb://localhost:27017
database: jqquant
collection: cache
```

### C. ç¼“å­˜ç›®å½•ç»“æ„

```
~/.local/share/jqquant/
â”œâ”€â”€ cache/
â”‚   â”œâ”€â”€ sector_flow.json
â”‚   â”œâ”€â”€ concept_board.json
â”‚   â”œâ”€â”€ northbound_flow.json
â”‚   â”œâ”€â”€ market_sentiment.json
â”‚   â””â”€â”€ dragon_tiger.json
â”œâ”€â”€ analysis_outputs/
â”‚   â”œâ”€â”€ analysis_YYYYMMDD_HHMMSS.json
â”‚   â””â”€â”€ prompt_YYYYMMDD_HHMMSS.md
â””â”€â”€ logs/
    â””â”€â”€ jqquant.log
```

