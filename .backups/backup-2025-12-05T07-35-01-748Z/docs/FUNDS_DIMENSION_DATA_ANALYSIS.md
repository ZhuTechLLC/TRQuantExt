# 资金维度数据来源与可靠性分析

## 📊 当前数据来源

### 1. 行业板块资金流向

**API**: `ak.stock_fund_flow_industry(symbol='即时')`  
**数据提供商**: 同花顺（通过AKShare）  
**更新频率**: 实时（交易时间内）

**抓取的数据字段**:
```python
{
    "行业": "板块名称",
    "行业-涨跌幅": "板块涨跌幅(%)",
    "净额": "主力资金净流入(亿元)",      # 核心指标
    "流入资金": "资金流入总额(亿元)",
    "流出资金": "资金流出总额(亿元)",
    "领涨股": "龙头股票名称",
    "领涨股-涨跌幅": "龙头涨幅(%)",
}
```

**计算逻辑**:
- 主力净流入排名 (40%): 在所有板块中的排名百分位
- 资金流向强度 (25%): 净流入为正则加分，净流入>5亿满分
- 流入强度比 (20%): 净流入/总流入，反映资金净流入强度
- 北向资金加成 (15%): 北向资金当日是否净流入

---

### 2. 概念板块资金流向

**API**: `ak.stock_fund_flow_concept(symbol='即时')`  
**数据提供商**: 同花顺（通过AKShare）  
**更新频率**: 实时（交易时间内）

**抓取的数据字段**:
```python
{
    "行业": "概念名称",
    "行业-涨跌幅": "概念涨跌幅(%)",
    "净额": "主力资金净流入(亿元)",
    "流入资金": "资金流入总额(亿元)",
    "流出资金": "资金流出总额(亿元)",
    "公司家数": "概念内股票数量",
    "领涨股": "龙头股票名称",
    "领涨股-涨跌幅": "龙头涨幅(%)",
}
```

---

### 3. 北向资金

**API**: `ak.stock_hsgt_fund_flow_summary_em()`  
**数据提供商**: 东方财富（通过AKShare）  
**更新频率**: 实时（交易时间内）

**抓取的数据字段**:
```python
{
    "today_net": "当日净流入(亿元)",
    "week_net": "本周净流入(亿元)",      # 估算值
    "month_net": "本月净流入(亿元)",     # 估算值
}
```

---

## ⚠️ 数据可靠性分析

### ✅ 优点

1. **数据来源可靠**
   - 同花顺是主流金融数据平台
   - 数据更新及时（交易时间内实时）
   - 数据格式规范

2. **覆盖全面**
   - 行业板块 + 概念板块
   - 资金流向 + 涨跌幅 + 龙头股
   - 北向资金数据

3. **缓存机制**
   - MongoDB缓存，网络失败时可用
   - 文件缓存，历史数据可追溯

### ⚠️ 局限性

1. **数据精度**
   - 同花顺数据是"估算"的主力资金，非交易所官方数据
   - 大单/中单/小单的划分标准可能不同
   - 资金流向计算可能有延迟

2. **API稳定性**
   - 通过AKShare爬取，可能遇到反爬虫
   - 网络波动时可能失败
   - 需要15-20秒超时设置

3. **数据完整性**
   - 部分字段可能缺失（如连续流入天数）
   - 历史数据有限（依赖缓存）
   - 无法获取Level2数据（逐笔成交）

4. **数据验证**
   - 无法直接验证数据准确性
   - 依赖同花顺的数据质量

---

## 📈 综合得分说明

**综合得分** = 五维评分的加权总和

```
综合得分 = 资金维度×30% + 热度维度×20% + 动量维度×20% + 政策维度×15% + 龙头维度×15%
```

**示例**:
- 资金维度得分: 73.6分
- 热度维度得分: 65.0分
- 动量维度得分: 58.0分
- 政策维度得分: 70.0分
- 龙头维度得分: 55.0分

**综合得分** = 73.6×0.30 + 65.0×0.20 + 58.0×0.20 + 70.0×0.15 + 55.0×0.15
            = 22.08 + 13.00 + 11.60 + 10.50 + 8.25
            = **65.43分**

**等级划分**:
- ≥80分: 极强（买入）
- 65-80分: 强（持有）
- 50-65分: 中等（观察）
- 35-50分: 弱（减仓）
- <35分: 极弱（卖出）

---

## 🆚 AKShare vs 聚宽JQData 对比

### AKShare（当前使用）

**优点**:
- ✅ 免费
- ✅ 数据更新及时
- ✅ 覆盖A股主要数据
- ✅ 无需账号

**缺点**:
- ❌ 数据精度有限（估算值）
- ❌ 无Level2数据
- ❌ API稳定性一般（可能被反爬虫）
- ❌ 历史数据有限
- ❌ 无法验证数据准确性

### 聚宽JQData（推荐升级）

**优点**:
- ✅ **数据精度高**（交易所官方数据）
- ✅ **Level2数据**（逐笔成交、委托队列）
- ✅ **API稳定**（专业数据平台）
- ✅ **历史数据完整**（可回测）
- ✅ **数据验证**（可对比交易所数据）
- ✅ **更多维度**（大单、中单、小单精确划分）
- ✅ **实时性更好**（毫秒级延迟）

**缺点**:
- ❌ 需要付费（约2000-5000元/年）
- ❌ 需要账号和API Key
- ❌ 部分数据有调用限制

### 数据质量对比

| 指标 | AKShare | JQData |
|------|---------|--------|
| **数据精度** | 估算值（±5%） | 交易所官方（±0.1%） |
| **Level2数据** | ❌ | ✅ |
| **大单划分** | 粗略 | 精确（按金额/手数） |
| **历史数据** | 有限（依赖缓存） | 完整（10年+） |
| **实时性** | 秒级 | 毫秒级 |
| **API稳定性** | 一般 | 优秀 |
| **数据验证** | 无法验证 | 可验证 |

---

## 💡 建议

### 当前阶段（AKShare）

**适用场景**:
- 初步筛选主线
- 日常监控
- 成本敏感场景

**注意事项**:
- 数据仅供参考，需结合其他维度判断
- 关注数据来源标识（同花顺/东方财富）
- 网络失败时使用缓存数据

### 下一阶段（聚宽JQData）⭐ **强烈推荐**

**适用场景**:
- 专业量化分析
- 策略回测
- 精确资金流向分析
- Level2数据分析

**优势**:
1. **数据精度提升**: 从估算值到交易所官方数据
2. **Level2数据**: 可分析逐笔成交、委托队列
3. **历史回测**: 完整历史数据支持策略验证
4. **API稳定**: 专业平台，不会出现反爬虫问题

**接入成本**:
- JQData基础版: ~2000元/年
- JQData专业版: ~5000元/年
- 包含Level2数据、因子数据、回测平台

---

## 🔄 数据源切换建议

### 阶段1（当前）: AKShare
- ✅ 已实现
- ✅ 免费使用
- ⚠️ 数据精度有限

### 阶段2（推荐）: 聚宽JQData
- ⏳ 待接入
- 💰 需要付费
- ✅ 数据精度大幅提升
- ✅ Level2数据支持

### 阶段3（未来）: 万德Wind
- ⏳ 待接入
- 💰 机构级价格
- ✅ 全球市场数据
- ✅ 另类数据

---

## 📌 当前数据可靠性总结

**资金维度数据可靠性**: ⭐⭐⭐⭐ (4/5)

**优点**:
- 数据来源可靠（同花顺）
- 更新及时
- 覆盖全面

**局限性**:
- 数据是"估算"值，非交易所官方
- API稳定性一般
- 无法获取Level2数据

**建议**:
- 当前阶段：AKShare数据可用于初步筛选和日常监控
- 下一阶段：**强烈建议接入聚宽JQData**，数据精度和稳定性将大幅提升
- 对于专业量化分析，JQData的Level2数据和历史数据是必需的

---

*最后更新: 2024-12-19*

