<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JQQuant å®Œæ•´ä½¿ç”¨æ•™ç¨‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 20px;
            z-index: 100;
        }

        .nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav a {
            color: #667eea;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .nav a:hover {
            background: #667eea;
            color: white;
        }

        .section {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .section h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .section h3 {
            color: #764ba2;
            font-size: 1.5em;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .section h4 {
            color: #555;
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .code-block code {
            color: #abb2bf;
        }

        .code-block .keyword { color: #c678dd; }
        .code-block .string { color: #98c379; }
        .code-block .comment { color: #5c6370; }
        .code-block .function { color: #61afef; }
        .code-block .number { color: #d19a66; }

        .step {
            background: #f8f9fa;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
            border-radius: 5px;
        }

        .step-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            border-radius: 50%;
            margin-right: 10px;
            font-weight: bold;
        }

        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .info {
            background: #d1ecf1;
            border-left: 4px solid #0c5460;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .error {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        table th, table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        table th {
            background: #667eea;
            color: white;
        }

        table tr:hover {
            background: #f5f5f5;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin: 5px;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .toc ul {
            list-style: none;
            padding-left: 20px;
        }

        .toc li {
            margin: 8px 0;
        }

        .toc a {
            color: #667eea;
            text-decoration: none;
        }

        .toc a:hover {
            text-decoration: underline;
        }

        footer {
            text-align: center;
            padding: 30px;
            color: #666;
            margin-top: 50px;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .command {
            background: #282c34;
            color: #98c379;
            padding: 2px 8px;
            border-radius: 3px;
            font-family: monospace;
        }

        @media (max-width: 768px) {
            .nav ul {
                flex-direction: column;
            }
            
            header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸš€ JQQuant å®Œæ•´ä½¿ç”¨æ•™ç¨‹</h1>
            <p>åŸºäºèšå®½APIçš„é‡åŒ–äº¤æ˜“å›æµ‹ä¸ç­–ç•¥å¼€å‘å¹³å°</p>
        </header>

        <nav class="nav">
            <ul>
                <li><a href="#overview">é¡¹ç›®æ¦‚è¿°</a></li>
                <li><a href="#setup">ç¯å¢ƒå‡†å¤‡</a></li>
                <li><a href="#quickstart">å¿«é€Ÿå¼€å§‹</a></li>
                <li><a href="#usage">è¯¦ç»†ä½¿ç”¨</a></li>
                <li><a href="#strategy">ç­–ç•¥å¼€å‘</a></li>
                <li><a href="#visualization">å¯è§†åŒ–</a></li>
                <li><a href="#troubleshooting">é—®é¢˜æ’æŸ¥</a></li>
                <li><a href="#astro">Astroé›†æˆ</a></li>
            </ul>
        </nav>

        <section id="overview" class="section">
            <h2>ğŸ“‹ é¡¹ç›®æ¦‚è¿°</h2>
            <p>JQQuant æ˜¯ä¸€ä¸ªç±»ä¼¼ QuantConnect çš„æœ¬åœ°åŒ–é‡åŒ–äº¤æ˜“å¹³å°ï¼Œå¯ä»¥åœ¨ Cursor IDE ä¸­ç›´æ¥è¿›è¡Œç­–ç•¥å¼€å‘ã€å›æµ‹å’Œäº¤æ˜“ã€‚</p>
            
            <h3>æ ¸å¿ƒç‰¹æ€§</h3>
            <ul>
                <li>âœ… èšå®½æ•°æ®APIé›†æˆ</li>
                <li>âœ… äº‹ä»¶é©±åŠ¨å›æµ‹å¼•æ“</li>
                <li>âœ… ç­–ç•¥å¼€å‘æ¡†æ¶</li>
                <li>âœ… å®æ—¶å›æµ‹ç»“æœå¯è§†åŒ–</li>
                <li>âœ… æ€§èƒ½æŒ‡æ ‡åˆ†æ</li>
                <li>âœ… Cursor IDEé›†æˆ</li>
            </ul>

            <h3>é¡¹ç›®ç»“æ„</h3>
            <div class="code-block">
<code>JQQuant/
â”œâ”€â”€ core/              # æ ¸å¿ƒå¼•æ“
â”œâ”€â”€ jqdata/           # èšå®½APIé›†æˆ
â”œâ”€â”€ strategies/       # ç­–ç•¥ç›®å½•
â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”œâ”€â”€ config/           # é…ç½®æ–‡ä»¶
â”œâ”€â”€ main.py           # ä¸»å…¥å£
â””â”€â”€ docs/             # æ–‡æ¡£ï¼ˆæœ¬æ•™ç¨‹ï¼‰</code>
            </div>
        </section>

        <section id="setup" class="section">
            <h2>âš™ï¸ ç¯å¢ƒå‡†å¤‡</h2>

            <div class="step">
                <span class="step-number">1</span>
                <strong>å®‰è£…Pythonä¾èµ–</strong>
                <div class="code-block">
<code><span class="comment"># ç¡®ä¿å·²åŠ è½½PowerShellé…ç½®ï¼ˆç¦ç”¨ä»£ç†ï¼‰</span>
<span class="command">. $PROFILE</span>

<span class="comment"># å®‰è£…ä¾èµ–</span>
<span class="command">pip install -r requirements.txt</span></code>
                </div>
            </div>

            <div class="step">
                <span class="step-number">2</span>
                <strong>é…ç½®èšå®½è´¦å·</strong>
                <p>é…ç½®æ–‡ä»¶ä½ç½®ï¼š<span class="highlight">config/jqdata_config.json</span></p>
                <div class="code-block">
<code>{
  <span class="string">"username"</span>: <span class="string">"18072069583"</span>,
  <span class="string">"password"</span>: <span class="string">"%5Diamond"</span>,
  <span class="string">"api_endpoint"</span>: <span class="string">"https://dataapi.joinquant.com"</span>,
  <span class="string">"timeout"</span>: <span class="number">30</span>,
  <span class="string">"retry_times"</span>: <span class="number">3</span>
}</code>
                </div>
                <div class="info">
                    <strong>æç¤ºï¼š</strong> é…ç½®æ–‡ä»¶å·²é…ç½®å¥½ï¼Œæ— éœ€ä¿®æ”¹ï¼ˆé™¤éæ›´æ¢è´¦å·ï¼‰ã€‚
                </div>
            </div>

            <div class="step">
                <span class="step-number">3</span>
                <strong>éªŒè¯å®‰è£…</strong>
                <div class="code-block">
<code><span class="command">python test_imports.py</span></code>
                </div>
                <p>åº”è¯¥çœ‹åˆ°æ‰€æœ‰æ¨¡å—å¯¼å…¥æˆåŠŸã€‚</p>
            </div>

            <div class="warning">
                <strong>âš ï¸ TA-Lib Windowså®‰è£…ï¼š</strong>
                <ol>
                    <li>ä¸‹è½½é¢„ç¼–è¯‘wheelï¼š<a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#ta-lib" target="_blank">https://www.lfd.uci.edu/~gohlke/pythonlibs/#ta-lib</a></li>
                    <li>é€‰æ‹©å¯¹åº”Pythonç‰ˆæœ¬çš„whlæ–‡ä»¶</li>
                    <li>å®‰è£…ï¼š<span class="command">pip install TA_Libâ€‘0.4.xxâ€‘cp38â€‘cp38â€‘win_amd64.whl</span></li>
                </ol>
            </div>
        </section>

        <section id="quickstart" class="section">
            <h2>ğŸš€ å¿«é€Ÿå¼€å§‹</h2>

            <h3>æ–¹å¼1ï¼šå‘½ä»¤è¡Œè¿è¡Œï¼ˆæ¨èï¼‰</h3>
            <div class="code-block">
<code><span class="command">python main.py --strategy ma_cross --start 2020-01-01 --end 2023-12-31 --securities 000001.XSHE 000002.XSHE</span></code>
            </div>

            <h4>å‚æ•°è¯´æ˜</h4>
            <table>
                <tr>
                    <th>å‚æ•°</th>
                    <th>è¯´æ˜</th>
                    <th>é»˜è®¤å€¼</th>
                </tr>
                <tr>
                    <td><code>--strategy</code></td>
                    <td>ç­–ç•¥åç§°ï¼ˆå½“å‰æ”¯æŒ ma_crossï¼‰</td>
                    <td>å¿…éœ€</td>
                </tr>
                <tr>
                    <td><code>--start</code></td>
                    <td>å›æµ‹å¼€å§‹æ—¥æœŸ (YYYY-MM-DD)</td>
                    <td>å¿…éœ€</td>
                </tr>
                <tr>
                    <td><code>--end</code></td>
                    <td>å›æµ‹ç»“æŸæ—¥æœŸ (YYYY-MM-DD)</td>
                    <td>å¿…éœ€</td>
                </tr>
                <tr>
                    <td><code>--securities</code></td>
                    <td>è‚¡ç¥¨ä»£ç åˆ—è¡¨ï¼ˆèšå®½æ ¼å¼ï¼‰</td>
                    <td>å¿…éœ€</td>
                </tr>
                <tr>
                    <td><code>--cash</code></td>
                    <td>åˆå§‹èµ„é‡‘</td>
                    <td>1000000</td>
                </tr>
                <tr>
                    <td><code>--commission</code></td>
                    <td>æ‰‹ç»­è´¹ç‡</td>
                    <td>0.0003</td>
                </tr>
                <tr>
                    <td><code>--slippage</code></td>
                    <td>æ»‘ç‚¹</td>
                    <td>0.001</td>
                </tr>
                <tr>
                    <td><code>--short-window</code></td>
                    <td>çŸ­æœŸå‡çº¿å‘¨æœŸï¼ˆMAç­–ç•¥ï¼‰</td>
                    <td>5</td>
                </tr>
                <tr>
                    <td><code>--long-window</code></td>
                    <td>é•¿æœŸå‡çº¿å‘¨æœŸï¼ˆMAç­–ç•¥ï¼‰</td>
                    <td>20</td>
                </tr>
            </table>

            <h3>æ–¹å¼2ï¼šä½¿ç”¨Cursorä»»åŠ¡</h3>
            <div class="step">
                <span class="step-number">1</span>
                æŒ‰ <span class="highlight">Ctrl+Shift+P</span> æ‰“å¼€å‘½ä»¤é¢æ¿
            </div>
            <div class="step">
                <span class="step-number">2</span>
                è¾“å…¥ <span class="highlight">"Tasks: Run Task"</span>
            </div>
            <div class="step">
                <span class="step-number">3</span>
                é€‰æ‹© <span class="highlight">"JQQuant: è¿è¡Œå›æµ‹"</span>
            </div>

            <h3>æ–¹å¼3ï¼šPythonè„šæœ¬</h3>
            <div class="code-block">
<code><span class="keyword">import</span> sys
<span class="keyword">from</span> pathlib <span class="keyword">import</span> Path
sys.path.insert(<span class="number">0</span>, <span class="function">str</span>(Path(<span class="string">__file__</span>).parent))

<span class="keyword">from</span> main <span class="keyword">import</span> run_backtest

<span class="comment"># è¿è¡Œå›æµ‹</span>
results = <span class="function">run_backtest</span>(
    strategy_name=<span class="string">'ma_cross'</span>,
    start_date=<span class="string">'2020-01-01'</span>,
    end_date=<span class="string">'2023-12-31'</span>,
    securities=[<span class="string">'000001.XSHE'</span>, <span class="string">'000002.XSHE'</span>],
    initial_cash=<span class="number">1000000</span>,
    commission_rate=<span class="number">0.0003</span>,
    slippage=<span class="number">0.001</span>,
    strategy_params={<span class="string">'short_window'</span>: <span class="number">5</span>, <span class="string">'long_window'</span>: <span class="number">20</span>}
)

<span class="keyword">if</span> results:
    <span class="function">print</span>(<span class="string">"å›æµ‹å®Œæˆï¼"</span>)
    <span class="function">print</span>(<span class="function">f</span><span class="string">"æ€»æ”¶ç›Š: {results['summary']['total_profit_rate']*100:.2f}%"</span>)</code>
            </div>
        </section>

        <section id="usage" class="section">
            <h2>ğŸ“– è¯¦ç»†ä½¿ç”¨æŒ‡å—</h2>

            <h3>1. è‚¡ç¥¨ä»£ç æ ¼å¼</h3>
            <p>èšå®½ä½¿ç”¨ç‰¹å®šçš„è‚¡ç¥¨ä»£ç æ ¼å¼ï¼š</p>
            <ul>
                <li><strong>æ·±åœ³è‚¡ç¥¨</strong>: <code>000001.XSHE</code> (å¹³å®‰é“¶è¡Œ)</li>
                <li><strong>ä¸Šæµ·è‚¡ç¥¨</strong>: <code>600000.XSHG</code> (æµ¦å‘é“¶è¡Œ)</li>
                <li><strong>æŒ‡æ•°</strong>: <code>000300.XSHG</code> (æ²ªæ·±300)</li>
            </ul>

            <h3>2. è·å–è‚¡ç¥¨ä»£ç </h3>
            <div class="code-block">
<code><span class="keyword">from</span> jqdata.client <span class="keyword">import</span> JQDataClient
<span class="keyword">from</span> config.config_manager <span class="keyword">import</span> get_config_manager

<span class="comment"># åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
config_manager = <span class="function">get_config_manager</span>()
config = config_manager.<span class="function">get_jqdata_config</span>()
jq_client = <span class="function">JQDataClient</span>()
jq_client.<span class="function">authenticate</span>(config[<span class="string">'username'</span>], config[<span class="string">'password'</span>])

<span class="comment"># è·å–æ‰€æœ‰è‚¡ç¥¨</span>
all_stocks = jq_client.<span class="function">get_all_securities</span>(types=[<span class="string">'stock'</span>], date=<span class="string">'2023-12-31'</span>)
<span class="function">print</span>(all_stocks.<span class="function">head</span>())

<span class="comment"># è·å–æŒ‡æ•°æˆåˆ†è‚¡</span>
hs300_stocks = jq_client.<span class="function">get_index_stocks</span>(<span class="string">'000300.XSHG'</span>, date=<span class="string">'2023-12-31'</span>)
<span class="function">print</span>(<span class="function">f</span><span class="string">"æ²ªæ·±300æˆåˆ†è‚¡æ•°é‡: {len(hs300_stocks)}"</span>)</code>
            </div>

            <h3>3. æŸ¥çœ‹å›æµ‹ç»“æœ</h3>
            <p>å›æµ‹å®Œæˆåï¼Œç»“æœä¼šï¼š</p>
            <ol>
                <li><strong>æ§åˆ¶å°è¾“å‡º</strong> - æ˜¾ç¤ºå…³é”®æŒ‡æ ‡</li>
                <li><strong>JSONæ–‡ä»¶</strong> - ä¿å­˜åˆ° <code>results/</code> ç›®å½•</li>
                <li><strong>æ—¥å¿—æ–‡ä»¶</strong> - ä¿å­˜åˆ° <code>logs/jqquant.log</code></li>
            </ol>

            <h4>ç»“æœæ–‡ä»¶æ ¼å¼</h4>
            <div class="code-block">
<code>{
  <span class="string">"strategy"</span>: <span class="string">"ma_cross"</span>,
  <span class="string">"start_date"</span>: <span class="string">"2020-01-01"</span>,
  <span class="string">"end_date"</span>: <span class="string">"2023-12-31"</span>,
  <span class="string">"securities"</span>: [<span class="string">"000001.XSHE"</span>],
  <span class="string">"summary"</span>: {
    <span class="string">"initial_cash"</span>: <span class="number">1000000</span>,
    <span class="string">"total_value"</span>: <span class="number">1200000</span>,
    <span class="string">"total_profit_rate"</span>: <span class="number">0.2</span>
  },
  <span class="string">"metrics"</span>: {
    <span class="string">"total_return"</span>: <span class="number">0.2</span>,
    <span class="string">"annual_return"</span>: <span class="number">0.05</span>,
    <span class="string">"sharpe_ratio"</span>: <span class="number">1.2</span>,
    <span class="string">"max_drawdown"</span>: <span class="number">0.15</span>
  }
}</code>
            </div>
        </section>

        <section id="strategy" class="section">
            <h2>ğŸ’¡ ç­–ç•¥å¼€å‘</h2>

            <h3>åˆ›å»ºè‡ªå®šä¹‰ç­–ç•¥</h3>

            <div class="step">
                <span class="step-number">1</span>
                <strong>åˆ›å»ºç­–ç•¥æ–‡ä»¶</strong>
                <p>åœ¨ <code>strategies/</code> ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¾‹å¦‚ <code>my_strategy.py</code>ï¼š</p>
                <div class="code-block">
<code><span class="keyword">from</span> strategies.base_strategy <span class="keyword">import</span> BaseStrategy
<span class="keyword">import</span> pandas <span class="keyword">as</span> pd
<span class="keyword">from</span> datetime <span class="keyword">import</span> datetime
<span class="keyword">from</span> core.order_manager <span class="keyword">import</span> OrderType

<span class="keyword">class</span> MyStrategy(<span class="function">BaseStrategy</span>):
    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="keyword">self</span>):
        <span class="function">super</span>().<span class="function">__init__</span>(name=<span class="string">"My Strategy"</span>)
    
    <span class="keyword">def</span> <span class="function">initialize</span>(<span class="keyword">self</span>, context):
        <span class="function">super</span>().<span class="function">initialize</span>(context)
        <span class="function">print</span>(<span class="function">f</span><span class="string">"ç­–ç•¥ {self.name} åˆå§‹åŒ–å®Œæˆ"</span>)
    
    <span class="keyword">def</span> <span class="function">handle_data</span>(<span class="keyword">self</span>, data: pd.DataFrame, date: datetime):
        portfolio = <span class="keyword">self</span>.context[<span class="string">'portfolio'</span>]
        order_manager = <span class="keyword">self</span>.context[<span class="string">'order_manager'</span>]
        securities = <span class="keyword">self</span>.context[<span class="string">'securities'</span>]
        
        <span class="comment"># æ‚¨çš„ç­–ç•¥é€»è¾‘</span>
        <span class="keyword">for</span> security <span class="keyword">in</span> securities:
            position = portfolio.<span class="function">get_position</span>(security)
            has_position = position <span class="keyword">is not None</span> <span class="keyword">and</span> position.amount > <span class="number">0</span>
            
            <span class="keyword">if not</span> has_position:
                <span class="comment"># ä¹°å…¥æ¡ä»¶</span>
                order_manager.<span class="function">create_order</span>(security, <span class="number">100</span>, order_type=OrderType.MARKET)
            <span class="keyword">else</span>:
                <span class="comment"># å–å‡ºæ¡ä»¶</span>
                order_manager.<span class="function">create_order</span>(security, -position.amount, order_type=OrderType.MARKET)</code>
                </div>
            </div>

            <div class="step">
                <span class="step-number">2</span>
                <strong>æ³¨å†Œç­–ç•¥</strong>
                <p>åœ¨ <code>main.py</code> çš„ <code>load_strategy</code> å‡½æ•°ä¸­æ·»åŠ ï¼š</p>
                <div class="code-block">
<code><span class="keyword">elif</span> strategy_name == <span class="string">'my_strategy'</span>:
    <span class="keyword">from</span> strategies.my_strategy <span class="keyword">import</span> MyStrategy
    <span class="keyword">return</span> <span class="function">MyStrategy</span>()</code>
                </div>
            </div>

            <div class="step">
                <span class="step-number">3</span>
                <strong>è¿è¡Œç­–ç•¥</strong>
                <div class="code-block">
<code><span class="command">python main.py --strategy my_strategy --start 2020-01-01 --end 2023-12-31 --securities 000001.XSHE</span></code>
                </div>
            </div>
        </section>

        <section id="visualization" class="section">
            <h2>ğŸ“Š å¯è§†åŒ–</h2>

            <h3>ä½¿ç”¨matplotlibå¯è§†åŒ–</h3>
            <div class="code-block">
<code><span class="keyword">from</span> utils.visualization <span class="keyword">import</span> plot_backtest_results
<span class="keyword">import</span> json
<span class="keyword">from</span> pathlib <span class="keyword">import</span> Path

<span class="comment"># åŠ è½½ç»“æœ</span>
results_file = Path(<span class="string">"results/backtest_ma_cross_20231231_120000.json"</span>)
<span class="keyword">with</span> <span class="function">open</span>(results_file, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:
    results = json.<span class="function">load</span>(f)

<span class="comment"># ç»˜åˆ¶å›¾è¡¨</span>
<span class="function">plot_backtest_results</span>(results, save_path=Path(<span class="string">"results/chart.png"</span>))</code>
            </div>

            <h3>Astroé›†æˆæ–¹æ¡ˆï¼ˆè§ä¸‹æ–¹ï¼‰</h3>
        </section>

        <section id="troubleshooting" class="section">
            <h2>ğŸ”§ é—®é¢˜æ’æŸ¥</h2>

            <h3>å¸¸è§é—®é¢˜</h3>

            <div class="error">
                <strong>Q1: èšå®½è®¤è¯å¤±è´¥</strong>
                <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                <ol>
                    <li>æ£€æŸ¥ <code>config/jqdata_config.json</code> ä¸­çš„è´¦å·å¯†ç </li>
                    <li>ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸</li>
                    <li>æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ <code>logs/jqquant.log</code></li>
                </ol>
            </div>

            <div class="error">
                <strong>Q2: æ•°æ®è·å–å¤±è´¥</strong>
                <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                <ol>
                    <li>æ£€æŸ¥è‚¡ç¥¨ä»£ç æ ¼å¼ï¼ˆå¦‚ <code>000001.XSHE</code>ï¼‰</li>
                    <li>ç¡®è®¤æ—¥æœŸèŒƒå›´æœ‰æ•ˆ</li>
                    <li>æ£€æŸ¥èšå®½è´¦å·æƒé™</li>
                </ol>
            </div>

            <div class="error">
                <strong>Q3: æ¨¡å—å¯¼å…¥å¤±è´¥</strong>
                <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                <ol>
                    <li>ç¡®ä¿å·²å®‰è£…ä¾èµ–ï¼š<code>pip install -r requirements.txt</code></li>
                    <li>æ£€æŸ¥Pythonç‰ˆæœ¬ï¼ˆéœ€è¦3.8+ï¼‰</li>
                    <li>ç¡®è®¤åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ</li>
                </ol>
            </div>

            <h3>è°ƒè¯•æ–¹æ³•</h3>
            <div class="code-block">
<code><span class="comment"># 1. æ£€æŸ¥é…ç½®</span>
<span class="keyword">from</span> config.config_manager <span class="keyword">import</span> get_config_manager
config_manager = <span class="function">get_config_manager</span>()
jq_config = config_manager.<span class="function">get_jqdata_config</span>()
<span class="function">print</span>(<span class="function">f</span><span class="string">"ç”¨æˆ·å: {jq_config.get('username')}"</span>)

<span class="comment"># 2. æµ‹è¯•èšå®½è¿æ¥</span>
<span class="keyword">from</span> jqdata.client <span class="keyword">import</span> JQDataClient
jq_client = <span class="function">JQDataClient</span>()
<span class="keyword">if</span> jq_client.<span class="function">authenticate</span>(config[<span class="string">'username'</span>], config[<span class="string">'password'</span>]):
    <span class="function">print</span>(<span class="string">"è®¤è¯æˆåŠŸï¼"</span>)

<span class="comment"># 3. æŸ¥çœ‹æ—¥å¿—</span>
<span class="comment"># Get-Content logs/jqquant.log -Tail 50</span></code>
            </div>
        </section>

        <section id="astro" class="section">
            <h2>ğŸŒŸ Astroé›†æˆæ–¹æ¡ˆ</h2>

            <h3>ä¸ºä»€ä¹ˆé€‰æ‹©Astroï¼Ÿ</h3>
            <ul>
                <li>âœ… ç°ä»£åŒ–çš„Webæ¡†æ¶ï¼Œæ€§èƒ½ä¼˜å¼‚</li>
                <li>âœ… æ”¯æŒå¤šç§å‰ç«¯æ¡†æ¶ï¼ˆReact, Vue, Svelteç­‰ï¼‰</li>
                <li>âœ… ä¼˜ç§€çš„SEOæ”¯æŒ</li>
                <li>âœ… é€‚åˆæ„å»ºæ•°æ®å¯è§†åŒ–ä»ªè¡¨æ¿</li>
                <li>âœ… å¯ä»¥é›†æˆPlotlyã€EChartsç­‰å›¾è¡¨åº“</li>
            </ul>

            <h3>æ¶æ„è§„åˆ’</h3>
            <div class="code-block">
<code>JQQuant/
â”œâ”€â”€ core/              # Pythonå›æµ‹å¼•æ“
â”œâ”€â”€ jqdata/           # èšå®½API
â”œâ”€â”€ strategies/       # ç­–ç•¥
â”œâ”€â”€ results/          # å›æµ‹ç»“æœï¼ˆJSONï¼‰
â”œâ”€â”€ web/              # Astro Webåº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/    # é¡µé¢è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ index.astro      # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ backtest.astro   # å›æµ‹é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ results/         # ç»“æœå±•ç¤º
â”‚   â”‚   â”‚   â””â”€â”€ strategies/      # ç­–ç•¥ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ components/          # ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Chart.astro      # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Metrics.astro   # æŒ‡æ ‡å±•ç¤º
â”‚   â”‚   â”‚   â””â”€â”€ StrategyList.astro
â”‚   â”‚   â”œâ”€â”€ layouts/              # å¸ƒå±€
â”‚   â”‚   â””â”€â”€ api/                  # APIè·¯ç”±
â”‚   â”‚       â””â”€â”€ results.json.ts  # è¯»å–å›æµ‹ç»“æœ
â”‚   â”œâ”€â”€ public/       # é™æ€èµ„æº
â”‚   â””â”€â”€ package.json
â””â”€â”€ docs/             # æ–‡æ¡£ï¼ˆæœ¬æ•™ç¨‹ï¼‰</code>
            </div>

            <h3>å®æ–½æ­¥éª¤</h3>

            <div class="step">
                <span class="step-number">1</span>
                <strong>åˆå§‹åŒ–Astroé¡¹ç›®</strong>
                <div class="code-block">
<code><span class="comment"># åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºwebç›®å½•</span>
<span class="command">cd web</span>
<span class="command">npm create astro@latest .</span>
<span class="command">npm install @astro/react plotly.js react-plotly.js</span></code>
                </div>
            </div>

            <div class="step">
                <span class="step-number">2</span>
                <strong>åˆ›å»ºAPIç«¯ç‚¹è¯»å–å›æµ‹ç»“æœ</strong>
                <p>æ–‡ä»¶ï¼š<code>web/src/pages/api/results.json.ts</code></p>
                <div class="code-block">
<code><span class="keyword">import</span> type { APIRoute } <span class="keyword">from</span> <span class="string">'astro'</span>;
<span class="keyword">import</span> { readFileSync } <span class="keyword">from</span> <span class="string">'fs'</span>;
<span class="keyword">import</span> { join } <span class="keyword">from</span> <span class="string">'path'</span>;

<span class="keyword">export const</span> GET: APIRoute = <span class="keyword">async</span> ({ params }) => {
  <span class="keyword">const</span> resultsPath = join(process.cwd(), <span class="string">'..'</span>, <span class="string">'results'</span>);
  <span class="comment">// è¯»å–æœ€æ–°çš„å›æµ‹ç»“æœ</span>
  <span class="keyword">const</span> results = <span class="function">JSON.parse</span>(
    <span class="function">readFileSync</span>(resultsPath, <span class="string">'utf-8'</span>)
  );
  <span class="keyword">return new</span> <span class="function">Response</span>(<span class="function">JSON.stringify</span>(results), {
    headers: { <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span> }
  });
};</code>
                </div>
            </div>

            <div class="step">
                <span class="step-number">3</span>
                <strong>åˆ›å»ºå›¾è¡¨ç»„ä»¶</strong>
                <p>æ–‡ä»¶ï¼š<code>web/src/components/BacktestChart.tsx</code></p>
                <div class="code-block">
<code><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;
<span class="keyword">import</span> Plot <span class="keyword">from</span> <span class="string">'react-plotly.js'</span>;

<span class="keyword">export default function</span> <span class="function">BacktestChart</span>({ data }) {
  <span class="keyword">return</span> (
    &lt;Plot
      data={[{
        x: data.dates,
        y: data.total_value,
        type: <span class="string">'scatter'</span>,
        mode: <span class="string">'lines'</span>,
        name: <span class="string">'æ€»èµ„äº§'</span>
      }]}
      layout={{
        title: <span class="string">'å›æµ‹èµ„äº§æ›²çº¿'</span>,
        xaxis: { title: <span class="string">'æ—¥æœŸ'</span> },
        yaxis: { title: <span class="string">'èµ„äº§ä»·å€¼ (å…ƒ)'</span> }
      }}
    /&gt;
  );
}</code>
                </div>
            </div>

            <div class="step">
                <span class="step-number">4</span>
                <strong>åˆ›å»ºç»“æœå±•ç¤ºé¡µé¢</strong>
                <p>æ–‡ä»¶ï¼š<code>web/src/pages/results/[id].astro</code></p>
                <div class="code-block">
<code>---
<span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../../layouts/Layout.astro'</span>;
<span class="keyword">import</span> BacktestChart <span class="keyword">from</span> <span class="string">'../../components/BacktestChart'</span>;

<span class="keyword">const</span> { id } = Astro.params;
<span class="keyword">const</span> response = <span class="keyword">await</span> <span class="function">fetch</span>(<span class="function">`/api/results/${id}.json`</span>);
<span class="keyword">const</span> results = <span class="keyword">await</span> response.<span class="function">json</span>();
---
&lt;Layout title=<span class="string">"å›æµ‹ç»“æœ"</span>&gt;
  &lt;h1&gt;å›æµ‹ç»“æœ: {results.strategy}&lt;/h1&gt;
  &lt;div class=<span class="string">"metrics"</span>&gt;
    &lt;div&gt;æ€»æ”¶ç›Š: {results.metrics.total_return * 100}%&lt;/div&gt;
    &lt;div&gt;å¹´åŒ–æ”¶ç›Š: {results.metrics.annual_return * 100}%&lt;/div&gt;
    &lt;div&gt;å¤æ™®æ¯”ç‡: {results.metrics.sharpe_ratio}&lt;/div&gt;
  &lt;/div&gt;
  &lt;BacktestChart client:load data={results.portfolio_history} /&gt;
&lt;/Layout&gt;</code>
                </div>
            </div>

            <h3>åŠŸèƒ½è§„åˆ’</h3>
            <ul>
                <li>ğŸ“Š <strong>å›æµ‹ç»“æœå¯è§†åŒ–</strong> - èµ„äº§æ›²çº¿ã€æ”¶ç›Šç‡æ›²çº¿ã€å›æ’¤åˆ†æ</li>
                <li>ğŸ“ˆ <strong>ç­–ç•¥å¯¹æ¯”</strong> - å¤šä¸ªç­–ç•¥çš„æ€§èƒ½å¯¹æ¯”</li>
                <li>ğŸ” <strong>å‚æ•°ä¼˜åŒ–</strong> - å¯è§†åŒ–å‚æ•°ä¼˜åŒ–ç»“æœ</li>
                <li>ğŸ“‹ <strong>ç­–ç•¥ç®¡ç†</strong> - ç­–ç•¥åˆ—è¡¨ã€ç¼–è¾‘ã€è¿è¡Œ</li>
                <li>ğŸ“Š <strong>å®æ—¶ç›‘æ§</strong> - å®ç›˜äº¤æ˜“ç›‘æ§ï¼ˆæœªæ¥ï¼‰</li>
            </ul>

            <div class="info">
                <strong>ğŸ’¡ æç¤ºï¼š</strong> Astroé›†æˆæ˜¯å¯é€‰çš„é«˜çº§åŠŸèƒ½ã€‚åŸºç¡€çš„å›æµ‹åŠŸèƒ½å·²ç»å¯ä»¥ä½¿ç”¨matplotlibè¿›è¡Œå¯è§†åŒ–ã€‚
            </div>
        </section>

        <footer>
            <p>JQQuant - åŸºäºèšå®½APIçš„é‡åŒ–äº¤æ˜“å¹³å°</p>
            <p>æ–‡æ¡£ç‰ˆæœ¬: 1.0 | æœ€åæ›´æ–°: 2024</p>
        </footer>
    </div>

    <script>
        // å¹³æ»‘æ»šåŠ¨
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // ä»£ç é«˜äº®ï¼ˆç®€å•ç‰ˆæœ¬ï¼‰
        document.querySelectorAll('.code-block').forEach(block => {
            const code = block.textContent;
            // è¿™é‡Œå¯ä»¥é›†æˆä»£ç é«˜äº®åº“å¦‚Prism.jsæˆ–highlight.js
        });
    </script>
</body>
</html>

