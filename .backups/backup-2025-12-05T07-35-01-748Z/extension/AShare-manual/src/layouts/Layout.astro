---
import PDFExportButton from '../components/PDFExportButton.astro';

export interface Props {
  title: string;
  lang?: string;
  alt?: string;
  currentBook?: string;
  currentChapter?: string;
}

const { title, lang = 'zh-CN', alt = '', currentBook = 'theory', currentChapter = '' } = Astro.props;
const isEn = lang === 'en' || (typeof window !== 'undefined' && window.location.pathname.startsWith('/en/'));
---

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Aè‚¡é«˜å€è‚¡å®æ“æ‰‹å†Œ - å®Œæ•´çŸ¥è¯†ä½“ç³»" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
  </head>
  <body>
    <div class="container">
      <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
      <header class="top-nav" id="topNav">
        <div class="nav-left">
          <button class="sidebar-toggle" id="sidebarToggle" aria-label="åˆ‡æ¢ä¾§è¾¹æ ">ğŸ“š</button>
        </div>
        <div class="nav-right">
          <button id="homeBtn" class="nav-control-btn home-btn" title="è¿”å›é¦–é¡µ">ğŸ </button>
          <button id="tocBtn" class="nav-control-btn toc-btn" title="è¿”å›ç›®å½•">ğŸ“š</button>
          <button id="prevPageBtn" class="page-nav-btn" title="ä¸Šä¸€é¡µ">ä¸Šä¸€é¡µ</button>
          <button id="nextPageBtn" class="page-nav-btn" title="ä¸‹ä¸€é¡µ">ä¸‹ä¸€é¡µ</button>
          <PDFExportButton />
          <button id="toggleReadingMode" class="reading-btn" title="ä¸“æ³¨é˜…è¯»æ¨¡å¼">ğŸ“–</button>
          <button class="theme-toggle" id="themeToggle" aria-label="åˆ‡æ¢ä¸»é¢˜">
            <span class="theme-icon">ğŸŒ™</span>
          </button>
          <button id="decreaseFont" class="font-btn" title="ç¼©å°å­—ä½“">A-</button>
          <button id="increaseFont" class="font-btn" title="æ”¾å¤§å­—ä½“">A+</button>
          <button class="lang-btn" id="langSwitchEn" title="Translate to English">EN</button>
          <button class="lang-btn" id="langSwitchCn" title="æ¢å¤ä¸­æ–‡åŸæ–‡">CN</button>
        </div>
      </header>

      <!-- é˜…è¯»è¿›åº¦æ¡ï¼ˆä¸“æ³¨æ¨¡å¼æ˜¾ç¤ºï¼‰ -->
      <div class="reading-progress" id="readingProgress" style="display: none;">
        <div class="reading-progress-bar" id="readingProgressBar"></div>
      </div>
      
      <!-- ä¾§è¾¹æ  -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h2 id="sidebarTitle">ğŸ‡¨ğŸ‡³ Aè‚¡é«˜å€è‚¡å®æ“æ‰‹å†Œ</h2>
        </div>
        
        <nav class="sidebar-nav" id="sidebarNav">
          <!-- åŠ¨æ€ç”Ÿæˆå¯¼èˆªå†…å®¹ -->
        </nav>
      </aside>

      <!-- ä¸»å†…å®¹åŒº -->
      <main class="main-content" id="mainContent">
        <slot />
      </main>



      <!-- ç« èŠ‚å¯¼èˆªï¼ˆä»…book1ç« èŠ‚é¡µé¢æ˜¾ç¤ºï¼‰ -->
      <div class="chapter-nav" id="chapterNav" style="display: none;">
        <button class="chapter-btn prev-chapter" id="prevChapter" disabled>
          <span class="chapter-icon">â†</span>
          <span class="chapter-text">ä¸Šä¸€ç« </span>
        </button>
        <button class="chapter-btn next-chapter" id="nextChapter">
          <span class="chapter-text">ä¸‹ä¸€ç« </span>
          <span class="chapter-icon">â†’</span>
        </button>
      </div>

      <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
      <button id="backToTop" class="back-to-top" aria-label="å›åˆ°é¡¶éƒ¨" style="display: none;">â†‘</button>
    </div>

    <style is:global>
      @import '../styles/style.css';
      @import '../styles/components.css';
      @import '../styles/ashare-components.css';

      /* å®¹å™¨ */
      .container {
        position: relative;
        min-height: 100vh;
      }

      /* é¡¶éƒ¨å¯¼èˆªæ  */
      .top-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 16px;
        height: 48px;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: var(--bg-primary);
        border-bottom: 1px solid var(--border-color);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        z-index: 1100;
        transition: all 0.3s ease;
      }

      .nav-left, .nav-right {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      /* æŒ‰é’®åŸºç¡€æ ·å¼ */
      .sidebar-toggle,
      .reading-btn,
      .theme-toggle,
      .font-btn {
        width: 40px;
        height: 40px;
        font-size: 16px;
      }

      .sidebar-toggle:hover,
      .reading-btn:hover,
      .theme-toggle:hover,
      .font-btn:hover {
        background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
        transform: scale(1.05);
        box-shadow: 0 6px 20px rgba(0,0,0,0.25);
      }

      .sidebar-toggle:active,
      .reading-btn:active,
      .theme-toggle:active,
      .font-btn:active {
        transform: scale(0.95);
      }

      /* ç¿»é¡µæŒ‰é’®æ ·å¼ */
      .page-nav-btn {
        padding: 6px 10px;
        font-size: 12px;
        min-width: 50px;
        height: 40px;
      }

      .page-nav-btn:hover {
        background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
        transform: translateY(-1px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.25);
      }

      .page-nav-btn:active {
        transform: translateY(0);
      }

      #prevPageBtn {
        background: linear-gradient(135deg, #2196f3, #42a5f5);
      }

      #nextPageBtn {
        background: linear-gradient(135deg, #ff9800, #ffb74d);
      }

      #prevPageBtn:hover {
        background: linear-gradient(135deg, #1976d2, #2196f3);
      }

      #nextPageBtn:hover {
        background: linear-gradient(135deg, #f57c00, #ff9800);
      }

      #prevPageBtn:disabled,
      #nextPageBtn:disabled {
        background: var(--bg-secondary);
        color: var(--text-secondary);
        cursor: not-allowed;
        opacity: 0.6;
      }

      #prevPageBtn:disabled:hover,
      #nextPageBtn:disabled:hover {
        transform: none;
        background: var(--bg-secondary);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      }

      /* é‡æ–°å®šä¹‰ç¿»é¡µæŒ‰é’®å®Œæ•´æ ·å¼ */
      .page-nav-btn {
        padding: 8px 12px;
        border-radius: 20px;
        background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
        color: white;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        min-width: 60px;
        height: 40px;
      }

      .page-nav-btn:hover {
        background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
        transform: translateY(-1px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.25);
      }

      .page-nav-btn:active {
        transform: translateY(0);
      }

      /* å¯¼èˆªæ§åˆ¶æŒ‰é’®æ ·å¼ */
      .nav-control-btn {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: none;
        cursor: pointer;
        font-size: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        color: white;
        font-weight: 600;
      }

      .nav-control-btn.home-btn {
        background: linear-gradient(135deg, #4caf50, #66bb6a);
      }

      .nav-control-btn.toc-btn {
        background: linear-gradient(135deg, #ff9800, #ffb74d);
      }

      .nav-control-btn:hover {
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 6px 20px rgba(0,0,0,0.25);
      }

      .nav-control-btn:active {
        transform: translateY(0) scale(0.95);
      }

      /* è¯­è¨€åˆ‡æ¢æŒ‰é’® */
      .lang-btn {
        padding: 8px 16px;
        border-radius: 20px;
        background: var(--bg-secondary);
        color: var(--text-primary);
        border: none;
        font-weight: 600;
        transition: all 0.3s ease;
        border: 1px solid var(--border-color);
        cursor: pointer;
        font-size: 14px;
        min-width: 45px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .lang-btn:hover {
        background: var(--primary-color);
        color: white;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      }

      /* ENæŒ‰é’®ç‰¹æ®Šæ ·å¼ */
      #langSwitchEn {
        background: linear-gradient(135deg, #2196f3, #42a5f5);
        color: white;
        border: none;
      }

      #langSwitchEn:hover {
        background: linear-gradient(135deg, #1976d2, #2196f3);
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 6px 20px rgba(33, 150, 243, 0.3);
      }

      /* CNæŒ‰é’®ç‰¹æ®Šæ ·å¼ */
      #langSwitchCn {
        background: linear-gradient(135deg, #ff9800, #ffb74d);
        color: white;
        border: none;
      }

      #langSwitchCn:hover {
        background: linear-gradient(135deg, #f57c00, #ff9800);
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 6px 20px rgba(255, 152, 0, 0.3);
      }

      /* é˜…è¯»è¿›åº¦æ¡ */
      .reading-progress {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--bg-secondary);
        z-index: 1200;
      }

      .reading-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
        width: 0%;
        transition: width 0.3s ease;
      }

      /* ä¾§è¾¹æ  */
      .sidebar {
        position: fixed;
        top: 48px;
        left: -380px;
        width: 380px;
        height: calc(100vh - 48px);
        background: var(--card-bg);
        border-right: 1px solid var(--border-color);
        overflow-y: auto;
        transition: left 0.3s ease;
        z-index: 1000;
        box-shadow: 4px 0 20px rgba(0,0,0,0.15);
      }

      .sidebar.open {
        left: 0;
      }

      .sidebar-header {
        padding: 24px 20px;
        border-bottom: 2px solid var(--border-color);
        background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
        position: relative;
      }

      .sidebar-header::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: rgba(255,255,255,0.2);
      }

      .sidebar-header h2 {
        margin: 0;
        color: white;
        font-size: 1.3rem;
        font-weight: 700;
        text-shadow: 0 1px 2px rgba(0,0,0,0.2);
      }

      .sidebar-nav {
        padding: 16px 0;
      }

      .nav-group {
        margin-bottom: 8px;
      }

      .nav-group-title {
        padding: 12px 20px 8px;
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: 1px solid var(--border-color);
        margin-bottom: 8px;
      }

      .nav-item {
        display: flex;
        align-items: center;
        padding: 14px 20px;
        color: var(--text-primary);
        text-decoration: none;
        transition: all 0.3s ease;
        border-left: 4px solid transparent;
        margin: 2px 0;
        position: relative;
      }

      .nav-item:hover {
        background: var(--bg-secondary);
        border-left-color: var(--primary-color);
        color: var(--primary-color);
        transform: translateX(4px);
      }

      .nav-item.active {
        background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
        color: white;
        border-left-color: var(--primary-dark);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }

      .nav-item.active::after {
        content: '';
        position: absolute;
        right: 16px;
        width: 8px;
        height: 8px;
        background: white;
        border-radius: 50%;
        box-shadow: 0 0 0 2px rgba(255,255,255,0.3);
      }

      .chapter-number {
        margin-right: 14px;
        font-size: 1.2rem;
        min-width: 28px;
        text-align: center;
      }

      .chapter-title {
        font-size: 0.95rem;
        line-height: 1.5;
        font-weight: 500;
      }

      /* ä¾§è¾¹æ æ»šåŠ¨æ¡ç¾åŒ– */
      .sidebar::-webkit-scrollbar {
        width: 6px;
      }

      .sidebar::-webkit-scrollbar-track {
        background: var(--bg-secondary);
      }

      .sidebar::-webkit-scrollbar-thumb {
        background: var(--primary-color);
        border-radius: 3px;
      }

      .sidebar::-webkit-scrollbar-thumb:hover {
        background: var(--primary-dark);
      }

      /* ä¸»å†…å®¹åŒº */
      .main-content {
        margin-top: 48px;
        padding: 0 25px 20px 25px;
        min-height: calc(100vh - 48px);
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
        transition: all 0.3s ease;
      }

      /* å½“ä¾§è¾¹æ æ‰“å¼€æ—¶ï¼Œä¸»å†…å®¹åŒºç¨å¾®è°ƒæ•´ */
      .sidebar.open ~ .main-content {
        margin-left: auto;
        margin-right: auto;
      }



      /* ç« èŠ‚å¯¼èˆª */
      .chapter-nav {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 16px;
        z-index: 900;
      }

      .chapter-btn {
        display: flex;
        align-items: center;
          gap: 8px;
        padding: 12px 20px;
        border-radius: 25px;
        background: var(--primary-color);
        color: white;
        border: none;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      }

      .chapter-btn:hover:not(:disabled) {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      }

      .chapter-btn:disabled {
        background: var(--bg-secondary);
        color: var(--text-secondary);
        cursor: not-allowed;
        opacity: 0.6;
      }

      .chapter-icon {
        font-size: 1.1rem;
      }

      .chapter-text {
        font-size: 0.9rem;
      }

      /* å›åˆ°é¡¶éƒ¨æŒ‰é’® */
      .back-to-top {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: var(--primary-color);
        color: white;
        border: none;
        cursor: pointer;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 900;
      }

      .back-to-top:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      }

      /* ä¸“æ³¨é˜…è¯»æ¨¡å¼ */
      .focus-mode .top-nav {
        background: var(--bg-overlay);
        backdrop-filter: blur(10px);
        border: none;
        box-shadow: 0 2px 20px rgba(0,0,0,0.1);
      }

      .focus-mode .top-nav .nav-left {
        visibility: hidden;
      }

      .focus-mode .top-nav .nav-right {
        display: flex;
        gap: 12px;
      }

      .focus-mode .top-nav .page-nav-btn {
        display: flex;
      }

      .focus-mode .top-nav .reading-btn {
        display: flex;
      }

      .focus-mode .top-nav .theme-toggle {
        display: flex;
      }

      .focus-mode .top-nav .font-btn {
        display: flex;
      }

      .focus-mode .top-nav .lang-btn {
        display: flex;
      }

      .focus-mode .sidebar {
        display: none;
      }

      .focus-mode .main-content {
        margin-left: 0;
        max-width: 800px;
        margin: 48px auto 0;
        padding: 40px;
        background: var(--card-bg);
        border-radius: 15px;
        box-shadow: var(--shadow);
      }

      .focus-mode .left-nav,
      .focus-mode .chapter-nav {
        display: none;
      }

      .focus-mode .back-to-top {
        display: flex;
      }

      .focus-mode .reading-progress {
        display: block;
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 1200px) {
        .main-content {
          max-width: 1000px;
          padding: 0 20px 20px 20px;
        }
      }

      @media (max-width: 768px) {
        .top-nav {
          padding: 0 12px;
        }

        .nav-left, .nav-right {
          gap: 8px;
        }

        .sidebar-toggle,
        .reading-btn,
        .theme-toggle,
        .font-btn {
        width: 40px;
        height: 40px;
          font-size: 16px;
        }

        .page-nav-btn {
          padding: 6px 10px;
          font-size: 12px;
          min-width: 50px;
          height: 40px;
        }

        .lang-btn {
          padding: 6px 12px;
          font-size: 0.9rem;
        }

        .sidebar {
          width: 380px;
          left: -380px;
        }

        .main-content {
          max-width: 100%;
          padding: 0 20px 20px 20px;
          margin-left: 0;
          margin-right: 0;
        }


        .chapter-nav {
          bottom: 10px;
        }

        .chapter-btn {
          padding: 10px 16px;
        }

        .chapter-text {
          display: none;
        }

        .back-to-top {
          bottom: 10px;
          right: 10px;
          width: 45px;
          height: 45px;
          font-size: 1.3rem;
        }

        .focus-mode .main-content {
          padding: 20px;
          margin: 56px 10px 0;
        }
      }

      @media (max-width: 480px) {
        .top-nav {
          height: 48px;
        }

        .main-content {
          margin-top: 48px;
        }

        .sidebar {
          top: 48px;
          height: calc(100vh - 48px);
        }

        .focus-mode .main-content {
          margin-top: 48px;
        }
      }


    </style>

    <script>
      // å…¨å±€çŠ¶æ€ç®¡ç†
      const state = {
        theme: localStorage.getItem('theme') || 'light',
        fontSize: parseInt(localStorage.getItem('fontSize') || '16', 10),
        focusMode: localStorage.getItem('focusMode') === 'true',
        currentBook: '${currentBook}',
        currentChapter: '${currentChapter}'
      };

      // åˆå§‹åŒ–
      document.addEventListener('DOMContentLoaded', function() {
        initializeTheme();
        initializeFontSize();
        initializeFocusMode();
        initializeSidebar();
        initializeNavigation();
        initializeLanguageSwitch();
        initializeBackToTop();
        initializeReadingProgress();
        setupKeyboardShortcuts();
      });

      // ä¸»é¢˜ç®¡ç†
      function initializeTheme() {
      const themeToggle = document.getElementById('themeToggle');
      const themeIcon = themeToggle?.querySelector('.theme-icon');
      
        document.documentElement.setAttribute('data-theme', state.theme);
        if (themeIcon) {
          themeIcon.textContent = state.theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
        }
        
        themeToggle?.addEventListener('click', () => {
          state.theme = state.theme === 'dark' ? 'light' : 'dark';
          document.documentElement.setAttribute('data-theme', state.theme);
          localStorage.setItem('theme', state.theme);
          
      if (themeIcon) {
            themeIcon.textContent = state.theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
          }
        });
      }

      // å­—ä½“å¤§å°ç®¡ç†
      function initializeFontSize() {
        const decreaseFont = document.getElementById('decreaseFont');
        const increaseFont = document.getElementById('increaseFont');
        
        document.body.style.fontSize = state.fontSize + 'px';
        
        decreaseFont?.addEventListener('click', () => {
          if (state.fontSize > 12) {
            state.fontSize -= 2;
            document.body.style.fontSize = state.fontSize + 'px';
            localStorage.setItem('fontSize', state.fontSize.toString());
          }
        });
        
        increaseFont?.addEventListener('click', () => {
          if (state.fontSize < 24) {
            state.fontSize += 2;
            document.body.style.fontSize = state.fontSize + 'px';
            localStorage.setItem('fontSize', state.fontSize.toString());
          }
        });
      }
      
      // ä¸“æ³¨é˜…è¯»æ¨¡å¼
      function initializeFocusMode() {
        const readingModeBtn = document.getElementById('toggleReadingMode');
        
        // åˆå§‹åŒ–æ—¶è®¾ç½®æ­£ç¡®çš„å›¾æ ‡å’ŒçŠ¶æ€
        if (state.focusMode) {
          document.body.classList.add('focus-mode');
          if (readingModeBtn) {
            readingModeBtn.textContent = 'ğŸ“š';
            readingModeBtn.title = 'é€€å‡ºä¸“æ³¨æ¨¡å¼';
          }
          showReadingProgress();
        } else {
          document.body.classList.remove('focus-mode');
          if (readingModeBtn) {
            readingModeBtn.textContent = 'ğŸ“–';
            readingModeBtn.title = 'ä¸“æ³¨é˜…è¯»æ¨¡å¼';
          }
          hideReadingProgress();
        }
        
        // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
        readingModeBtn?.addEventListener('click', () => {
          document.body.classList.toggle('focus-mode');
          state.focusMode = document.body.classList.contains('focus-mode');
          
          if (readingModeBtn) {
            readingModeBtn.textContent = state.focusMode ? 'ğŸ“š' : 'ğŸ“–';
            readingModeBtn.title = state.focusMode ? 'é€€å‡ºä¸“æ³¨æ¨¡å¼' : 'ä¸“æ³¨é˜…è¯»æ¨¡å¼';
          }
          
          localStorage.setItem('focusMode', state.focusMode.toString());
          
          if (state.focusMode) {
            showReadingProgress();
          } else {
            hideReadingProgress();
          }
        });
      }

      // ä¾§è¾¹æ ç®¡ç†
      function initializeSidebar() {
      const sidebarToggle = document.getElementById('sidebarToggle');
      const sidebar = document.getElementById('sidebar');
      
      sidebarToggle?.addEventListener('click', () => {
        sidebar?.classList.toggle('open');
      });
      
        // ç‚¹å‡»å¤–éƒ¨å…³é—­ä¾§è¾¹æ 
        document.addEventListener('click', (e) => {
        const target = e.target as Node;
        if (sidebar && sidebarToggle && target &&
            !sidebar.contains(target) && 
            !sidebarToggle.contains(target)) {
          sidebar.classList.remove('open');
          }
        });
        
        // ç”Ÿæˆä¾§è¾¹æ å†…å®¹
        generateSidebarContent();
      }

      // ç”Ÿæˆä¾§è¾¹æ å†…å®¹
      function generateSidebarContent() {
        const sidebarTitle = document.getElementById('sidebarTitle');
        const sidebarNav = document.getElementById('sidebarNav');
        
        if (!sidebarTitle || !sidebarNav) return;
        
        // æ ¹æ®å½“å‰é¡µé¢è·¯å¾„åˆ¤æ–­å½“å‰å†Œå­
        const currentPath = window.location.pathname;
        let currentBook = 'home'; // é»˜è®¤é¦–é¡µ
        
        if (currentPath === '/' || currentPath === '/index.html') {
          currentBook = 'home';
        } else if (currentPath === '/000_Series_Preface_CN') {
          // æ€»åºé¡µé¢æ˜¾ç¤ºæ‰‹å†Œæ€»ç›®å½•
          currentBook = 'home';
        } else if (currentPath === '/handbook/theory' || currentPath.includes('/handbook/theory')) {
          // ç¬¬ä¸€å†Œç« èŠ‚å¯¼èˆªé¡µé¢æ˜¾ç¤ºç¬¬ä¸€å†Œå¯¼èˆª
          currentBook = 'theory';
        } else if (currentPath.startsWith('/book1/') && currentPath.endsWith('_CN')) {
          // ç¬¬ä¸€å†Œç« èŠ‚ä¸»é¡µæ˜¾ç¤ºç¬¬ä¸€å†Œå¯¼èˆª
          currentBook = 'theory';
        } else if (currentPath.includes('/book1/') && currentPath.includes('/')) {
          // ç¬¬ä¸€å†Œå­ç« èŠ‚é¡µé¢æ˜¾ç¤ºå¯¹åº”ç« èŠ‚çš„å­å¯¼èˆª
          if (currentPath.includes('001_Chapter1')) {
            currentBook = 'theory-chapter1';
          } else if (currentPath.includes('002_Chapter2')) {
            currentBook = 'theory-chapter2';
          } else if (currentPath.includes('003_Chapter3')) {
            currentBook = 'theory-chapter3';
          } else if (currentPath.includes('004_Chapter4')) {
            currentBook = 'theory-chapter4';
          } else if (currentPath.includes('005_Chapter5')) {
            currentBook = 'theory-chapter5';
          } else if (currentPath.includes('006_Chapter6')) {
            currentBook = 'theory-chapter6';
          } else if (currentPath.includes('007_Chapter7')) {
            currentBook = 'theory-chapter7';
          } else if (currentPath.includes('008_Chapter8')) {
            currentBook = 'theory-chapter8';
          } else if (currentPath.includes('009_Chapter9')) {
            currentBook = 'theory-chapter9';
          } else if (currentPath.includes('010_Chapter10')) {
            currentBook = 'theory-chapter10';
          } else if (currentPath.includes('011_Appendix')) {
            currentBook = 'theory-appendix';
          } else {
            currentBook = 'theory';
          }
        } else if (currentPath.startsWith('/book2/') || currentPath.includes('/book2/') ||
            currentPath.includes('201_Chapter1') || currentPath.includes('202_Chapter2') ||
            currentPath.includes('203_Chapter3') || currentPath.includes('204_Chapter4') ||
            currentPath.includes('205_Chapter5') || currentPath.includes('206_Chapter6') ||
            currentPath.includes('207_Chapter7') || currentPath.includes('208_Chapter8') ||
            currentPath.includes('209_Chapter9') || currentPath.includes('210_Chapter10') ||
            currentPath.includes('211_Chapter11') || currentPath.includes('212_Appendix')) {
          currentBook = 'macro';
        } else if (currentPath === '/handbook/macro' || currentPath.includes('/handbook/macro')) {
          currentBook = 'macro';
        } else if (currentPath === '/handbook/stocks' || currentPath.includes('/handbook/stocks')) {
          currentBook = 'stocks';
        } else if (currentPath === '/handbook/technical' || currentPath.includes('/handbook/technical')) {
          currentBook = 'technical';
        } else if (currentPath.startsWith('/book4/') || currentPath.includes('/book4/')) {
          // ç¬¬å››å†Œç« èŠ‚é¡µé¢æ˜¾ç¤ºå¯¹åº”ç« èŠ‚çš„å­å¯¼èˆª
          if (currentPath.includes('401_Chapter1')) {
            currentBook = 'technical-chapter1';
          } else if (currentPath.includes('402_Chapter2')) {
            currentBook = 'technical-chapter2';
          } else if (currentPath.includes('403_Chapter3')) {
            currentBook = 'technical-chapter3';
          } else if (currentPath.includes('404_Chapter4')) {
            currentBook = 'technical-chapter4';
          } else if (currentPath.includes('405_Chapter5')) {
            currentBook = 'technical-chapter5';
          } else if (currentPath.includes('406_Chapter6')) {
            currentBook = 'technical-chapter6';
          } else if (currentPath.includes('407_Chapter7')) {
            currentBook = 'technical-chapter7';
          } else if (currentPath.includes('408_Chapter8')) {
            currentBook = 'technical-chapter8';
          } else if (currentPath.includes('409_Chapter9')) {
            currentBook = 'technical-chapter9';
          } else if (currentPath.includes('410_Chapter10')) {
            currentBook = 'technical-chapter10';
          } else if (currentPath.includes('411_Chapter11')) {
            currentBook = 'technical-chapter11';
          } else if (currentPath.includes('412_Chapter12')) {
            currentBook = 'technical-chapter12';
          } else {
            currentBook = 'technical';
          }
        } else if (currentPath === '/handbook/quantitative' || currentPath.includes('/handbook/quantitative')) {
          currentBook = 'quantitative';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œ - æ£€æµ‹ /ashare-book1/ è·¯å¾„
        else if (currentPath.startsWith('/ashare-book1/001_Chapter1/')) {
          // ç¬¬ä¸€ç« å°èŠ‚é¡µé¢ä½¿ç”¨ä¸“ç”¨ä¾§è¾¹æ 
          currentBook = 'ashare-theory-chapter1';
        }
        else if (currentPath.startsWith('/ashare-book1/002_Chapter2/')) {
          // ç¬¬äºŒç« å°èŠ‚é¡µé¢ä½¿ç”¨ä¸“ç”¨ä¾§è¾¹æ 
          currentBook = 'ashare-theory-chapter2';
        }
        else if (currentPath.startsWith('/ashare-book1/003_Chapter3/')) {
          // ç¬¬ä¸‰ç« å°èŠ‚é¡µé¢ä½¿ç”¨ä¸“ç”¨ä¾§è¾¹æ 
          currentBook = 'ashare-theory-chapter3';
        }
        else if (currentPath.startsWith('/ashare-book1/004_Chapter4/')) {
          // ç¬¬å››ç« å°èŠ‚é¡µé¢ä½¿ç”¨ä¸“ç”¨ä¾§è¾¹æ 
          currentBook = 'ashare-theory-chapter4';
        }
        else if (currentPath.startsWith('/ashare-book1/005_Chapter5/')) {
          // ç¬¬äº”ç« å°èŠ‚é¡µé¢ä½¿ç”¨ä¸“ç”¨ä¾§è¾¹æ 
          currentBook = 'ashare-theory-chapter5';
        }
        else if (currentPath.startsWith('/ashare-book1/006_Chapter6/')) {
          // ç¬¬å…­ç« å°èŠ‚é¡µé¢ä½¿ç”¨ä¸“ç”¨ä¾§è¾¹æ 
          currentBook = 'ashare-theory-chapter6';
        }
        else if (currentPath.startsWith('/ashare-book1/007_Chapter7/')) {
          // ç¬¬ä¸ƒç« å°èŠ‚é¡µé¢ä½¿ç”¨ä¸“ç”¨ä¾§è¾¹æ 
          currentBook = 'ashare-theory-chapter7';
        }
        else if (currentPath.startsWith('/ashare-book1/008_Chapter8/')) {
          // ç¬¬å…«ç« å°èŠ‚é¡µé¢ä½¿ç”¨ä¸“ç”¨ä¾§è¾¹æ 
          currentBook = 'ashare-theory-chapter8';
        }
        else if (currentPath.startsWith('/ashare-book1/009_Chapter9/')) {
          // ç¬¬ä¹ç« å°èŠ‚é¡µé¢ä½¿ç”¨ä¸“ç”¨ä¾§è¾¹æ 
          currentBook = 'ashare-theory-chapter9';
        }
        else if (currentPath.startsWith('/ashare-book1/010_Chapter10/')) {
          // ç¬¬åç« å°èŠ‚é¡µé¢ä½¿ç”¨ä¸“ç”¨ä¾§è¾¹æ 
          currentBook = 'ashare-theory-chapter10';
        }
        else if (currentPath.startsWith('/ashare-book1/')) {
          currentBook = 'ashare-theory';
        }
        // Aè‚¡æ‰‹å†Œç¬¬äºŒå†Œ - æ£€æµ‹ /ashare-book2/ è·¯å¾„
        else if (currentPath.startsWith('/ashare-book2/')) {
          currentBook = 'ashare-macro';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸‰å†Œ - æ£€æµ‹ /ashare-book3/ è·¯å¾„
        else if (currentPath.startsWith('/ashare-book3/')) {
          currentBook = 'ashare-stocks';
        }
        // Aè‚¡æ‰‹å†Œç¬¬å››å†Œå„ç« èŠ‚å°èŠ‚
        else if (currentPath.startsWith('/ashare-book4/001_Chapter1/')) {
          currentBook = 'ashare-quantitative-chapter1';
        }
        else if (currentPath.startsWith('/ashare-book4/002_Chapter2/')) {
          currentBook = 'ashare-quantitative-chapter2';
        }
        else if (currentPath.startsWith('/ashare-book4/003_Chapter3/')) {
          currentBook = 'ashare-quantitative-chapter3';
        }
        else if (currentPath.startsWith('/ashare-book4/004_Chapter4/')) {
          currentBook = 'ashare-quantitative-chapter4';
        }
        else if (currentPath.startsWith('/ashare-book4/005_Chapter5/')) {
          currentBook = 'ashare-quantitative-chapter5';
        }
        else if (currentPath.startsWith('/ashare-book4/006_Chapter6/')) {
          currentBook = 'ashare-quantitative-chapter6';
        }
        else if (currentPath.startsWith('/ashare-book4/007_Chapter7/')) {
          currentBook = 'ashare-quantitative-chapter7';
        }
        else if (currentPath.startsWith('/ashare-book4/008_Chapter8/')) {
          currentBook = 'ashare-quantitative-chapter8';
        }
        else if (currentPath.startsWith('/ashare-book4/009_Chapter9/')) {
          currentBook = 'ashare-quantitative-chapter9';
        }
        else if (currentPath.startsWith('/ashare-book4/010_Chapter10/')) {
          currentBook = 'ashare-quantitative-chapter10';
        }
        else if (currentPath.startsWith('/ashare-book4/011_Chapter11/')) {
          currentBook = 'ashare-quantitative-chapter11';
        }
        else if (currentPath.startsWith('/ashare-book4/012_Chapter12/')) {
          currentBook = 'ashare-quantitative-chapter12';
        }
        else if (currentPath.startsWith('/ashare-book4/013_Chapter13/')) {
          currentBook = 'ashare-quantitative-chapter13';
        }
        // Aè‚¡æ‰‹å†Œç¬¬å››å†Œ - æ£€æµ‹ /ashare-book4/ è·¯å¾„
        else if (currentPath.startsWith('/ashare-book4/')) {
          currentBook = 'ashare-quantitative';
        }
        // Aè‚¡æ‰‹å†Œç¬¬äº”å†Œ - æ£€æµ‹ /ashare-book5/ è·¯å¾„
        else if (currentPath.startsWith('/ashare-book5/')) {
          currentBook = 'ashare-trading';
        }
        // /handbook/theory æ˜¾ç¤ºAè‚¡æ‰‹å†Œç¬¬ä¸€å†Œå¯¼èˆª
        else if (currentPath === '/handbook/theory') {
          currentBook = 'ashare-theory';
        }
        // /handbook/macro æ˜¾ç¤ºAè‚¡æ‰‹å†Œç¬¬äºŒå†Œå¯¼èˆª
        else if (currentPath === '/handbook/macro') {
          currentBook = 'ashare-macro';
        }
        // /handbook/stocks æ˜¾ç¤ºAè‚¡æ‰‹å†Œç¬¬ä¸‰å†Œå¯¼èˆª
        else if (currentPath === '/handbook/stocks') {
          currentBook = 'ashare-stocks';
        }
        // /handbook/quantitative æ˜¾ç¤ºAè‚¡æ‰‹å†Œç¬¬å››å†Œå¯¼èˆª
        else if (currentPath === '/handbook/quantitative') {
          currentBook = 'ashare-quantitative';
        }
        // /handbook/trading æ˜¾ç¤ºAè‚¡æ‰‹å†Œç¬¬äº”å†Œå¯¼èˆª
        else if (currentPath === '/handbook/trading') {
          currentBook = 'ashare-trading';
        }
        
        const bookConfigs = {
          home: {
            title: 'ğŸ‡¨ğŸ‡³ Aè‚¡é«˜å€è‚¡å®æ“æ‰‹å†Œ',
            chapters: [
              { number: 'ğŸ“–', title: 'Aè‚¡å®æ“æ‰‹å†ŒI - ç†è®ºæ‰‹å†Œ', url: '/handbook/theory' },
              { number: 'ğŸŒ', title: 'Aè‚¡å®æ“æ‰‹å†ŒII - å®è§‚ç»æµ', url: '/handbook/macro' },
              { number: 'ğŸ”', title: 'Aè‚¡å®æ“æ‰‹å†ŒIII - ä¸ªè‚¡ç ”ç©¶', url: '/handbook/stocks' },
              { number: 'ğŸ“Š', title: 'Aè‚¡å®æ“æ‰‹å†ŒIV - é‡åŒ–å› å­', url: '/handbook/quantitative' },
              { number: 'âš¡', title: 'Aè‚¡å®æ“æ‰‹å†ŒV - å›æµ‹å®ç›˜', url: '/handbook/trading' }
            ]
          },
          theory: {
            title: 'ğŸ“– ç¾è‚¡æŠ•èµ„å®æ“æ‰‹å†ŒI',
            chapters: [
              { number: 'ğŸ“–', title: 'åºè¨€', url: '/book1/000_Preface_CN' },
              { number: '1ï¸âƒ£', title: 'ç¬¬ä¸€ç« ï¼šçœ‹æ¸…è‡ªå·±ï¼Œçœ‹æ‡‚ä¸–ç•Œ', url: '/book1/001_Chapter1_Know_Yourself_and_the_World_CN' },
              { number: '2ï¸âƒ£', title: 'ç¬¬äºŒç« ï¼šæŠ•èµ„å¿ƒç†ä¸é£é™©ç®¡ç†', url: '/book1/002_Chapter2_Investment_Psychology_and_Risk_Management_CN' },
              { number: '3ï¸âƒ£', title: 'ç¬¬ä¸‰ç« ï¼šå†å²è§„å¾‹ä¸é«˜å€è‚¡ç ”ç©¶', url: '/book1/003_Chapter3_Historical_Patterns_and_Multibagger_Stocks_CN' },
              { number: '4ï¸âƒ£', title: 'ç¬¬å››ç« ï¼šèµ›é“é€‰æ‹©ä¸è¡Œä¸šè¶‹åŠ¿', url: '/book1/004_Chapter4_Track_Selection_and_Industry_Trends_CN' },
              { number: '5ï¸âƒ£', title: 'ç¬¬äº”ç« ï¼šè‚¡ç¥¨ç­›é€‰ç­–ç•¥', url: '/book1/005_Chapter5_Stock_Screening_Strategies_CN' },
              { number: '6ï¸âƒ£', title: 'ç¬¬å…­ç« ï¼šäº¤æ˜“ç­–ç•¥ä¸æ‰§è¡Œ', url: '/book1/006_Chapter6_Trading_Strategies_and_Execution_CN' },
              { number: '7ï¸âƒ£', title: 'ç¬¬ä¸ƒç« ï¼šæŠ•èµ„å†³ç­–å·¥å…·ä¸èµ„æº', url: '/book1/007_Chapter7_Investment_Decision_Tools_and_Resources_CN' },
              { number: '8ï¸âƒ£', title: 'ç¬¬å…«ç« ï¼šæ¡ˆä¾‹å¤ç›˜ä¸ç­–ç•¥æ”¹è¿›', url: '/book1/008_Chapter8_Case_Review_and_Strategy_Improvement_CN' },
              { number: '9ï¸âƒ£', title: 'ç¬¬ä¹ç« ï¼šæ„å»ºæŠ•èµ„ä½“ç³»', url: '/book1/009_Chapter9_Building_an_Investment_System_CN' },
              { number: 'ğŸ”Ÿ', title: 'ç¬¬åç« ï¼šäº¤æ˜“æ‰§è¡Œä¸å®æˆ˜æŒ‡å—', url: '/book1/010_Chapter10_Trading_Execution_and_Practical_Guide_CN' },
              { number: 'ğŸ“‹', title: 'é™„å½•', url: '/book1/011_Appendix_CN' }
            ]
          },
          'theory-chapter1': {
            title: 'ğŸ“– ç¬¬ä¸€ç« ï¼šçœ‹æ¸…è‡ªå·±ï¼Œçœ‹æ‡‚ä¸–ç•Œ',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/book1/001_Chapter1_Know_Yourself_and_the_World_CN' },
              { number: '1.1', title: 'è‡ªæˆ‘è§‰çŸ¥ä¸æŠ•èµ„æ™ºæ…§', url: '/book1/001_Chapter1/1.1_Self_Awareness_and_Investment_Wisdom_CN' },
              { number: '1.2', title: 'ç†è§£ä¸–ç•Œçš„è¿è¡Œè§„å¾‹', url: '/book1/001_Chapter1/1.2_Understanding_the_World_CN' },
              { number: '1.3', title: 'ä»è®¤çŸ¥åˆ°è¡ŒåŠ¨', url: '/book1/001_Chapter1/1.3_From_Cognition_to_Action_CN' }
            ]
          },
          'theory-chapter2': {
            title: 'ğŸ“– ç¬¬äºŒç« ï¼šæŠ•èµ„å¿ƒç†ä¸é£é™©ç®¡ç†',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/book1/002_Chapter2_Investment_Psychology_and_Risk_Management_CN' },
              { number: '2.1', title: 'ä¸ªæ€§åŒ–é£é™©å®¹å¿åº¦æ¨¡å‹', url: '/book1/002_Chapter2/2.1_Personalized_Risk_Tolerance_Model_CN' },
              { number: '2.2', title: 'æ­¢æŸä¸é£é™©æ§åˆ¶', url: '/book1/002_Chapter2/2.2_Stop_Loss_and_Risk_Control_CN' },
              { number: '2.3', title: 'æŠ•èµ„æƒ…ç»ªä¸å†³ç­–é™·é˜±', url: '/book1/002_Chapter2/2.3_Investment_Emotions_and_Decision_Traps_CN' },
              { number: '2.4', title: 'æ³¢åŠ¨å¸‚åœºä¸­çš„çºªå¾‹æ€§', url: '/book1/002_Chapter2/2.4_Maintaining_Discipline_in_Volatile_Markets_CN' }
            ]
          },
          'theory-chapter3': {
            title: 'ğŸ“– ç¬¬ä¸‰ç« ï¼šå†å²è§„å¾‹ä¸é«˜å€è‚¡ç ”ç©¶',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/book1/003_Chapter3_Historical_Patterns_and_Multibagger_Stocks_CN' },
              { number: '3.1', title: 'é«˜å€è‚¡çš„å®šä¹‰ä¸æ—¶é—´ç»´åº¦', url: '/book1/003_Chapter3/3.1_Definition_and_Time_Dimensions_CN' },
              { number: '3.2', title: 'é«˜å€è‚¡çš„è¡Œä¸šåˆ†å¸ƒä¸ç‰¹æ€§', url: '/book1/003_Chapter3/3.2_Industry_Distribution_and_Characteristics_CN' },
              { number: '3.3', title: 'ä»è´¢åŠ¡æŒ‡æ ‡åˆ°å¸‚åœºçƒ­ç‚¹ï¼šé©±åŠ¨å› ç´ ', url: '/book1/003_Chapter3/3.3_Driving_Factors_CN' },
              { number: '3.4', title: 'ç»å…¸æ¡ˆä¾‹ç ”ç©¶', url: '/book1/003_Chapter3/3.4_Case_Studies_CN' }
            ]
          },
          'theory-chapter4': {
            title: 'ğŸ“– ç¬¬å››ç« ï¼šèµ›é“é€‰æ‹©ä¸è¡Œä¸šè¶‹åŠ¿',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/book1/004_Chapter4_Track_Selection_and_Industry_Trends_CN' },
              { number: '4.1', title: 'èµ›é“ç­›é€‰æ–¹æ³•', url: '/book1/004_Chapter4/4.1_Track_Screening_Methods_CN' },
              { number: '4.2', title: 'äººå·¥æ™ºèƒ½ä¸å¤§æ•°æ®é©å‘½', url: '/book1/004_Chapter4/4.2_AI_and_Big_Data_Revolution_CN' },
              { number: '4.3', title: 'æ–°èƒ½æºä¸ç”µåŠ¨æ±½è½¦é»„é‡‘åå¹´', url: '/book1/004_Chapter4/4.3_New_Energy_and_EV_Golden_Decade_CN' },
              { number: '4.4', title: 'ç”Ÿç‰©ç§‘æŠ€ä¸ç²¾å‡†åŒ»ç–—', url: '/book1/004_Chapter4/4.4_Biotech_and_Precision_Medicine_CN' },
              { number: '4.5', title: 'åŠå¯¼ä½“ä¸å…ƒå®‡å®™', url: '/book1/004_Chapter4/4.5_Semiconductor_and_Metaverse_CN' },
              { number: '4.6', title: 'ä¸­æ¦‚è‚¡æŠ•èµ„æœºä¼š', url: '/book1/004_Chapter4/4.6_Chinese_Stocks_Opportunities_CN' }
            ]
          },
          'theory-chapter5': {
            title: 'ğŸ“– ç¬¬äº”ç« ï¼šè‚¡ç¥¨ç­›é€‰ç­–ç•¥',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/book1/005_Chapter5_Stock_Screening_Strategies_CN' },
              { number: '5.1', title: 'è‚¡ç¥¨ç­›é€‰æ–¹æ³•', url: '/book1/005_Chapter5/5.1_Stock_Screening_Methods_CN' },
              { number: '5.2', title: 'åŸºæœ¬é¢ç­›é€‰å‚æ•°', url: '/book1/005_Chapter5/5.2_Fundamental_Screening_Parameters_CN' },
              { number: '5.3', title: 'æŠ€æœ¯åˆ†æä¸æ—¶æœºæŠŠæ¡', url: '/book1/005_Chapter5/5.3_Technical_Analysis_CN' },
              { number: '5.4', title: 'ä¼°å€¼æ–¹æ³•è®º', url: '/book1/005_Chapter5/5.4_Valuation_Methodology_CN' },
              { number: '5.5', title: 'è‚¡ç¥¨ç­›é€‰å®æˆ˜ç¤ºä¾‹', url: '/book1/005_Chapter5/5.5_Stock_Screening_Practice_CN' },
              { number: '5.6', title: 'åˆ©ç”¨è¡ç”Ÿå“æå‡æ”¶ç›Š', url: '/book1/005_Chapter5/5.6_Derivatives_Enhancement_CN' }
            ]
          },
          'theory-chapter6': {
            title: 'ğŸ“– ç¬¬å…­ç« ï¼šäº¤æ˜“ç­–ç•¥ä¸æ‰§è¡Œ',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/book1/006_Chapter6_Trading_Strategies_and_Execution_CN' },
              { number: '6.1', title: 'é•¿æœŸæŠ•èµ„ vs. çŸ­æœŸæ³¢æ®µ', url: '/book1/006_Chapter6/6.1_Long_term_vs_Short_term_CN' },
              { number: '6.2', title: 'ä»“ä½ç®¡ç†ä¸èµ„é‡‘åˆ†é…', url: '/book1/006_Chapter6/6.2_Position_Management_CN' },
              { number: '6.3', title: 'åˆ©ç”¨ETFä¼˜åŒ–ç»„åˆæ”¶ç›Š', url: '/book1/006_Chapter6/6.3_ETF_Optimization_CN' },
              { number: '6.4', title: 'åŠ¨æ€è°ƒæ•´ç­–ç•¥', url: '/book1/006_Chapter6/6.4_Dynamic_Adjustment_CN' },
              { number: '6.5', title: 'é«˜æˆé•¿å‹ä¸ªè‚¡å–å‡ºç­–ç•¥', url: '/book1/006_Chapter6/6.5_Growth_Stock_Exit_CN' },
              { number: '6.6', title: 'ç­–ç•¥æ‰§è¡Œä¸ç›‘æ§ä½“ç³»', url: '/book1/006_Chapter6/6.6_Strategy_Execution_CN' }
            ]
          },
          macro: {
            title: 'ğŸŒ ç¾è‚¡æŠ•èµ„å®æ“æ‰‹å†ŒII',
            chapters: [
              { number: 'ğŸ“–', title: 'å‰è¨€ï¼šå®è§‚ç»æµä¸è‚¡å¸‚èµ°å‘è¿½è¸ª', url: '/book2/000_Preface_CN' },
              { number: '1ï¸âƒ£', title: 'ç¬¬ä¸€ç« ï¼šå¸‚åœºè¶‹åŠ¿åˆ¤æ–­çš„é‡è¦æ€§', url: '/book2/201_Chapter1_Market_Trend_Analysis_CN' },
              { number: '2ï¸âƒ£', title: 'ç¬¬äºŒç« ï¼šç»æµå‘¨æœŸä¸å¸‚åœºè¡¨ç°', url: '/book2/202_Chapter2_Economic_Cycles_and_Market_Performance_CN' },
              { number: '3ï¸âƒ£', title: 'ç¬¬ä¸‰ç« ï¼šè´§å¸æ”¿ç­–ä¸å¸‚åœºä¼ å¯¼', url: '/book2/203_Chapter3_Monetary_Policy_and_Market_Transmission_CN' },
              { number: '4ï¸âƒ£', title: 'ç¬¬å››ç« ï¼šè´¢æ”¿æ”¿ç­–ä¸å¸‚åœºå½±å“', url: '/book2/204_Chapter4_Fiscal_Policy_and_Market_Impact_CN' },
              { number: '5ï¸âƒ£', title: 'ç¬¬äº”ç« ï¼šå›½é™…å®è§‚ç¯å¢ƒåˆ†æ', url: '/book2/205_Chapter5_International_Macro_Environment_CN' },
              { number: '6ï¸âƒ£', title: 'ç¬¬å…­ç« ï¼šå®è§‚æ•°æ®è§£è¯»ä¸åº”ç”¨', url: '/book2/206_Chapter6_Macro_Data_Interpretation_CN' },
              { number: '7ï¸âƒ£', title: 'ç¬¬ä¸ƒç« ï¼šå®è§‚ç»æµé£é™©è¯„ä¼°ä¸é¢„è­¦', url: '/book2/207_Chapter7_Macro_Forecasting_Models_CN' },
              { number: '8ï¸âƒ£', title: 'ç¬¬å…«ç« ï¼šå¸‚åœºé£é™©ç›‘æ§ç³»ç»Ÿ', url: '/book2/208_Chapter8_Market_Risk_Monitoring_CN' },
              { number: '9ï¸âƒ£', title: 'ç¬¬ä¹ç« ï¼šå®è§‚é©±åŠ¨çš„èµ„äº§é…ç½®', url: '/book2/209_Chapter9_Macro_Driven_Asset_Allocation_CN' },
              { number: 'ğŸ”Ÿ', title: 'ç¬¬åç« ï¼šå®è§‚æ‹©æ—¶ç­–ç•¥', url: '/book2/210_Chapter10_Macro_Timing_Strategies_CN' },
              { number: '1ï¸âƒ£1ï¸âƒ£', title: 'ç¬¬åä¸€ç« ï¼šå®è§‚åˆ†æå·¥å…·ç®±', url: '/book2/211_Chapter11_Macro_Analysis_Toolkit_CN' },
              { number: 'ğŸ“‹', title: 'é™„å½•ï¼šå®è§‚åˆ†æä¸“ä¸šèµ„æº', url: '/book2/212_Appendix_CN' }
            ]
          },
          stocks: {
            title: 'ğŸ” ç¾è‚¡æŠ•èµ„å®æ“æ‰‹å†ŒIII',
            chapters: [
              { number: 'ğŸ“–', title: 'ä¸ªè‚¡åˆ†æå¯¼èˆª', url: '/handbook/stocks' },
              { number: 'ğŸš§', title: 'ä¸ªè‚¡åˆ†æç« èŠ‚å¼€å‘ä¸­...', url: '/handbook/stocks' }
            ]
          },
          technical: {
            title: 'ğŸ“Š ç¾è‚¡æŠ•èµ„å®æ“æ‰‹å†ŒIV',
            chapters: [
              { number: 'ğŸ“–', title: 'åºè¨€ï¼šè‡ªåŠ¨åŒ–äº¤æ˜“çš„é©å‘½', url: '/book4/000_Preface_CN' },
              { number: '1ï¸âƒ£', title: 'ç¬¬ä¸€ç« ï¼šä»æ‰‹å·¥äº¤æ˜“åˆ°è‡ªåŠ¨åŒ–æ‰§è¡Œ', url: '/book4/401_Chapter1_From_Manual_to_Automated_Trading_CN' },
              { number: '2ï¸âƒ£', title: 'ç¬¬äºŒç« ï¼šå¹³å°æ­å»ºä¸å·¥å…·é“¾', url: '/book4/402_Chapter2_Platform_Setup_and_Toolchain_CN' },
              { number: '3ï¸âƒ£', title: 'ç¬¬ä¸‰ç« ï¼šé‡åŒ–ç ”ç©¶æ–¹æ³•è®º', url: '/book4/403_Chapter3_Quantitative_Research_Methodology_CN' },
              { number: '4ï¸âƒ£', title: 'ç¬¬å››ç« ï¼šQuantConnectç­–ç•¥å¼€å‘', url: '/book4/404_Chapter4_QuantConnect_Strategy_Development_CN' },
              { number: '5ï¸âƒ£', title: 'ç¬¬äº”ç« ï¼šå›æµ‹ä¸æ¨¡æ‹Ÿäº¤æ˜“', url: '/book4/405_Chapter5_Backtesting_and_Simulation_CN' },
              { number: '6ï¸âƒ£', title: 'ç¬¬å…­ç« ï¼šIBKR APIä¸è®¢å•æ‰§è¡Œ', url: '/book4/406_Chapter6_IBKR_API_and_Order_Execution_CN' },
              { number: '7ï¸âƒ£', title: 'ç¬¬ä¸ƒç« ï¼šå®ç›˜éƒ¨ç½²ä¸ç›‘æ§', url: '/book4/407_Chapter7_Live_Trading_Deployment_CN' },
              { number: '8ï¸âƒ£', title: 'ç¬¬å…«ç« ï¼šé£é™©ç®¡ç†æ¡†æ¶', url: '/book4/408_Chapter8_Risk_Management_Framework_CN' },
              { number: '9ï¸âƒ£', title: 'ç¬¬ä¹ç« ï¼šè¡ç”Ÿå“ä¸å¯¹å†²ç­–ç•¥', url: '/book4/409_Chapter9_Derivatives_and_Hedging_CN' },
              { number: 'ğŸ”Ÿ', title: 'ç¬¬åç« ï¼šç»©æ•ˆå½’å› ä¸è¯„ä¼°', url: '/book4/410_Chapter10_Performance_Attribution_CN' },
              { number: '1ï¸âƒ£1ï¸âƒ£', title: 'ç¬¬åä¸€ç« ï¼šç­–ç•¥ä¼˜åŒ–ä¸è¿­ä»£', url: '/book4/411_Chapter11_Strategy_Optimization_CN' },
              { number: '1ï¸âƒ£2ï¸âƒ£', title: 'ç¬¬åäºŒç« ï¼šåˆè§„ä¸èŒä¸šé“å¾·', url: '/book4/412_Chapter12_Compliance_and_Ethics_CN' }
            ]
          },
          'technical-chapter1': {
            title: 'ğŸ“Š ç¬¬ä¸€ç« ï¼šä»æ‰‹å·¥äº¤æ˜“åˆ°è‡ªåŠ¨åŒ–æ‰§è¡Œ',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/book4/401_Chapter1_From_Manual_to_Automated_Trading_CN' },
              { number: '1.1', title: 'è‡ªåŠ¨åŒ–äº¤æ˜“çš„å®šä¹‰ä¸æ¼”å˜', url: '/book4/401_Chapter1/1.1_Definition_and_Evolution_of_Automated_Trading_CN' },
              { number: '1.2', title: 'æ‰‹å·¥äº¤æ˜“çš„å±€é™æ€§åˆ†æ', url: '/book4/401_Chapter1/1.2_Limitations_of_Manual_Trading_CN' },
              { number: '1.3', title: 'è‡ªåŠ¨åŒ–äº¤æ˜“çš„æ ¸å¿ƒä¼˜åŠ¿', url: '/book4/401_Chapter1/1.3_Core_Advantages_of_Automated_Trading_CN' },
              { number: '1.4', title: 'æŠ€æœ¯æŒ‘æˆ˜ä¸é£é™©ç®¡ç†', url: '/book4/401_Chapter1/1.4_Technical_Challenges_and_Risk_Management_CN' },
              { number: '1.5', title: 'ç°ä»£é‡‘èå¸‚åœºä¸­çš„åº”ç”¨', url: '/book4/401_Chapter1/1.5_Applications_in_Modern_Financial_Markets_CN' },
              { number: '1.6', title: 'ä¸ªäººæŠ•èµ„è€…çš„è½¬å‹è·¯å¾„', url: '/book4/401_Chapter1/1.6_Transformation_Path_for_Individual_Investors_CN' }
            ]
          },
          quantitative: {
            title: 'âš¡ ç¾è‚¡æŠ•èµ„å®æ“æ‰‹å†ŒV',
            chapters: [
              { number: 'ğŸ“–', title: 'é‡åŒ–åˆ†æå¯¼èˆª', url: '/handbook/quantitative' },
              { number: 'ğŸš§', title: 'é‡åŒ–åˆ†æç« èŠ‚å¼€å‘ä¸­...', url: '/handbook/quantitative' }
            ]
          },
          'ashare-theory': {
            title: 'ğŸ‡¨ğŸ‡³ Aè‚¡å®æ“æ‰‹å†ŒI',
            chapters: [
              { number: 'ğŸ“–', title: 'åºè¨€', url: '/ashare-book1/000_Preface_CN' },
              { number: '1ï¸âƒ£', title: 'ç¬¬ä¸€ç« ï¼šAè‚¡å¸‚åœºç‰¹å¾ä¸æŠ•èµ„ç¯å¢ƒ', url: '/ashare-book1/001_Chapter1_A_Share_Market_CN' },
              { number: '2ï¸âƒ£', title: 'ç¬¬äºŒç« ï¼šæŠ•èµ„è®¤çŸ¥ä¸å¿ƒç†ç®¡ç†', url: '/ashare-book1/002_Chapter2_Psychology_CN' },
              { number: '3ï¸âƒ£', title: 'ç¬¬ä¸‰ç« ï¼šAè‚¡é«˜å€è‚¡å†å²ç ”ç©¶', url: '/ashare-book1/003_Chapter3_Multibagger_CN' },
              { number: '4ï¸âƒ£', title: 'ç¬¬å››ç« ï¼šèµ›é“é€‰æ‹©ä¸è¡Œä¸šç ”ç©¶', url: '/ashare-book1/004_Chapter4_Industry_CN' },
              { number: '5ï¸âƒ£', title: 'ç¬¬äº”ç« ï¼šåŸºæœ¬é¢åˆ†ææ¡†æ¶', url: '/ashare-book1/005_Chapter5_Fundamental_CN' },
              { number: '6ï¸âƒ£', title: 'ç¬¬å…­ç« ï¼šè‚¡ç¥¨ç­›é€‰ç­–ç•¥', url: '/ashare-book1/006_Chapter6_Screening_CN' },
              { number: '7ï¸âƒ£', title: 'ç¬¬ä¸ƒç« ï¼šäº¤æ˜“ç­–ç•¥ä¸æ‰§è¡Œ', url: '/ashare-book1/007_Chapter7_Trading_CN' },
              { number: '8ï¸âƒ£', title: 'ç¬¬å…«ç« ï¼šæŠ•èµ„å·¥å…·ä¸èµ„æº', url: '/ashare-book1/008_Chapter8_Tools_CN' },
              { number: '9ï¸âƒ£', title: 'ç¬¬ä¹ç« ï¼šæ¡ˆä¾‹å¤ç›˜ä¸ç­–ç•¥æ”¹è¿›', url: '/ashare-book1/009_Chapter9_Cases_CN' },
              { number: 'ğŸ”Ÿ', title: 'ç¬¬åç« ï¼šæ„å»ºä¸ªäººæŠ•èµ„ç³»ç»Ÿ', url: '/ashare-book1/010_Chapter10_System_CN' },
              { number: 'ğŸ“‹', title: 'é™„å½•', url: '/ashare-book1/011_Appendix_CN' }
            ]
          },
          'ashare-theory-chapter1': {
            title: 'ğŸ“– ç¬¬ä¸€ç« ï¼šAè‚¡å¸‚åœºç‰¹å¾',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/ashare-book1/001_Chapter1_A_Share_Market_CN' },
              { number: '1.1', title: 'Aè‚¡å¸‚åœºåŸºæœ¬æ¶æ„', url: '/ashare-book1/001_Chapter1/1.1_Market_Structure_CN' },
              { number: '1.2', title: 'Aè‚¡äº¤æ˜“åˆ¶åº¦è¯¦è§£', url: '/ashare-book1/001_Chapter1/1.2_Trading_Rules_CN' },
              { number: '1.3', title: 'å¸‚åœºå‚ä¸è€…ç»“æ„åˆ†æ', url: '/ashare-book1/001_Chapter1/1.3_Market_Participants_CN' },
              { number: '1.4', title: 'æ”¿ç­–ä¸ç›‘ç®¡ç¯å¢ƒ', url: '/ashare-book1/001_Chapter1/1.4_Policy_Environment_CN' },
              { number: '1.5', title: 'Aè‚¡å¸‚åœºå‘¨æœŸç‰¹å¾', url: '/ashare-book1/001_Chapter1/1.5_Market_Cycles_CN' },
              { number: '1.6', title: 'Aè‚¡æŠ•èµ„æœºä¼šä¸é£é™©', url: '/ashare-book1/001_Chapter1/1.6_Opportunities_Risks_CN' }
            ]
          },
          'ashare-theory-chapter2': {
            title: 'ğŸ§  ç¬¬äºŒç« ï¼šæŠ•èµ„è®¤çŸ¥ä¸å¿ƒç†',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/ashare-book1/002_Chapter2_Psychology_CN' },
              { number: '2.1', title: 'æŠ•èµ„å¿ƒç†å­¦åŸºç¡€', url: '/ashare-book1/002_Chapter2/2.1_Psychology_Basics_CN' },
              { number: '2.2', title: 'å¸¸è§è®¤çŸ¥åå·®è¯†åˆ«', url: '/ashare-book1/002_Chapter2/2.2_Cognitive_Biases_CN' },
              { number: '2.3', title: 'æƒ…ç»ªç®¡ç†ä¸çºªå¾‹', url: '/ashare-book1/002_Chapter2/2.3_Emotion_Management_CN' },
              { number: '2.4', title: 'ç†æ€§å†³ç­–æ¡†æ¶', url: '/ashare-book1/002_Chapter2/2.4_Decision_Framework_CN' },
              { number: '2.5', title: 'Aè‚¡æ•£æˆ·å¿ƒç†ç‰¹å¾', url: '/ashare-book1/002_Chapter2/2.5_Retail_Psychology_CN' },
              { number: '2.6', title: 'å¿ƒç†è®­ç»ƒä¸è‡ªæˆ‘æå‡', url: '/ashare-book1/002_Chapter2/2.6_Mental_Training_CN' }
            ]
          },
          'ashare-theory-chapter3': {
            title: 'ğŸ† ç¬¬ä¸‰ç« ï¼šAè‚¡é«˜å€è‚¡å†å²ç ”ç©¶',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/ashare-book1/003_Chapter3_Multibagger_CN' },
              { number: '3.1', title: 'é«˜å€è‚¡çš„å®šä¹‰ä¸ç­›é€‰æ ‡å‡†', url: '/ashare-book1/003_Chapter3/3.1_Definition_Criteria_CN' },
              { number: '3.2', title: 'Aè‚¡é«˜å€è‚¡è¡Œä¸šåˆ†å¸ƒ', url: '/ashare-book1/003_Chapter3/3.2_Industry_Distribution_CN' },
              { number: '3.3', title: 'ç»å…¸é«˜å€è‚¡æ¡ˆä¾‹æ·±åº¦å‰–æ', url: '/ashare-book1/003_Chapter3/3.3_Classic_Cases_CN' },
              { number: '3.4', title: 'é«˜å€è‚¡çš„å…±åŒç‰¹å¾', url: '/ashare-book1/003_Chapter3/3.4_Common_Features_CN' },
              { number: '3.5', title: 'é«˜å€è‚¡çš„æˆé•¿é˜¶æ®µ', url: '/ashare-book1/003_Chapter3/3.5_Growth_Stages_CN' },
              { number: '3.6', title: 'å¤±è´¥æ¡ˆä¾‹ä¸é£é™©è­¦ç¤º', url: '/ashare-book1/003_Chapter3/3.6_Failure_Cases_CN' }
            ]
          },
          'ashare-theory-chapter4': {
            title: 'ğŸ­ ç¬¬å››ç« ï¼šèµ›é“é€‰æ‹©ä¸è¡Œä¸šç ”ç©¶',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/ashare-book1/004_Chapter4_Industry_CN' },
              { number: '4.1', title: 'è¡Œä¸šåˆ†ææ¡†æ¶', url: '/ashare-book1/004_Chapter4/4.1_Industry_Framework_CN' },
              { number: '4.2', title: 'Aè‚¡è¡Œä¸šåˆ†ç±»ä½“ç³»', url: '/ashare-book1/004_Chapter4/4.2_Industry_Classification_CN' },
              { number: '4.3', title: 'æ¶ˆè´¹èµ›é“æ·±åº¦åˆ†æ', url: '/ashare-book1/004_Chapter4/4.3_Consumer_Sector_CN' },
              { number: '4.4', title: 'ç§‘æŠ€èµ›é“æ·±åº¦åˆ†æ', url: '/ashare-book1/004_Chapter4/4.4_Tech_Sector_CN' },
              { number: '4.5', title: 'åŒ»è¯èµ›é“æ·±åº¦åˆ†æ', url: '/ashare-book1/004_Chapter4/4.5_Pharma_Sector_CN' },
              { number: '4.6', title: 'å‘¨æœŸè¡Œä¸šæŠ•èµ„ç­–ç•¥', url: '/ashare-book1/004_Chapter4/4.6_Cyclical_Sector_CN' }
            ]
          },
          'ashare-theory-chapter5': {
            title: 'ğŸ“Š ç¬¬äº”ç« ï¼šåŸºæœ¬é¢åˆ†ææ¡†æ¶',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/ashare-book1/005_Chapter5_Fundamental_CN' },
              { number: '5.1', title: 'è´¢åŠ¡æŠ¥è¡¨åˆ†æåŸºç¡€', url: '/ashare-book1/005_Chapter5/5.1_Financial_Statements_CN' },
              { number: '5.2', title: 'ç›ˆåˆ©èƒ½åŠ›åˆ†æ', url: '/ashare-book1/005_Chapter5/5.2_Profitability_Analysis_CN' },
              { number: '5.3', title: 'æˆé•¿æ€§åˆ†æ', url: '/ashare-book1/005_Chapter5/5.3_Growth_Analysis_CN' },
              { number: '5.4', title: 'è´¢åŠ¡é£é™©è¯†åˆ«', url: '/ashare-book1/005_Chapter5/5.4_Risk_Detection_CN' },
              { number: '5.5', title: 'ä¼°å€¼æ–¹æ³•è®º', url: '/ashare-book1/005_Chapter5/5.5_Valuation_Methods_CN' },
              { number: '5.6', title: 'ä¼ä¸šè´¨é‡ç»¼åˆè¯„ä¼°', url: '/ashare-book1/005_Chapter5/5.6_Quality_Assessment_CN' }
            ]
          },
          'ashare-theory-chapter6': {
            title: 'ğŸ” ç¬¬å…­ç« ï¼šè‚¡ç¥¨ç­›é€‰ç­–ç•¥',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/ashare-book1/006_Chapter6_Screening_CN' },
              { number: '6.1', title: 'ç­›é€‰ç­–ç•¥æ€»ä½“æ¡†æ¶', url: '/ashare-book1/006_Chapter6/6.1_Screening_Framework_CN' },
              { number: '6.2', title: 'é‡åŒ–ç­›é€‰æŒ‡æ ‡', url: '/ashare-book1/006_Chapter6/6.2_Quantitative_Screening_CN' },
              { number: '6.3', title: 'å®šæ€§ç­›é€‰è¦ç´ ', url: '/ashare-book1/006_Chapter6/6.3_Qualitative_Screening_CN' },
              { number: '6.4', title: 'ä¸åŒé£æ ¼çš„é€‰è‚¡ç­–ç•¥', url: '/ashare-book1/006_Chapter6/6.4_Investment_Styles_CN' },
              { number: '6.5', title: 'ç­›é€‰å·¥å…·ä¸æ•°æ®æº', url: '/ashare-book1/006_Chapter6/6.5_Screening_Tools_CN' },
              { number: '6.6', title: 'ç­›é€‰å®æˆ˜æ¡ˆä¾‹', url: '/ashare-book1/006_Chapter6/6.6_Screening_Cases_CN' }
            ]
          },
          'ashare-theory-chapter7': {
            title: 'ğŸ“ˆ ç¬¬ä¸ƒç« ï¼šäº¤æ˜“ç­–ç•¥ä¸æ‰§è¡Œ',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/ashare-book1/007_Chapter7_Trading_CN' },
              { number: '7.1', title: 'ä¹°å…¥æ—¶æœºé€‰æ‹©', url: '/ashare-book1/007_Chapter7/7.1_Entry_Timing_CN' },
              { number: '7.2', title: 'ä»“ä½ç®¡ç†ç­–ç•¥', url: '/ashare-book1/007_Chapter7/7.2_Position_Management_CN' },
              { number: '7.3', title: 'æ­¢ç›ˆæ­¢æŸç­–ç•¥', url: '/ashare-book1/007_Chapter7/7.3_Stop_Loss_Take_Profit_CN' },
              { number: '7.4', title: 'å–å‡ºæ—¶æœºåˆ¤æ–­', url: '/ashare-book1/007_Chapter7/7.4_Exit_Timing_CN' },
              { number: '7.5', title: 'äº¤æ˜“çºªå¾‹ä¸æ‰§è¡Œ', url: '/ashare-book1/007_Chapter7/7.5_Trading_Discipline_CN' },
              { number: '7.6', title: 'Aè‚¡äº¤æ˜“å®æˆ˜æŠ€å·§', url: '/ashare-book1/007_Chapter7/7.6_AShare_Trading_Tips_CN' }
            ]
          },
          'ashare-theory-chapter8': {
            title: 'ğŸ”§ ç¬¬å…«ç« ï¼šæŠ•èµ„å·¥å…·ä¸èµ„æº',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/ashare-book1/008_Chapter8_Tools_CN' },
              { number: '8.1', title: 'æ•°æ®æºä¸è¡Œæƒ…è½¯ä»¶', url: '/ashare-book1/008_Chapter8/8.1_Data_Sources_CN' },
              { number: '8.2', title: 'åˆ†æå·¥å…·ä¸å¹³å°', url: '/ashare-book1/008_Chapter8/8.2_Analysis_Tools_CN' },
              { number: '8.3', title: 'ç ”ç©¶èµ„æºè·å–', url: '/ashare-book1/008_Chapter8/8.3_Research_Resources_CN' },
              { number: '8.4', title: 'äº¤æ˜“å¹³å°é€‰æ‹©', url: '/ashare-book1/008_Chapter8/8.4_Trading_Platforms_CN' },
              { number: '8.5', title: 'å­¦ä¹ èµ„æºæ¨è', url: '/ashare-book1/008_Chapter8/8.5_Learning_Resources_CN' },
              { number: '8.6', title: 'æŠ•èµ„ç¤¾åŒºä¸äººè„‰', url: '/ashare-book1/008_Chapter8/8.6_Community_Networks_CN' }
            ]
          },
          'ashare-theory-chapter9': {
            title: 'ğŸ“‹ ç¬¬ä¹ç« ï¼šæ¡ˆä¾‹å¤ç›˜ä¸ç­–ç•¥æ”¹è¿›',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/ashare-book1/009_Chapter9_Cases_CN' },
              { number: '9.1', title: 'æ¡ˆä¾‹å¤ç›˜æ¡†æ¶', url: '/ashare-book1/009_Chapter9/9.1_Case_Study_Framework_CN' },
              { number: '9.2', title: 'æˆåŠŸæ¡ˆä¾‹æ·±åº¦å‰–æ', url: '/ashare-book1/009_Chapter9/9.2_Success_Cases_CN' },
              { number: '9.3', title: 'å¤±è´¥æ¡ˆä¾‹è­¦ç¤ºå½•', url: '/ashare-book1/009_Chapter9/9.3_Failure_Cases_CN' },
              { number: '9.4', title: 'ç­–ç•¥å¤ç›˜ä¸ä¼˜åŒ–', url: '/ashare-book1/009_Chapter9/9.4_Strategy_Review_CN' },
              { number: '9.5', title: 'æŒç»­æ”¹è¿›æ–¹æ³•è®º', url: '/ashare-book1/009_Chapter9/9.5_Continuous_Improvement_CN' },
              { number: '9.6', title: 'å‘æŠ•èµ„å¤§å¸ˆå­¦ä¹ ', url: '/ashare-book1/009_Chapter9/9.6_Learning_From_Masters_CN' }
            ]
          },
          'ashare-theory-chapter10': {
            title: 'ğŸ¯ ç¬¬åç« ï¼šæ„å»ºä¸ªäººæŠ•èµ„ç³»ç»Ÿ',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬ä¸€å†Œç›®å½•', url: '/ashare-book1/010_Chapter10_System_CN' },
              { number: '10.1', title: 'æŠ•èµ„ç†å¿µä¸åŸåˆ™', url: '/ashare-book1/010_Chapter10/10.1_Investment_Philosophy_CN' },
              { number: '10.2', title: 'ç­–ç•¥æ¡†æ¶è®¾è®¡', url: '/ashare-book1/010_Chapter10/10.2_Strategy_Framework_CN' },
              { number: '10.3', title: 'é£é™©ç®¡ç†ä½“ç³»', url: '/ashare-book1/010_Chapter10/10.3_Risk_Management_System_CN' },
              { number: '10.4', title: 'æ‰§è¡Œæ£€æŸ¥æ¸…å•', url: '/ashare-book1/010_Chapter10/10.4_Execution_Checklist_CN' },
              { number: '10.5', title: 'ä¸šç»©è·Ÿè¸ªä¸è¯„ä¼°', url: '/ashare-book1/010_Chapter10/10.5_Performance_Tracking_CN' },
              { number: '10.6', title: 'ç»ˆèº«å­¦ä¹ ä¸æˆé•¿', url: '/ashare-book1/010_Chapter10/10.6_Lifelong_Learning_CN' }
            ]
          },
          'ashare-macro': {
            title: 'ğŸŒ Aè‚¡å®æ“æ‰‹å†ŒII',
            chapters: [
              { number: 'ğŸ“–', title: 'åºè¨€', url: '/ashare-book2/000_Preface_CN' },
              { number: '1ï¸âƒ£', title: 'ç¬¬ä¸€ç« ï¼šç»æµå‘¨æœŸä¸Aè‚¡å¸‚åœº', url: '/ashare-book2/001_Chapter1_Economic_Cycle_CN' },
              { number: '2ï¸âƒ£', title: 'ç¬¬äºŒç« ï¼šè´§å¸æ”¿ç­–ä¸å¸‚åœºå½±å“', url: '/ashare-book2/002_Chapter2_Monetary_Policy_CN' },
              { number: '3ï¸âƒ£', title: 'ç¬¬ä¸‰ç« ï¼šè´¢æ”¿æ”¿ç­–ä¸äº§ä¸šæœºé‡', url: '/ashare-book2/003_Chapter3_Fiscal_Policy_CN' },
              { number: '4ï¸âƒ£', title: 'ç¬¬å››ç« ï¼šè¡Œä¸šè½®åŠ¨ä¸æ¿å—é…ç½®', url: '/ashare-book2/004_Chapter4_Sector_Rotation_CN' },
              { number: '5ï¸âƒ£', title: 'ç¬¬äº”ç« ï¼šå¸‚åœºæƒ…ç»ªä¸èµ„é‡‘æµå‘', url: '/ashare-book2/005_Chapter5_Market_Sentiment_CN' },
              { number: '6ï¸âƒ£', title: 'ç¬¬å…­ç« ï¼šå®è§‚æ•°æ®è§£è¯»ä¸åº”ç”¨', url: '/ashare-book2/006_Chapter6_Macro_Data_CN' },
              { number: '7ï¸âƒ£', title: 'ç¬¬ä¸ƒç« ï¼šå›½é™…ç¯å¢ƒä¸Aè‚¡è”åŠ¨', url: '/ashare-book2/007_Chapter7_Global_Impact_CN' },
              { number: '8ï¸âƒ£', title: 'ç¬¬å…«ç« ï¼šé£é™©ç›‘æ§ä¸é¢„è­¦ç³»ç»Ÿ', url: '/ashare-book2/008_Chapter8_Risk_Monitor_CN' },
              { number: '9ï¸âƒ£', title: 'ç¬¬ä¹ç« ï¼šå®è§‚æ‹©æ—¶ç­–ç•¥', url: '/ashare-book2/009_Chapter9_Macro_Timing_CN' },
              { number: 'ğŸ”Ÿ', title: 'ç¬¬åç« ï¼šå®è§‚åˆ†æå·¥å…·ç®±', url: '/ashare-book2/010_Chapter10_Macro_Tools_CN' },
              { number: 'ğŸ“‹', title: 'é™„å½•', url: '/ashare-book2/011_Appendix_CN' }
            ]
          },
          'ashare-stocks': {
            title: 'ğŸ” Aè‚¡å®æ“æ‰‹å†ŒIII',
            chapters: [
              { number: 'ğŸ“–', title: 'åºè¨€', url: '/ashare-book3/000_Preface_CN' },
              { number: '1ï¸âƒ£', title: 'ç¬¬ä¸€ç« ï¼šä¸ªè‚¡ç ”ç©¶æ¡†æ¶', url: '/ashare-book3/001_Chapter1_Research_Framework_CN' },
              { number: '2ï¸âƒ£', title: 'ç¬¬äºŒç« ï¼šè´¢åŠ¡åˆ†ææ–¹æ³•', url: '/ashare-book3/002_Chapter2_Financial_Analysis_CN' },
              { number: '3ï¸âƒ£', title: 'ç¬¬ä¸‰ç« ï¼šä¼°å€¼æ–¹æ³•è®º', url: '/ashare-book3/003_Chapter3_Valuation_CN' },
              { number: '4ï¸âƒ£', title: 'ç¬¬å››ç« ï¼šè¡Œä¸šé¾™å¤´ç ”ç©¶', url: '/ashare-book3/004_Chapter4_Industry_Leaders_CN' },
              { number: '5ï¸âƒ£', title: 'ç¬¬äº”ç« ï¼šæ¶ˆè´¹è¡Œä¸šæ¡ˆä¾‹', url: '/ashare-book3/005_Chapter5_Consumer_Cases_CN' },
              { number: '6ï¸âƒ£', title: 'ç¬¬å…­ç« ï¼šç§‘æŠ€è¡Œä¸šæ¡ˆä¾‹', url: '/ashare-book3/006_Chapter6_Tech_Cases_CN' },
              { number: '7ï¸âƒ£', title: 'ç¬¬ä¸ƒç« ï¼šå‘¨æœŸè¡Œä¸šæ¡ˆä¾‹', url: '/ashare-book3/007_Chapter7_Cyclical_Cases_CN' },
              { number: '8ï¸âƒ£', title: 'ç¬¬å…«ç« ï¼šé‡‘èè¡Œä¸šæ¡ˆä¾‹', url: '/ashare-book3/008_Chapter8_Finance_Cases_CN' },
              { number: '9ï¸âƒ£', title: 'ç¬¬ä¹ç« ï¼šåŒ»è¯è¡Œä¸šæ¡ˆä¾‹', url: '/ashare-book3/009_Chapter9_Pharma_Cases_CN' },
              { number: 'ğŸ”Ÿ', title: 'ç¬¬åç« ï¼šç ”ç©¶æŠ¥å‘Šæ’°å†™', url: '/ashare-book3/010_Chapter10_Report_Writing_CN' },
              { number: 'ğŸ“‹', title: 'é™„å½•', url: '/ashare-book3/011_Appendix_CN' }
            ]
          },
          'ashare-quantitative': {
            title: 'ğŸ“Š Aè‚¡å®æ“æ‰‹å†ŒIV',
            chapters: [
              { number: 'ğŸ“–', title: 'åºè¨€', url: '/ashare-book4/000_Preface_CN' },
              { number: '1ï¸âƒ£', title: 'ç¬¬ä¸€ç« ï¼šé‡åŒ–æŠ•èµ„æ¦‚è¿°', url: '/ashare-book4/001_Chapter1_Quant_Overview_CN' },
              { number: '2ï¸âƒ£', title: 'ç¬¬äºŒç« ï¼šä»·å€¼å› å­æ„å»º', url: '/ashare-book4/002_Chapter2_Value_Factors_CN' },
              { number: '3ï¸âƒ£', title: 'ç¬¬ä¸‰ç« ï¼šæˆé•¿å› å­æ„å»º', url: '/ashare-book4/003_Chapter3_Growth_Factors_CN' },
              { number: '4ï¸âƒ£', title: 'ç¬¬å››ç« ï¼šè´¨é‡å› å­æ„å»º', url: '/ashare-book4/004_Chapter4_Quality_Factors_CN' },
              { number: '5ï¸âƒ£', title: 'ç¬¬äº”ç« ï¼šåŠ¨é‡å› å­æ„å»º', url: '/ashare-book4/005_Chapter5_Momentum_Factors_CN' },
              { number: '6ï¸âƒ£', title: 'ç¬¬å…­ç« ï¼šèµ„é‡‘æµå› å­æ„å»º', url: '/ashare-book4/006_Chapter6_Flow_Factors_CN' },
              { number: '7ï¸âƒ£', title: 'ç¬¬ä¸ƒç« ï¼šå¤šå› å­æ¨¡å‹æ„å»º', url: '/ashare-book4/007_Chapter7_Multi_Factor_Model_CN' },
              { number: '8ï¸âƒ£', title: 'ç¬¬å…«ç« ï¼šPTradeç­–ç•¥å¼€å‘', url: '/ashare-book4/008_Chapter8_PTrade_Strategy_CN' },
              { number: '9ï¸âƒ£', title: 'ç¬¬ä¹ç« ï¼šQMTç­–ç•¥å¼€å‘', url: '/ashare-book4/009_Chapter9_QMT_Strategy_CN' },
              { number: 'ğŸ”Ÿ', title: 'ç¬¬åç« ï¼šç­–ç•¥è¯„ä¼°ä¸ä¼˜åŒ–', url: '/ashare-book4/010_Chapter10_Strategy_Evaluation_CN' },
              { number: 'â­', title: 'ç¬¬åä¸€ç« ï¼šé«˜å€è‚¡å› å­ç‰¹å¾', url: '/ashare-book4/011_Chapter11_Multibagger_Factors_CN' },
              { number: 'ğŸ“°', title: 'ç¬¬åäºŒç« ï¼šäº‹ä»¶é©±åŠ¨ä¸å¦ç±»æ•°æ®', url: '/ashare-book4/012_Chapter12_Event_Alternative_Data_CN' },
              { number: 'ğŸ–¥ï¸', title: 'ç¬¬åä¸‰ç« ï¼šéŸ¬ç¿é‡åŒ–ç³»ç»Ÿé›†æˆ', url: '/ashare-book4/013_Chapter13_Taorui_Integration_CN' },
              { number: 'ğŸ“‹', title: 'é™„å½•', url: '/ashare-book4/014_Appendix_CN' }
            ]
          },
          'ashare-quantitative-chapter1': {
            title: 'ğŸ“Š ç¬¬ä¸€ç« ï¼šé‡åŒ–æŠ•èµ„æ¦‚è¿°',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/001_Chapter1_Quant_Overview_CN' },
              { number: '1.1', title: 'é‡åŒ–æŠ•èµ„å®šä¹‰', url: '/ashare-book4/001_Chapter1/1.1_Quant_Definition_CN' },
              { number: '1.2', title: 'é‡åŒ–æŠ•èµ„å‘å±•å²', url: '/ashare-book4/001_Chapter1/1.2_Quant_History_CN' },
              { number: '1.3', title: 'ä¸»è¦ç­–ç•¥ç±»å‹', url: '/ashare-book4/001_Chapter1/1.3_Quant_Strategies_CN' },
              { number: '1.4', title: 'é‡åŒ–æŠ•èµ„ä¼˜åŠ¿', url: '/ashare-book4/001_Chapter1/1.4_Quant_Advantages_CN' },
              { number: '1.5', title: 'é‡åŒ–æŠ•èµ„æŒ‘æˆ˜', url: '/ashare-book4/001_Chapter1/1.5_Quant_Challenges_CN' },
              { number: '1.6', title: 'Aè‚¡é‡åŒ–ç°çŠ¶', url: '/ashare-book4/001_Chapter1/1.6_Quant_AShare_CN' }
            ]
          },
          'ashare-quantitative-chapter2': {
            title: 'ğŸ’° ç¬¬äºŒç« ï¼šä»·å€¼å› å­',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/002_Chapter2_Value_Factors_CN' },
              { number: '2.1', title: 'ä»·å€¼å› å­æ¦‚è¿°', url: '/ashare-book4/002_Chapter2/2.1_Value_Overview_CN' },
              { number: '2.2', title: 'å¸‚ç›ˆç‡å› å­ï¼ˆPEï¼‰', url: '/ashare-book4/002_Chapter2/2.2_PE_Factor_CN' },
              { number: '2.3', title: 'å¸‚å‡€ç‡å› å­ï¼ˆPBï¼‰', url: '/ashare-book4/002_Chapter2/2.3_PB_Factor_CN' },
              { number: '2.4', title: 'å¸‚é”€ç‡å› å­ï¼ˆPSï¼‰', url: '/ashare-book4/002_Chapter2/2.4_PS_Factor_CN' },
              { number: '2.5', title: 'è‚¡æ¯ç‡å› å­', url: '/ashare-book4/002_Chapter2/2.5_Dividend_Factor_CN' },
              { number: '2.6', title: 'ä»·å€¼å› å­ç»„åˆ', url: '/ashare-book4/002_Chapter2/2.6_Value_Composite_CN' }
            ]
          },
          'ashare-quantitative-chapter3': {
            title: 'ğŸ“ˆ ç¬¬ä¸‰ç« ï¼šæˆé•¿å› å­',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/003_Chapter3_Growth_Factors_CN' },
              { number: '3.1', title: 'æˆé•¿å› å­æ¦‚è¿°', url: '/ashare-book4/003_Chapter3/3.1_Growth_Overview_CN' },
              { number: '3.2', title: 'è¥æ”¶å¢é•¿å› å­', url: '/ashare-book4/003_Chapter3/3.2_Revenue_Growth_CN' },
              { number: '3.3', title: 'åˆ©æ¶¦å¢é•¿å› å­', url: '/ashare-book4/003_Chapter3/3.3_Profit_Growth_CN' },
              { number: '3.4', title: 'ROEå˜åŒ–å› å­', url: '/ashare-book4/003_Chapter3/3.4_ROE_Change_CN' },
              { number: '3.5', title: 'åˆ†æå¸ˆé¢„æœŸå› å­', url: '/ashare-book4/003_Chapter3/3.5_Analyst_Revision_CN' },
              { number: '3.6', title: 'æˆé•¿å› å­ç»„åˆ', url: '/ashare-book4/003_Chapter3/3.6_Growth_Composite_CN' }
            ]
          },
          'ashare-quantitative-chapter4': {
            title: 'â­ ç¬¬å››ç« ï¼šè´¨é‡å› å­',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/004_Chapter4_Quality_Factors_CN' },
              { number: '4.1', title: 'è´¨é‡å› å­æ¦‚è¿°', url: '/ashare-book4/004_Chapter4/4.1_Quality_Overview_CN' },
              { number: '4.2', title: 'æ¯›åˆ©ç‡å› å­', url: '/ashare-book4/004_Chapter4/4.2_Margin_Factor_CN' },
              { number: '4.3', title: 'èµ„äº§å‘¨è½¬ç‡å› å­', url: '/ashare-book4/004_Chapter4/4.3_Turnover_Factor_CN' },
              { number: '4.4', title: 'è´¢åŠ¡æ æ†å› å­', url: '/ashare-book4/004_Chapter4/4.4_Leverage_Factor_CN' },
              { number: '4.5', title: 'ç°é‡‘æµå› å­', url: '/ashare-book4/004_Chapter4/4.5_Cashflow_Factor_CN' },
              { number: '4.6', title: 'è´¨é‡å› å­ç»„åˆ', url: '/ashare-book4/004_Chapter4/4.6_Quality_Composite_CN' }
            ]
          },
          'ashare-quantitative-chapter5': {
            title: 'ğŸš€ ç¬¬äº”ç« ï¼šåŠ¨é‡å› å­',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/005_Chapter5_Momentum_Factors_CN' },
              { number: '5.1', title: 'åŠ¨é‡å› å­æ¦‚è¿°', url: '/ashare-book4/005_Chapter5/5.1_Momentum_Overview_CN' },
              { number: '5.2', title: 'ä»·æ ¼åŠ¨é‡å› å­', url: '/ashare-book4/005_Chapter5/5.2_Price_Momentum_CN' },
              { number: '5.3', title: 'è¡Œä¸šåŠ¨é‡å› å­', url: '/ashare-book4/005_Chapter5/5.3_Industry_Momentum_CN' },
              { number: '5.4', title: 'åè½¬å› å­', url: '/ashare-book4/005_Chapter5/5.4_Reversal_Factor_CN' },
              { number: '5.5', title: 'åŠ¨é‡å› å­ç»¼åˆ', url: '/ashare-book4/005_Chapter5/5.5_Momentum_Composite_CN' }
            ]
          },
          'ashare-quantitative-chapter6': {
            title: 'ğŸ’µ ç¬¬å…­ç« ï¼šèµ„é‡‘æµå› å­',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/006_Chapter6_Flow_Factors_CN' },
              { number: '6.1', title: 'èµ„é‡‘æµå› å­æ¦‚è¿°', url: '/ashare-book4/006_Chapter6/6.1_Flow_Overview_CN' },
              { number: '6.2', title: 'åŒ—å‘èµ„é‡‘å› å­', url: '/ashare-book4/006_Chapter6/6.2_Northbound_Factor_CN' },
              { number: '6.3', title: 'ä¸»åŠ›èµ„é‡‘å› å­', url: '/ashare-book4/006_Chapter6/6.3_Mainforce_Factor_CN' },
              { number: '6.4', title: 'èèµ„èåˆ¸å› å­', url: '/ashare-book4/006_Chapter6/6.4_Margin_Factor_CN' },
              { number: '6.5', title: 'æœºæ„æŒä»“å› å­', url: '/ashare-book4/006_Chapter6/6.5_Institution_Factor_CN' },
              { number: '6.6', title: 'èµ„é‡‘æµå› å­ç»„åˆ', url: '/ashare-book4/006_Chapter6/6.6_Flow_Composite_CN' }
            ]
          },
          'ashare-quantitative-chapter7': {
            title: 'ğŸ”— ç¬¬ä¸ƒç« ï¼šå¤šå› å­æ¨¡å‹',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/007_Chapter7_Multi_Factor_Model_CN' },
              { number: '7.1', title: 'æ¨¡å‹æ¦‚è¿°', url: '/ashare-book4/007_Chapter7/7.1_Model_Overview_CN' },
              { number: '7.2', title: 'å› å­é¢„å¤„ç†', url: '/ashare-book4/007_Chapter7/7.2_Factor_Preprocessing_CN' },
              { number: '7.3', title: 'å› å­åˆæˆ', url: '/ashare-book4/007_Chapter7/7.3_Factor_Combination_CN' },
              { number: '7.4', title: 'ç»„åˆæ„å»º', url: '/ashare-book4/007_Chapter7/7.4_Portfolio_Construction_CN' },
              { number: '7.5', title: 'é£é™©æ§åˆ¶', url: '/ashare-book4/007_Chapter7/7.5_Risk_Control_CN' },
              { number: '7.6', title: 'æ¨¡å‹å›æµ‹', url: '/ashare-book4/007_Chapter7/7.6_Model_Backtest_CN' }
            ]
          },
          'ashare-quantitative-chapter8': {
            title: 'ğŸ–¥ï¸ ç¬¬å…«ç« ï¼šPTradeç­–ç•¥å¼€å‘',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/008_Chapter8_PTrade_Strategy_CN' },
              { number: '8.1', title: 'PTradeå¹³å°æ¦‚è¿°', url: '/ashare-book4/008_Chapter8/8.1_PTrade_Overview_CN' },
              { number: '8.2', title: 'ç­–ç•¥æ¡†æ¶', url: '/ashare-book4/008_Chapter8/8.2_Strategy_Framework_CN' },
              { number: '8.3', title: 'æ•°æ®è·å–', url: '/ashare-book4/008_Chapter8/8.3_Data_Access_CN' },
              { number: '8.4', title: 'äº¤æ˜“æ‰§è¡Œ', url: '/ashare-book4/008_Chapter8/8.4_Trade_Execution_CN' },
              { number: '8.5', title: 'å¤šå› å­ç­–ç•¥å®ç°', url: '/ashare-book4/008_Chapter8/8.5_Multi_Factor_Strategy_CN' },
              { number: '8.6', title: 'å®ç›˜éƒ¨ç½²', url: '/ashare-book4/008_Chapter8/8.6_Live_Deployment_CN' }
            ]
          },
          'ashare-quantitative-chapter9': {
            title: 'ğŸ“± ç¬¬ä¹ç« ï¼šQMTç­–ç•¥å¼€å‘',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/009_Chapter9_QMT_Strategy_CN' },
              { number: '9.1', title: 'QMTå¹³å°æ¦‚è¿°', url: '/ashare-book4/009_Chapter9/9.1_QMT_Overview_CN' },
              { number: '9.2', title: 'miniQMTæ¨¡å¼', url: '/ashare-book4/009_Chapter9/9.2_MiniQMT_CN' },
              { number: '9.3', title: 'xtquantåº“', url: '/ashare-book4/009_Chapter9/9.3_Xtquant_CN' },
              { number: '9.4', title: 'ç­–ç•¥å¼€å‘', url: '/ashare-book4/009_Chapter9/9.4_Strategy_Dev_CN' },
              { number: '9.5', title: 'å¤šå› å­ç­–ç•¥å®ç°', url: '/ashare-book4/009_Chapter9/9.5_Multi_Factor_Strategy_CN' },
              { number: '9.6', title: 'å®ç›˜éƒ¨ç½²', url: '/ashare-book4/009_Chapter9/9.6_Live_Deployment_CN' }
            ]
          },
          'ashare-quantitative-chapter10': {
            title: 'ğŸ“Š ç¬¬åç« ï¼šç­–ç•¥è¯„ä¼°ä¸ä¼˜åŒ–',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/010_Chapter10_Strategy_Evaluation_CN' },
              { number: '10.1', title: 'è¯„ä¼°æŒ‡æ ‡', url: '/ashare-book4/010_Chapter10/10.1_Evaluation_Metrics_CN' },
              { number: '10.2', title: 'å›æµ‹æ–¹æ³•', url: '/ashare-book4/010_Chapter10/10.2_Backtest_Methods_CN' },
              { number: '10.3', title: 'é£é™©åˆ†æ', url: '/ashare-book4/010_Chapter10/10.3_Risk_Analysis_CN' },
              { number: '10.4', title: 'å‚æ•°ä¼˜åŒ–', url: '/ashare-book4/010_Chapter10/10.4_Parameter_Optimization_CN' },
              { number: '10.5', title: 'ç­–ç•¥è¿­ä»£', url: '/ashare-book4/010_Chapter10/10.5_Strategy_Iteration_CN' },
              { number: '10.6', title: 'å®æˆ˜æ¡ˆä¾‹', url: '/ashare-book4/010_Chapter10/10.6_Case_Study_CN' }
            ]
          },
          'ashare-quantitative-chapter11': {
            title: 'â­ ç¬¬åä¸€ç« ï¼šé«˜å€è‚¡å› å­ç‰¹å¾',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/011_Chapter11_Multibagger_Factors_CN' },
              { number: '11.1', title: 'é«˜å€è‚¡å®šä¹‰ä¸ç»Ÿè®¡', url: '/ashare-book4/011_Chapter11/11.1_Multibagger_Definition_CN' },
              { number: '11.2', title: 'æˆé•¿å› å­ç‰¹å¾', url: '/ashare-book4/011_Chapter11/11.2_Growth_Features_CN' },
              { number: '11.3', title: 'ä¼°å€¼å› å­ç‰¹å¾', url: '/ashare-book4/011_Chapter11/11.3_Valuation_Features_CN' },
              { number: '11.4', title: 'è´¨é‡å› å­ç‰¹å¾', url: '/ashare-book4/011_Chapter11/11.4_Quality_Features_CN' },
              { number: '11.5', title: 'æŠ€æœ¯ä¸èµ„é‡‘ç‰¹å¾', url: '/ashare-book4/011_Chapter11/11.5_Technical_Flow_Features_CN' },
              { number: '11.6', title: 'é«˜å€è‚¡å¤šå› å­æ¨¡å‹', url: '/ashare-book4/011_Chapter11/11.6_Multibagger_Model_CN' }
            ]
          },
          'ashare-quantitative-chapter12': {
            title: 'ğŸ“° ç¬¬åäºŒç« ï¼šäº‹ä»¶é©±åŠ¨ä¸å¦ç±»æ•°æ®',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/012_Chapter12_Event_Alternative_Data_CN' },
              { number: '12.1', title: 'äº‹ä»¶é©±åŠ¨ç­–ç•¥æ¦‚è¿°', url: '/ashare-book4/012_Chapter12/12.1_Event_Driven_Overview_CN' },
              { number: '12.2', title: 'è´¢æŠ¥äº‹ä»¶ç­–ç•¥', url: '/ashare-book4/012_Chapter12/12.2_Earnings_Event_CN' },
              { number: '12.3', title: 'æ–°é—»èˆ†æƒ…æ•°æ®', url: '/ashare-book4/012_Chapter12/12.3_News_Sentiment_CN' },
              { number: '12.4', title: 'åˆ†æå¸ˆé¢„æœŸæ•°æ®', url: '/ashare-book4/012_Chapter12/12.4_Analyst_Expectations_CN' },
              { number: '12.5', title: 'å¦ç±»æ•°æ®æº', url: '/ashare-book4/012_Chapter12/12.5_Alternative_Data_CN' },
              { number: '12.6', title: 'éŸ¬ç¿å¹³å°æ•°æ®æ¥å…¥', url: '/ashare-book4/012_Chapter12/12.6_Taorui_Integration_CN' }
            ]
          },
          'ashare-quantitative-chapter13': {
            title: 'ğŸ–¥ï¸ ç¬¬åä¸‰ç« ï¼šéŸ¬ç¿é‡åŒ–ç³»ç»Ÿé›†æˆ',
            chapters: [
              { number: 'â†©ï¸', title: 'è¿”å›ç¬¬å››å†Œç›®å½•', url: '/ashare-book4/013_Chapter13_Taorui_Integration_CN' },
              { number: '13.1', title: 'ç³»ç»Ÿæ¶æ„æ¦‚è¿°', url: '/ashare-book4/013_Chapter13/13.1_System_Architecture_CN' },
              { number: '13.2', title: 'æ•°æ®ç®¡ç†æ¨¡å—', url: '/ashare-book4/013_Chapter13/13.2_Data_Management_CN' },
              { number: '13.3', title: 'å› å­ç ”ç©¶æ¨¡å—', url: '/ashare-book4/013_Chapter13/13.3_Factor_Research_CN' },
              { number: '13.4', title: 'ç­–ç•¥å¼€å‘æ¨¡å—', url: '/ashare-book4/013_Chapter13/13.4_Strategy_Development_CN' },
              { number: '13.5', title: 'å›æµ‹ä¸å®ç›˜æ¨¡å—', url: '/ashare-book4/013_Chapter13/13.5_Backtest_Live_CN' },
              { number: '13.6', title: 'Cursor AIé›†æˆ', url: '/ashare-book4/013_Chapter13/13.6_Cursor_Integration_CN' }
            ]
          },
          'ashare-trading': {
            title: 'âš¡ Aè‚¡å®æ“æ‰‹å†ŒV',
            chapters: [
              { number: 'ğŸ“–', title: 'åºè¨€', url: '/ashare-book5/000_Preface_CN' },
              { number: '1ï¸âƒ£', title: 'ç¬¬ä¸€ç« ï¼šç­–ç•¥å›æµ‹åŸºç¡€', url: '/ashare-book5/001_Chapter1_Backtest_Basics_CN' },
              { number: '2ï¸âƒ£', title: 'ç¬¬äºŒç« ï¼šJQDataæ•°æ®æ¥å…¥', url: '/ashare-book5/002_Chapter2_JQData_Integration_CN' },
              { number: '3ï¸âƒ£', title: 'ç¬¬ä¸‰ç« ï¼šéŸ¬ç¿å›æµ‹å¼•æ“', url: '/ashare-book5/003_Chapter3_Taorui_Backtest_CN' },
              { number: '4ï¸âƒ£', title: 'ç¬¬å››ç« ï¼šå›æµ‹æŠ¥å‘Šè§£è¯»', url: '/ashare-book5/004_Chapter4_Report_Analysis_CN' },
              { number: '5ï¸âƒ£', title: 'ç¬¬äº”ç« ï¼šé£é™©æ§åˆ¶ç³»ç»Ÿ', url: '/ashare-book5/005_Chapter5_Risk_Control_CN' },
              { number: '6ï¸âƒ£', title: 'ç¬¬å…­ç« ï¼šPTradeå®ç›˜å¯¹æ¥', url: '/ashare-book5/006_Chapter6_PTrade_Live_CN' },
              { number: '7ï¸âƒ£', title: 'ç¬¬ä¸ƒç« ï¼šQMTå®ç›˜å¯¹æ¥', url: '/ashare-book5/007_Chapter7_QMT_Live_CN' },
              { number: '8ï¸âƒ£', title: 'ç¬¬å…«ç« ï¼šç­–ç•¥è¿­ä»£ä¸ä¼˜åŒ–', url: '/ashare-book5/008_Chapter8_Strategy_Iteration_CN' },
              { number: '9ï¸âƒ£', title: 'ç¬¬ä¹ç« ï¼šæ–‡ä»¶ç®¡ç†ç³»ç»Ÿ', url: '/ashare-book5/009_Chapter9_File_Management_CN' },
              { number: 'ğŸ”Ÿ', title: 'ç¬¬åç« ï¼šéŸ¬ç¿å¹³å°å®Œæ•´å·¥ä½œæµ', url: '/ashare-book5/010_Chapter10_Complete_Workflow_CN' },
              { number: 'ğŸ“‹', title: 'é™„å½•', url: '/ashare-book5/011_Appendix_CN' }
            ]
          }
        };
        
        const selectedBook = bookConfigs[currentBook] || bookConfigs.home;
        sidebarTitle.textContent = selectedBook.title;
        
        // ç”Ÿæˆå¯¼èˆªé“¾æ¥
        const navHtml = selectedBook.chapters.map(chapter => `
          <a href="${chapter.url}" class="nav-item ${chapter.url === window.location.pathname ? 'active' : ''}">
            <span class="chapter-number">${chapter.number}</span>
            <span class="chapter-title">${chapter.title}</span>
          </a>
        `).join('');
        
        sidebarNav.innerHTML = navHtml;
      }

      // å¯¼èˆªç®¡ç†
      function initializeNavigation() {
        const homeBtn = document.getElementById('homeBtn');
        const tocBtn = document.getElementById('tocBtn');
        const prevChapter = document.getElementById('prevChapter');
        const nextChapter = document.getElementById('nextChapter');
        const prevPageBtn = document.getElementById('prevPageBtn') as HTMLButtonElement | null;
        const nextPageBtn = document.getElementById('nextPageBtn') as HTMLButtonElement | null;
        
        // è¿”å›é¦–é¡µæŒ‰é’®
        homeBtn?.addEventListener('click', () => {
          window.location.href = '/';
        });
        
        // æ™ºèƒ½è¿”å›ç›®å½•æŒ‰é’®
        tocBtn?.addEventListener('click', (e) => {
          e.preventDefault();
          const tocUrl = getSmartTocUrl();
          if (tocUrl) {
            window.location.href = tocUrl;
          }
        });
        
        // é¡¶éƒ¨å¯¼èˆªæ ç¿»é¡µæŒ‰é’®
        if (prevPageBtn && nextPageBtn) {
          prevPageBtn.addEventListener('click', () => {
            navigateToPrevPage();
          });
          
          nextPageBtn.addEventListener('click', () => {
            navigateToNextPage();
          });
          
          // åˆå§‹åŒ–ç¿»é¡µæŒ‰é’®çŠ¶æ€
          updateNavigationButtons();
        }
        
        // ç« èŠ‚å¯¼èˆª
        if (state.currentBook === 'theory' && state.currentChapter) {
          const chapterNav = document.getElementById('chapterNav');
          if (chapterNav) {
            chapterNav.style.display = 'flex';
            setupChapterNavigation();
          }
        }
      }

      // æ™ºèƒ½è·å–ç›®å½•URL - æ ¹æ®å½“å‰é¡µé¢å±‚çº§è¿”å›ä¸Šä¸€çº§å¯¼èˆªé¡µ
      function getSmartTocUrl() {
        const currentPath = window.location.pathname;
        
        // å¦‚æœåœ¨é¦–é¡µï¼Œè¿”å›é¦–é¡µ
        if (currentPath === '/') {
          return '/';
        }
        
        // å¦‚æœåœ¨å­èŠ‚é¡µé¢ï¼Œè¿”å›ç« èŠ‚å¯¼èˆªé¡µ
        if (currentPath.includes('/001_Chapter1/')) {
          return '/book1/001_Chapter1_Know_Yourself_and_the_World_CN';
        }
        if (currentPath.includes('/002_Chapter2/')) {
          return '/book1/002_Chapter2_Investment_Psychology_and_Risk_Management_CN';
        }
        if (currentPath.includes('/003_Chapter3/')) {
          return '/book1/003_Chapter3_Historical_Patterns_and_Multibagger_Stocks_CN';
        }
        if (currentPath.includes('/004_Chapter4/')) {
          return '/book1/004_Chapter4_Track_Selection_and_Industry_Trends_CN';
        }
        if (currentPath.includes('/005_Chapter5/')) {
          return '/book1/005_Chapter5_Stock_Screening_Strategies_CN';
        }
        if (currentPath.includes('/006_Chapter6/')) {
          return '/book1/006_Chapter6_Trading_Strategies_and_Execution_CN';
        }
        if (currentPath.includes('/007_Chapter7/')) {
          return '/book1/007_Chapter7_Investment_Decision_Tools_and_Resources_CN';
        }
        if (currentPath.includes('/008_Chapter8/')) {
          return '/book1/008_Chapter8_Case_Review_and_Strategy_Improvement_CN';
        }
        if (currentPath.includes('/009_Chapter9/')) {
          return '/book1/009_Chapter9_Building_an_Investment_System_CN';
        }
        if (currentPath.includes('/010_Chapter10/')) {
          return '/book1/010_Chapter10_Trading_Execution_and_Practical_Guide_CN';
        }
        if (currentPath.includes('/011_Appendix/')) {
          return '/book1/011_Appendix_CN';
        }
        
        // ç¬¬äºŒå†Œå­èŠ‚é¡µé¢ï¼Œè¿”å›å¯¹åº”ç« èŠ‚å¯¼èˆªé¡µ
        if (currentPath.includes('/201_Chapter1/')) {
          return '/book2/201_Chapter1_Market_Trend_Analysis_CN';
        }
        if (currentPath.includes('/202_Chapter2/')) {
          return '/book2/202_Chapter2_Economic_Cycles_and_Market_Performance_CN';
        }
        if (currentPath.includes('/203_Chapter3/')) {
          return '/book2/203_Chapter3_Monetary_Policy_and_Market_Transmission_CN';
        }
        
        // å¦‚æœåœ¨ç« èŠ‚å¯¼èˆªé¡µï¼Œè¿”å›æ‰‹å†Œå¯¼èˆªé¡µ
        if (currentPath.startsWith('/book1/001_Chapter') ||
            currentPath.startsWith('/book1/002_Chapter') ||
            currentPath.startsWith('/book1/003_Chapter') ||
            currentPath.startsWith('/book1/004_Chapter') ||
            currentPath.startsWith('/book1/005_Chapter') ||
            currentPath.startsWith('/book1/006_Chapter') ||
            currentPath.startsWith('/book1/007_Chapter') ||
            currentPath.startsWith('/book1/008_Chapter') ||
            currentPath.startsWith('/book1/009_Chapter') ||
            currentPath.startsWith('/book1/010_Chapter') ||
            currentPath.startsWith('/book1/011_Appendix') ||
            currentPath.startsWith('/book1/000_Preface')) {
          return '/handbook/theory';
        }
        
        // å¦‚æœåœ¨ç¬¬äºŒå†Œç« èŠ‚é¡µï¼Œè¿”å›ç¬¬äºŒå†Œå¯¼èˆªé¡µ
        if (currentPath.startsWith('/book2/201_Chapter') || 
            currentPath.startsWith('/book2/202_Chapter') || 
            currentPath.startsWith('/book2/203_Chapter') || 
            currentPath.startsWith('/book2/204_Chapter') || 
            currentPath.startsWith('/book2/205_Chapter') || 
            currentPath.startsWith('/book2/206_Chapter') || 
            currentPath.startsWith('/book2/207_Chapter') || 
            currentPath.startsWith('/book2/208_Chapter') || 
            currentPath.startsWith('/book2/209_Chapter') || 
            currentPath.startsWith('/book2/210_Chapter') || 
            currentPath.startsWith('/book2/211_Chapter') || 
            currentPath.startsWith('/book2/212_Appendix')) {
          return '/handbook/macro';
        }
        
        // ç¬¬å››å†Œå­èŠ‚é¡µé¢ï¼Œè¿”å›å¯¹åº”ç« èŠ‚å¯¼èˆªé¡µ
        if (currentPath.includes('/401_Chapter1/')) {
          return '/book4/401_Chapter1_From_Manual_to_Automated_Trading_CN';
        }
        if (currentPath.includes('/402_Chapter2/')) {
          return '/book4/402_Chapter2_Platform_Setup_and_Toolchain_CN';
        }
        if (currentPath.includes('/403_Chapter3/')) {
          return '/book4/403_Chapter3_Quantitative_Research_Methodology_CN';
        }
        if (currentPath.includes('/404_Chapter4/')) {
          return '/book4/404_Chapter4_QuantConnect_Strategy_Development_CN';
        }
        if (currentPath.includes('/405_Chapter5/')) {
          return '/book4/405_Chapter5_Backtesting_and_Simulation_CN';
        }
        if (currentPath.includes('/406_Chapter6/')) {
          return '/book4/406_Chapter6_IBKR_API_and_Order_Execution_CN';
        }
        if (currentPath.includes('/407_Chapter7/')) {
          return '/book4/407_Chapter7_Live_Trading_Deployment_CN';
        }
        if (currentPath.includes('/408_Chapter8/')) {
          return '/book4/408_Chapter8_Risk_Management_Framework_CN';
        }
        if (currentPath.includes('/409_Chapter9/')) {
          return '/book4/409_Chapter9_Derivatives_and_Hedging_CN';
        }
        if (currentPath.includes('/410_Chapter10/')) {
          return '/book4/410_Chapter10_Performance_Attribution_CN';
        }
        if (currentPath.includes('/411_Chapter11/')) {
          return '/book4/411_Chapter11_Strategy_Optimization_CN';
        }
        if (currentPath.includes('/412_Chapter12/')) {
          return '/book4/412_Chapter12_Compliance_and_Ethics_CN';
        }
        
        // å¦‚æœåœ¨ç¬¬å››å†Œç« èŠ‚é¡µï¼Œè¿”å›ç¬¬å››å†Œå¯¼èˆªé¡µ
        if (currentPath.startsWith('/book4/401_Chapter') ||
            currentPath.startsWith('/book4/402_Chapter') ||
            currentPath.startsWith('/book4/403_Chapter') ||
            currentPath.startsWith('/book4/404_Chapter') ||
            currentPath.startsWith('/book4/405_Chapter') ||
            currentPath.startsWith('/book4/406_Chapter') ||
            currentPath.startsWith('/book4/407_Chapter') ||
            currentPath.startsWith('/book4/408_Chapter') ||
            currentPath.startsWith('/book4/409_Chapter') ||
            currentPath.startsWith('/book4/410_Chapter') ||
            currentPath.startsWith('/book4/411_Chapter') ||
            currentPath.startsWith('/book4/412_Chapter') ||
            currentPath.startsWith('/book4/000_Preface')) {
          return '/handbook/technical';
        }
        
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œç¬¬ä¸€ç« å°èŠ‚é¡µï¼Œè¿”å›ç¬¬ä¸€ç« å¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book1/001_Chapter1/')) {
          return '/ashare-book1/001_Chapter1_A_Share_Market_CN';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œç¬¬äºŒç« å°èŠ‚é¡µï¼Œè¿”å›ç¬¬äºŒç« å¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book1/002_Chapter2/')) {
          return '/ashare-book1/002_Chapter2_Psychology_CN';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œç¬¬ä¸‰ç« å°èŠ‚é¡µï¼Œè¿”å›ç¬¬ä¸‰ç« å¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book1/003_Chapter3/')) {
          return '/ashare-book1/003_Chapter3_Multibagger_CN';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œç¬¬å››ç« å°èŠ‚é¡µï¼Œè¿”å›ç¬¬å››ç« å¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book1/004_Chapter4/')) {
          return '/ashare-book1/004_Chapter4_Industry_CN';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œç¬¬äº”ç« å°èŠ‚é¡µï¼Œè¿”å›ç¬¬äº”ç« å¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book1/005_Chapter5/')) {
          return '/ashare-book1/005_Chapter5_Fundamental_CN';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œç¬¬å…­ç« å°èŠ‚é¡µï¼Œè¿”å›ç¬¬å…­ç« å¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book1/006_Chapter6/')) {
          return '/ashare-book1/006_Chapter6_Screening_CN';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œç¬¬ä¸ƒç« å°èŠ‚é¡µï¼Œè¿”å›ç¬¬ä¸ƒç« å¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book1/007_Chapter7/')) {
          return '/ashare-book1/007_Chapter7_Trading_CN';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œç¬¬å…«ç« å°èŠ‚é¡µï¼Œè¿”å›ç¬¬å…«ç« å¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book1/008_Chapter8/')) {
          return '/ashare-book1/008_Chapter8_Tools_CN';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œç¬¬ä¹ç« å°èŠ‚é¡µï¼Œè¿”å›ç¬¬ä¹ç« å¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book1/009_Chapter9/')) {
          return '/ashare-book1/009_Chapter9_Cases_CN';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œç¬¬åç« å°èŠ‚é¡µï¼Œè¿”å›ç¬¬åç« å¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book1/010_Chapter10/')) {
          return '/ashare-book1/010_Chapter10_System_CN';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œç« èŠ‚é¡µï¼Œè¿”å›ç¬¬ä¸€å†Œå¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book1/')) {
          return '/handbook/theory';
        }
        // Aè‚¡æ‰‹å†Œç¬¬äºŒå†Œç« èŠ‚é¡µï¼Œè¿”å›ç¬¬äºŒå†Œå¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book2/')) {
          return '/handbook/macro';
        }
        // Aè‚¡æ‰‹å†Œç¬¬ä¸‰å†Œç« èŠ‚é¡µï¼Œè¿”å›ç¬¬ä¸‰å†Œå¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book3/')) {
          return '/handbook/stocks';
        }
        
        // Aè‚¡æ‰‹å†Œç¬¬å››å†Œå°èŠ‚é¡µï¼Œè¿”å›å¯¹åº”ç« èŠ‚å¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book4/001_Chapter1/')) {
          return '/ashare-book4/001_Chapter1_Quant_Overview_CN';
        }
        if (currentPath.startsWith('/ashare-book4/002_Chapter2/')) {
          return '/ashare-book4/002_Chapter2_Value_Factors_CN';
        }
        if (currentPath.startsWith('/ashare-book4/003_Chapter3/')) {
          return '/ashare-book4/003_Chapter3_Growth_Factors_CN';
        }
        if (currentPath.startsWith('/ashare-book4/004_Chapter4/')) {
          return '/ashare-book4/004_Chapter4_Quality_Factors_CN';
        }
        if (currentPath.startsWith('/ashare-book4/005_Chapter5/')) {
          return '/ashare-book4/005_Chapter5_Momentum_Factors_CN';
        }
        if (currentPath.startsWith('/ashare-book4/006_Chapter6/')) {
          return '/ashare-book4/006_Chapter6_Flow_Factors_CN';
        }
        if (currentPath.startsWith('/ashare-book4/007_Chapter7/')) {
          return '/ashare-book4/007_Chapter7_Multi_Factor_Model_CN';
        }
        if (currentPath.startsWith('/ashare-book4/008_Chapter8/')) {
          return '/ashare-book4/008_Chapter8_PTrade_Strategy_CN';
        }
        if (currentPath.startsWith('/ashare-book4/009_Chapter9/')) {
          return '/ashare-book4/009_Chapter9_QMT_Strategy_CN';
        }
        if (currentPath.startsWith('/ashare-book4/010_Chapter10/')) {
          return '/ashare-book4/010_Chapter10_Strategy_Evaluation_CN';
        }
        if (currentPath.startsWith('/ashare-book4/011_Chapter11/')) {
          return '/ashare-book4/011_Chapter11_Multibagger_Factors_CN';
        }
        if (currentPath.startsWith('/ashare-book4/012_Chapter12/')) {
          return '/ashare-book4/012_Chapter12_Event_Alternative_Data_CN';
        }
        if (currentPath.startsWith('/ashare-book4/013_Chapter13/')) {
          return '/ashare-book4/013_Chapter13_Taorui_Integration_CN';
        }
        // Aè‚¡æ‰‹å†Œç¬¬å››å†Œç« èŠ‚é¡µï¼Œè¿”å›ç¬¬å››å†Œå¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book4/')) {
          return '/handbook/quantitative';
        }
        // Aè‚¡æ‰‹å†Œç¬¬äº”å†Œç« èŠ‚é¡µï¼Œè¿”å›ç¬¬äº”å†Œå¯¼èˆªé¡µ
        if (currentPath.startsWith('/ashare-book5/')) {
          return '/handbook/trading';
        }
        
        // å¦‚æœåœ¨æ‰‹å†Œå¯¼èˆªé¡µï¼Œè¿”å›é¦–é¡µ
        if (currentPath.includes('/handbook/')) {
          return '/';
        }
        
        // é»˜è®¤è¿”å›é¦–é¡µ
        return '/';
      }

      // è®¾ç½®ç« èŠ‚å¯¼èˆª
      function setupChapterNavigation() {
        const chapters = [
          '/book1/000_Preface_CN',
          '/book1/001_Chapter1_Know_Yourself_and_the_World_CN',
          '/book1/002_Chapter2_Investment_Psychology_and_Risk_Management_CN',
          '/book1/003_Chapter3_Historical_Patterns_and_Multibagger_Stocks_CN',
          '/book1/004_Chapter4_Track_Selection_and_Industry_Trends_CN',
          '/book1/005_Chapter5_Stock_Screening_Strategies_CN',
          '/book1/006_Chapter6_Trading_Strategies_and_Execution_CN',
          '/book1/007_Chapter7_Investment_Decision_Tools_and_Resources_CN',
          '/book1/008_Chapter8_Case_Review_and_Strategy_Improvement_CN',
          '/book1/009_Chapter9_Building_an_Investment_System_CN',
          '/book1/010_Chapter10_Trading_Execution_and_Practical_Guide_CN',
          '/book1/011_Appendix_CN'
        ];
        
        const currentIndex = chapters.indexOf(window.location.pathname);
        const prevChapter = document.getElementById('prevChapter') as HTMLButtonElement;
        const nextChapter = document.getElementById('nextChapter') as HTMLButtonElement;
        
        if (prevChapter) {
          prevChapter.disabled = currentIndex <= 0;
          if (currentIndex > 0) {
            prevChapter.onclick = () => window.location.href = chapters[currentIndex - 1];
          }
        }
        
        if (nextChapter) {
          nextChapter.disabled = currentIndex >= chapters.length - 1;
          if (currentIndex < chapters.length - 1) {
            nextChapter.onclick = () => window.location.href = chapters[currentIndex + 1];
          }
        }
      }

      // å®Œæ•´çš„é¡µé¢é¡ºåº - ä»…Aè‚¡æ‰‹å†Œï¼ˆåŒ…å«å„ç« èŠ‚å°èŠ‚ï¼‰
      function getAllPages() {
        return [
          // ===== é¦–é¡µ =====
          '/',
          
          // ===== Aè‚¡æ‰‹å†Œç¬¬ä¸€å†Œï¼šç†è®ºæ‰‹å†Œ =====
          '/handbook/theory',
          '/ashare-book1/000_Preface_CN',
          
          // ç¬¬ä¸€ç« ï¼šAè‚¡å¸‚åœºç‰¹å¾ä¸æŠ•èµ„ç¯å¢ƒ
          '/ashare-book1/001_Chapter1_A_Share_Market_CN',
          '/ashare-book1/001_Chapter1/1.1_Market_Structure_CN',
          '/ashare-book1/001_Chapter1/1.2_Trading_Rules_CN',
          '/ashare-book1/001_Chapter1/1.3_Market_Participants_CN',
          '/ashare-book1/001_Chapter1/1.4_Policy_Environment_CN',
          '/ashare-book1/001_Chapter1/1.5_Market_Cycles_CN',
          '/ashare-book1/001_Chapter1/1.6_Opportunities_Risks_CN',
          
          // ç¬¬äºŒç« ï¼šæŠ•èµ„å¿ƒç†ä¸è®¤çŸ¥ç®¡ç†
          '/ashare-book1/002_Chapter2_Psychology_CN',
          '/ashare-book1/002_Chapter2/2.1_Psychology_Basics_CN',
          '/ashare-book1/002_Chapter2/2.2_Cognitive_Biases_CN',
          '/ashare-book1/002_Chapter2/2.3_Emotion_Management_CN',
          '/ashare-book1/002_Chapter2/2.4_Decision_Framework_CN',
          '/ashare-book1/002_Chapter2/2.5_Retail_Psychology_CN',
          '/ashare-book1/002_Chapter2/2.6_Mental_Training_CN',
          
          // ç¬¬ä¸‰ç« ï¼šAè‚¡é«˜å€è‚¡å†å²ç ”ç©¶
          '/ashare-book1/003_Chapter3_Multibagger_CN',
          '/ashare-book1/003_Chapter3/3.1_Definition_Criteria_CN',
          '/ashare-book1/003_Chapter3/3.2_Industry_Distribution_CN',
          '/ashare-book1/003_Chapter3/3.3_Classic_Cases_CN',
          '/ashare-book1/003_Chapter3/3.4_Common_Features_CN',
          '/ashare-book1/003_Chapter3/3.5_Growth_Stages_CN',
          '/ashare-book1/003_Chapter3/3.6_Failure_Cases_CN',
          
          // ç¬¬å››ç« ï¼šè¡Œä¸šç ”ç©¶ä¸èµ›é“é€‰æ‹©
          '/ashare-book1/004_Chapter4_Industry_CN',
          '/ashare-book1/004_Chapter4/4.1_Industry_Framework_CN',
          '/ashare-book1/004_Chapter4/4.2_Industry_Classification_CN',
          '/ashare-book1/004_Chapter4/4.3_Consumer_Sector_CN',
          '/ashare-book1/004_Chapter4/4.4_Tech_Sector_CN',
          '/ashare-book1/004_Chapter4/4.5_Pharma_Sector_CN',
          '/ashare-book1/004_Chapter4/4.6_Cyclical_Sector_CN',
          
          // ç¬¬äº”ç« ï¼šåŸºæœ¬é¢åˆ†ææ¡†æ¶
          '/ashare-book1/005_Chapter5_Fundamental_CN',
          '/ashare-book1/005_Chapter5/5.1_Financial_Statements_CN',
          '/ashare-book1/005_Chapter5/5.2_Profitability_Analysis_CN',
          '/ashare-book1/005_Chapter5/5.3_Growth_Analysis_CN',
          '/ashare-book1/005_Chapter5/5.4_Risk_Detection_CN',
          '/ashare-book1/005_Chapter5/5.5_Valuation_Methods_CN',
          '/ashare-book1/005_Chapter5/5.6_Quality_Assessment_CN',
          
          // ç¬¬å…­ç« ï¼šè‚¡ç¥¨ç­›é€‰ç­–ç•¥
          '/ashare-book1/006_Chapter6_Screening_CN',
          '/ashare-book1/006_Chapter6/6.1_Screening_Framework_CN',
          '/ashare-book1/006_Chapter6/6.2_Quantitative_Screening_CN',
          '/ashare-book1/006_Chapter6/6.3_Qualitative_Screening_CN',
          '/ashare-book1/006_Chapter6/6.4_Investment_Styles_CN',
          '/ashare-book1/006_Chapter6/6.5_Screening_Tools_CN',
          '/ashare-book1/006_Chapter6/6.6_Screening_Cases_CN',
          
          // ç¬¬ä¸ƒç« ï¼šäº¤æ˜“ç­–ç•¥ä¸æ‰§è¡Œ
          '/ashare-book1/007_Chapter7_Trading_CN',
          '/ashare-book1/007_Chapter7/7.1_Entry_Timing_CN',
          '/ashare-book1/007_Chapter7/7.2_Position_Management_CN',
          '/ashare-book1/007_Chapter7/7.3_Stop_Loss_Take_Profit_CN',
          '/ashare-book1/007_Chapter7/7.4_Exit_Timing_CN',
          '/ashare-book1/007_Chapter7/7.5_Trading_Discipline_CN',
          '/ashare-book1/007_Chapter7/7.6_AShare_Trading_Tips_CN',
          
          // ç¬¬å…«ç« ï¼šæŠ•èµ„å·¥å…·ä¸èµ„æº
          '/ashare-book1/008_Chapter8_Tools_CN',
          '/ashare-book1/008_Chapter8/8.1_Data_Sources_CN',
          '/ashare-book1/008_Chapter8/8.2_Analysis_Tools_CN',
          '/ashare-book1/008_Chapter8/8.3_Research_Resources_CN',
          '/ashare-book1/008_Chapter8/8.4_Trading_Platforms_CN',
          '/ashare-book1/008_Chapter8/8.5_Learning_Resources_CN',
          '/ashare-book1/008_Chapter8/8.6_Community_Networks_CN',
          
          // ç¬¬ä¹ç« ï¼šæ¡ˆä¾‹å¤ç›˜ä¸ç­–ç•¥æ”¹è¿›
          '/ashare-book1/009_Chapter9_Cases_CN',
          '/ashare-book1/009_Chapter9/9.1_Case_Study_Framework_CN',
          '/ashare-book1/009_Chapter9/9.2_Success_Cases_CN',
          '/ashare-book1/009_Chapter9/9.3_Failure_Cases_CN',
          '/ashare-book1/009_Chapter9/9.4_Strategy_Review_CN',
          '/ashare-book1/009_Chapter9/9.5_Continuous_Improvement_CN',
          '/ashare-book1/009_Chapter9/9.6_Learning_From_Masters_CN',
          
          // ç¬¬åç« ï¼šæ„å»ºä¸ªäººæŠ•èµ„ç³»ç»Ÿ
          '/ashare-book1/010_Chapter10_System_CN',
          '/ashare-book1/010_Chapter10/10.1_Investment_Philosophy_CN',
          '/ashare-book1/010_Chapter10/10.2_Strategy_Framework_CN',
          '/ashare-book1/010_Chapter10/10.3_Risk_Management_System_CN',
          '/ashare-book1/010_Chapter10/10.4_Execution_Checklist_CN',
          '/ashare-book1/010_Chapter10/10.5_Performance_Tracking_CN',
          '/ashare-book1/010_Chapter10/10.6_Lifelong_Learning_CN',
          
          // é™„å½•
          '/ashare-book1/011_Appendix_CN',
          
          // ===== Aè‚¡æ‰‹å†Œç¬¬äºŒå†Œï¼šå®è§‚ç»æµ =====
          '/handbook/macro',
          '/ashare-book2/000_Preface_CN',
          '/ashare-book2/001_Chapter1_Economic_Cycle_CN',
          '/ashare-book2/002_Chapter2_Monetary_Policy_CN',
          '/ashare-book2/003_Chapter3_Fiscal_Policy_CN',
          '/ashare-book2/004_Chapter4_Sector_Rotation_CN',
          '/ashare-book2/005_Chapter5_Market_Sentiment_CN',
          '/ashare-book2/006_Chapter6_Macro_Data_CN',
          '/ashare-book2/007_Chapter7_Global_Impact_CN',
          '/ashare-book2/008_Chapter8_Risk_Monitor_CN',
          '/ashare-book2/009_Chapter9_Macro_Timing_CN',
          '/ashare-book2/010_Chapter10_Macro_Tools_CN',
          '/ashare-book2/011_Appendix_CN',
          
          // ===== Aè‚¡æ‰‹å†Œç¬¬ä¸‰å†Œï¼šä¸ªè‚¡ç ”ç©¶ =====
          '/handbook/stocks',
          '/ashare-book3/000_Preface_CN',
          '/ashare-book3/001_Chapter1_Research_Framework_CN',
          '/ashare-book3/002_Chapter2_Financial_Analysis_CN',
          '/ashare-book3/003_Chapter3_Valuation_CN',
          '/ashare-book3/004_Chapter4_Industry_Leaders_CN',
          '/ashare-book3/005_Chapter5_Consumer_Cases_CN',
          '/ashare-book3/006_Chapter6_Tech_Cases_CN',
          '/ashare-book3/007_Chapter7_Cyclical_Cases_CN',
          '/ashare-book3/008_Chapter8_Finance_Cases_CN',
          '/ashare-book3/009_Chapter9_Pharma_Cases_CN',
          '/ashare-book3/010_Chapter10_Report_Writing_CN',
          '/ashare-book3/011_Appendix_CN',
          
          // ===== Aè‚¡æ‰‹å†Œç¬¬å››å†Œï¼šé‡åŒ–å› å­ =====
          '/handbook/quantitative',
          '/ashare-book4/000_Preface_CN',
          
          // ç¬¬ä¸€ç« ï¼šé‡åŒ–æŠ•èµ„æ¦‚è¿°
          '/ashare-book4/001_Chapter1_Quant_Overview_CN',
          '/ashare-book4/001_Chapter1/1.1_Quant_Definition_CN',
          '/ashare-book4/001_Chapter1/1.2_Quant_History_CN',
          '/ashare-book4/001_Chapter1/1.3_Quant_Strategies_CN',
          '/ashare-book4/001_Chapter1/1.4_Quant_Advantages_CN',
          '/ashare-book4/001_Chapter1/1.5_Quant_Challenges_CN',
          '/ashare-book4/001_Chapter1/1.6_Quant_AShare_CN',
          
          // ç¬¬äºŒç« ï¼šä»·å€¼å› å­
          '/ashare-book4/002_Chapter2_Value_Factors_CN',
          '/ashare-book4/002_Chapter2/2.1_Value_Overview_CN',
          '/ashare-book4/002_Chapter2/2.2_PE_Factor_CN',
          '/ashare-book4/002_Chapter2/2.3_PB_Factor_CN',
          '/ashare-book4/002_Chapter2/2.4_PS_Factor_CN',
          '/ashare-book4/002_Chapter2/2.5_Dividend_Factor_CN',
          '/ashare-book4/002_Chapter2/2.6_Value_Composite_CN',
          
          // ç¬¬ä¸‰ç« ï¼šæˆé•¿å› å­
          '/ashare-book4/003_Chapter3_Growth_Factors_CN',
          '/ashare-book4/003_Chapter3/3.1_Growth_Overview_CN',
          '/ashare-book4/003_Chapter3/3.2_Revenue_Growth_CN',
          '/ashare-book4/003_Chapter3/3.3_Profit_Growth_CN',
          '/ashare-book4/003_Chapter3/3.4_ROE_Change_CN',
          '/ashare-book4/003_Chapter3/3.5_Analyst_Revision_CN',
          '/ashare-book4/003_Chapter3/3.6_Growth_Composite_CN',
          
          // ç¬¬å››ç« ï¼šè´¨é‡å› å­
          '/ashare-book4/004_Chapter4_Quality_Factors_CN',
          '/ashare-book4/004_Chapter4/4.1_Quality_Overview_CN',
          '/ashare-book4/004_Chapter4/4.2_Margin_Factor_CN',
          '/ashare-book4/004_Chapter4/4.3_Turnover_Factor_CN',
          '/ashare-book4/004_Chapter4/4.4_Leverage_Factor_CN',
          '/ashare-book4/004_Chapter4/4.5_Cashflow_Factor_CN',
          '/ashare-book4/004_Chapter4/4.6_Quality_Composite_CN',
          
          // ç¬¬äº”ç« ï¼šåŠ¨é‡å› å­
          '/ashare-book4/005_Chapter5_Momentum_Factors_CN',
          '/ashare-book4/005_Chapter5/5.1_Momentum_Overview_CN',
          '/ashare-book4/005_Chapter5/5.2_Price_Momentum_CN',
          '/ashare-book4/005_Chapter5/5.3_Industry_Momentum_CN',
          '/ashare-book4/005_Chapter5/5.4_Reversal_Factor_CN',
          '/ashare-book4/005_Chapter5/5.5_Momentum_Composite_CN',
          
          // ç¬¬å…­ç« ï¼šèµ„é‡‘æµå› å­
          '/ashare-book4/006_Chapter6_Flow_Factors_CN',
          '/ashare-book4/006_Chapter6/6.1_Flow_Overview_CN',
          '/ashare-book4/006_Chapter6/6.2_Northbound_Factor_CN',
          '/ashare-book4/006_Chapter6/6.3_Mainforce_Factor_CN',
          '/ashare-book4/006_Chapter6/6.4_Margin_Factor_CN',
          '/ashare-book4/006_Chapter6/6.5_Institution_Factor_CN',
          '/ashare-book4/006_Chapter6/6.6_Flow_Composite_CN',
          
          // ç¬¬ä¸ƒç« ï¼šå¤šå› å­æ¨¡å‹
          '/ashare-book4/007_Chapter7_Multi_Factor_Model_CN',
          '/ashare-book4/007_Chapter7/7.1_Model_Overview_CN',
          '/ashare-book4/007_Chapter7/7.2_Factor_Preprocessing_CN',
          '/ashare-book4/007_Chapter7/7.3_Factor_Combination_CN',
          '/ashare-book4/007_Chapter7/7.4_Portfolio_Construction_CN',
          '/ashare-book4/007_Chapter7/7.5_Risk_Control_CN',
          '/ashare-book4/007_Chapter7/7.6_Model_Backtest_CN',
          
          // ç¬¬å…«ç« ï¼šPTradeç­–ç•¥å¼€å‘
          '/ashare-book4/008_Chapter8_PTrade_Strategy_CN',
          '/ashare-book4/008_Chapter8/8.1_PTrade_Overview_CN',
          '/ashare-book4/008_Chapter8/8.2_Strategy_Framework_CN',
          '/ashare-book4/008_Chapter8/8.3_Data_Access_CN',
          '/ashare-book4/008_Chapter8/8.4_Trade_Execution_CN',
          '/ashare-book4/008_Chapter8/8.5_Multi_Factor_Strategy_CN',
          '/ashare-book4/008_Chapter8/8.6_Live_Deployment_CN',
          
          // ç¬¬ä¹ç« ï¼šQMTç­–ç•¥å¼€å‘
          '/ashare-book4/009_Chapter9_QMT_Strategy_CN',
          '/ashare-book4/009_Chapter9/9.1_QMT_Overview_CN',
          '/ashare-book4/009_Chapter9/9.2_MiniQMT_CN',
          '/ashare-book4/009_Chapter9/9.3_Xtquant_CN',
          '/ashare-book4/009_Chapter9/9.4_Strategy_Dev_CN',
          '/ashare-book4/009_Chapter9/9.5_Multi_Factor_Strategy_CN',
          '/ashare-book4/009_Chapter9/9.6_Live_Deployment_CN',
          
          // ç¬¬åç« ï¼šç­–ç•¥è¯„ä¼°ä¸ä¼˜åŒ–
          '/ashare-book4/010_Chapter10_Strategy_Evaluation_CN',
          '/ashare-book4/010_Chapter10/10.1_Evaluation_Metrics_CN',
          '/ashare-book4/010_Chapter10/10.2_Backtest_Methods_CN',
          '/ashare-book4/010_Chapter10/10.3_Risk_Analysis_CN',
          '/ashare-book4/010_Chapter10/10.4_Parameter_Optimization_CN',
          '/ashare-book4/010_Chapter10/10.5_Strategy_Iteration_CN',
          '/ashare-book4/010_Chapter10/10.6_Case_Study_CN',
          
          // ç¬¬åä¸€ç« ï¼šé«˜å€è‚¡å› å­ç‰¹å¾
          '/ashare-book4/011_Chapter11_Multibagger_Factors_CN',
          '/ashare-book4/011_Chapter11/11.1_Multibagger_Definition_CN',
          '/ashare-book4/011_Chapter11/11.2_Growth_Features_CN',
          '/ashare-book4/011_Chapter11/11.3_Valuation_Features_CN',
          '/ashare-book4/011_Chapter11/11.4_Quality_Features_CN',
          '/ashare-book4/011_Chapter11/11.5_Technical_Flow_Features_CN',
          '/ashare-book4/011_Chapter11/11.6_Multibagger_Model_CN',
          
          // ç¬¬åäºŒç« ï¼šäº‹ä»¶é©±åŠ¨ä¸å¦ç±»æ•°æ®
          '/ashare-book4/012_Chapter12_Event_Alternative_Data_CN',
          '/ashare-book4/012_Chapter12/12.1_Event_Driven_Overview_CN',
          '/ashare-book4/012_Chapter12/12.2_Earnings_Event_CN',
          '/ashare-book4/012_Chapter12/12.3_News_Sentiment_CN',
          '/ashare-book4/012_Chapter12/12.4_Analyst_Expectations_CN',
          '/ashare-book4/012_Chapter12/12.5_Alternative_Data_CN',
          '/ashare-book4/012_Chapter12/12.6_Taorui_Integration_CN',
          
          // ç¬¬åä¸‰ç« ï¼šéŸ¬ç¿é‡åŒ–ç³»ç»Ÿé›†æˆ
          '/ashare-book4/013_Chapter13_Taorui_Integration_CN',
          '/ashare-book4/013_Chapter13/13.1_System_Architecture_CN',
          '/ashare-book4/013_Chapter13/13.2_Data_Management_CN',
          '/ashare-book4/013_Chapter13/13.3_Factor_Research_CN',
          '/ashare-book4/013_Chapter13/13.4_Strategy_Development_CN',
          '/ashare-book4/013_Chapter13/13.5_Backtest_Live_CN',
          '/ashare-book4/013_Chapter13/13.6_Cursor_Integration_CN',
          
          '/ashare-book4/014_Appendix_CN',
          
          // ===== Aè‚¡æ‰‹å†Œç¬¬äº”å†Œï¼šå›æµ‹å®ç›˜ =====
          '/handbook/trading',
          '/ashare-book5/000_Preface_CN',
          '/ashare-book5/001_Chapter1_Backtest_Basics_CN',
          '/ashare-book5/002_Chapter2_JQData_Integration_CN',
          '/ashare-book5/003_Chapter3_Taorui_Backtest_CN',
          '/ashare-book5/004_Chapter4_Report_Analysis_CN',
          '/ashare-book5/005_Chapter5_Risk_Control_CN',
          '/ashare-book5/006_Chapter6_PTrade_Live_CN',
          '/ashare-book5/007_Chapter7_QMT_Live_CN',
          '/ashare-book5/008_Chapter8_Strategy_Iteration_CN',
          '/ashare-book5/009_Chapter9_File_Management_CN',
          '/ashare-book5/010_Chapter10_Complete_Workflow_CN',
          '/ashare-book5/011_Appendix_CN'
        ];
      }

      // ç¿»é¡µåŠŸèƒ½
      function navigateToPrevPage() {
        const pages = getAllPages();
        const currentPath = window.location.pathname;
        const currentIndex = pages.indexOf(currentPath);
        
        if (currentIndex > 0) {
          window.location.href = pages[currentIndex - 1];
        }
      }

      function navigateToNextPage() {
        const pages = getAllPages();
        const currentPath = window.location.pathname;
        const currentIndex = pages.indexOf(currentPath);
        
        if (currentIndex >= 0 && currentIndex < pages.length - 1) {
          window.location.href = pages[currentIndex + 1];
        }
      }

      // æ›´æ–°ç¿»é¡µæŒ‰é’®çŠ¶æ€
      function updateNavigationButtons() {
        const pages = getAllPages();
        const currentPath = window.location.pathname;
        const currentIndex = pages.indexOf(currentPath);
        
        const prevBtn = document.getElementById('prevPageBtn') as HTMLButtonElement | null;
        const nextBtn = document.getElementById('nextPageBtn') as HTMLButtonElement | null;
        
        if (prevBtn && nextBtn) {
          // æ›´æ–°æŒ‰é’®çŠ¶æ€
          prevBtn.disabled = currentIndex <= 0;
          nextBtn.disabled = currentIndex >= pages.length - 1;
          
          // æ›´æ–°æŒ‰é’®æ–‡å­—æ˜¾ç¤ºé¡µé¢ä¿¡æ¯
          if (currentIndex > 0) {
            prevBtn.title = `ä¸Šä¸€é¡µ`;
          } else {
            prevBtn.title = 'å·²æ˜¯ç¬¬ä¸€é¡µ';
          }
          
          if (currentIndex < pages.length - 1) {
            nextBtn.title = `ä¸‹ä¸€é¡µ`;
          } else {
            nextBtn.title = 'å·²æ˜¯æœ€åä¸€é¡µ';
          }
        }
      }

      // å›åˆ°é¡¶éƒ¨
      function initializeBackToTop() {
      const backToTopBtn = document.getElementById('backToTop');
        
        window.addEventListener('scroll', () => {
          if (backToTopBtn) {
          if (window.scrollY > 300) {
            backToTopBtn.style.display = 'flex';
          } else {
            backToTopBtn.style.display = 'none';
            }
          }
        });
        
        backToTopBtn?.addEventListener('click', () => {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      }

      // é˜…è¯»è¿›åº¦
      function initializeReadingProgress() {
        if (state.focusMode) {
          showReadingProgress();
        }
      }

      function showReadingProgress() {
        const progress = document.getElementById('readingProgress');
        if (progress) {
          progress.style.display = 'block';
          window.addEventListener('scroll', updateReadingProgress);
        }
      }

      function hideReadingProgress() {
        const progress = document.getElementById('readingProgress');
        if (progress) {
          progress.style.display = 'none';
          window.removeEventListener('scroll', updateReadingProgress);
        }
      }
      
      function updateReadingProgress() {
        const progressBar = document.getElementById('readingProgressBar');
        if (!progressBar) return;
        
        const scrollTop = window.pageYOffset;
        const docHeight = document.documentElement.scrollHeight - window.innerHeight;
        const scrollPercent = (scrollTop / docHeight) * 100;
        
        progressBar.style.width = scrollPercent + '%';
      }

      // é”®ç›˜å¿«æ·é”®
      function setupKeyboardShortcuts() {
        document.addEventListener('keydown', (e) => {
          // ESC: é€€å‡ºä¸“æ³¨æ¨¡å¼
          if (e.key === 'Escape' && state.focusMode) {
            document.getElementById('toggleReadingMode')?.click();
          }
          
          // Ctrl/Cmd + +/-: è°ƒæ•´å­—ä½“
          if ((e.ctrlKey || e.metaKey) && e.key === '=') {
            e.preventDefault();
            document.getElementById('increaseFont')?.click();
          }
          if ((e.ctrlKey || e.metaKey) && e.key === '-') {
            e.preventDefault();
            document.getElementById('decreaseFont')?.click();
          }
          
          // Ctrl/Cmd + D: åˆ‡æ¢ä¸»é¢˜
          if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
            e.preventDefault();
            document.getElementById('themeToggle')?.click();
          }
        });
      }

      // è¯­è¨€åˆ‡æ¢ç®¡ç†
      function initializeLanguageSwitch() {
        const enBtn = document.getElementById('langSwitchEn');
        const cnBtn = document.getElementById('langSwitchCn');
        
        // ENæŒ‰é’® - å‡†å¤‡é¡µé¢ç¿»è¯‘
        enBtn?.addEventListener('click', () => {
          prepareForTranslation();
        });
        
        // CNæŒ‰é’® - æ¢å¤ä¸­æ–‡
        cnBtn?.addEventListener('click', () => {
          window.location.reload();
        });
      }

      // å‡†å¤‡é¡µé¢ç¿»è¯‘
      function prepareForTranslation() {
        // è®¾ç½®é¡µé¢è¯­è¨€å±æ€§ï¼Œå¸®åŠ©æµè§ˆå™¨è¯†åˆ«
        document.documentElement.lang = 'zh-CN';
        document.documentElement.setAttribute('translate', 'yes');
        
        // æ·»åŠ ç¿»è¯‘æç¤º
        showTranslationTip();
        
        // å°è¯•è§¦å‘æµè§ˆå™¨ç¿»è¯‘æç¤ºï¼ˆå¦‚æœå¯èƒ½ï¼‰
        tryTriggerTranslation();
      }

      // æ˜¾ç¤ºç¿»è¯‘æç¤º
      function showTranslationTip() {
        const notification = document.createElement('div');
        notification.style.cssText = `
          position: fixed;
          top: 60px;
          right: 20px;
          background: #2196f3;
          color: white;
          padding: 16px;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          z-index: 10000;
          font-size: 14px;
          max-width: 300px;
          line-height: 1.4;
          font-family: inherit;
        `;
        
        const browserInfo = getBrowserTranslationInfo();
        notification.innerHTML = `
          <div style="font-weight: 600; margin-bottom: 8px;">ğŸŒ ${browserInfo.title}</div>
          <div style="margin-bottom: 8px;">${browserInfo.instruction}</div>
          ${browserInfo.shortcut ? `<div style="font-size: 12px; opacity: 0.9;">å¿«æ·é”®: ${browserInfo.shortcut}</div>` : ''}
        `;
        
        document.body.appendChild(notification);
        
        // 5ç§’åè‡ªåŠ¨ç§»é™¤
        setTimeout(() => {
          if (notification.parentNode) {
            notification.remove();
          }
        }, 5000);
      }

      // å°è¯•è§¦å‘ç¿»è¯‘ï¼ˆæœ‰é™åˆ¶ï¼‰
      function tryTriggerTranslation() {
        // æ–¹æ³•1: å°è¯•æ¨¡æ‹Ÿå³é”®èœå•ï¼ˆæœ‰é™åˆ¶ï¼‰
        try {
          const contextEvent = new MouseEvent('contextmenu', {
            bubbles: true,
            cancelable: true,
            clientX: window.innerWidth / 2,
            clientY: window.innerHeight / 2
          });
          document.body.dispatchEvent(contextEvent);
        } catch (e) {
          console.log('Context menu simulation not supported');
        }

        // æ–¹æ³•2: å°è¯•å¿«æ·é”®ï¼ˆæœ‰é™åˆ¶ï¼‰
        setTimeout(() => {
          try {
            const keyEvent = new KeyboardEvent('keydown', {
              key: 't',
              ctrlKey: true,
              shiftKey: true,
              bubbles: true
            });
            document.dispatchEvent(keyEvent);
          } catch (e) {
            console.log('Keyboard simulation not supported');
          }
        }, 100);
      }

      // è·å–æµè§ˆå™¨ç¿»è¯‘ä¿¡æ¯
      function getBrowserTranslationInfo() {
        const userAgent = navigator.userAgent;
        
        if (userAgent.includes('Chrome')) {
          return {
            title: 'Chrome ç¿»è¯‘å·²å‡†å¤‡',
            instruction: 'å³é”®ç‚¹å‡»é¡µé¢ â†’ "ç¿»è¯‘ä¸ºè‹±è¯­"ï¼Œæˆ–æŸ¥çœ‹åœ°å€æ å³ä¾§çš„ç¿»è¯‘å›¾æ ‡',
            shortcut: 'Ctrl+Shift+T (éƒ¨åˆ†ç‰ˆæœ¬)'
          };
        } else if (userAgent.includes('Edge')) {
          return {
            title: 'Edge ç¿»è¯‘å·²å‡†å¤‡',
            instruction: 'å³é”®ç‚¹å‡»é¡µé¢ â†’ "ç¿»è¯‘ä¸ºè‹±è¯­"ï¼Œæˆ–æŸ¥çœ‹åœ°å€æ çš„ç¿»è¯‘å›¾æ ‡',
            shortcut: null
          };
        } else if (userAgent.includes('Firefox')) {
          return {
            title: 'Firefox ç¿»è¯‘',
            instruction: 'éœ€è¦å®‰è£…ç¿»è¯‘æ‰©å±•ï¼Œæ¨èä½¿ç”¨ "To Google Translate" æ‰©å±•',
            shortcut: null
          };
        } else if (userAgent.includes('Safari')) {
          return {
            title: 'Safari ç¿»è¯‘å·²å‡†å¤‡',
            instruction: 'å³é”®ç‚¹å‡»é¡µé¢ â†’ "ç¿»è¯‘ä¸ºè‹±è¯­"ï¼ˆéœ€è¦ macOS Big Sur æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰',
            shortcut: null
          };
        } else {
          return {
            title: 'æµè§ˆå™¨ç¿»è¯‘å·²å‡†å¤‡',
            instruction: 'å³é”®ç‚¹å‡»é¡µé¢é€‰æ‹©ç¿»è¯‘é€‰é¡¹',
            shortcut: null
          };
        }
      }
    </script>
  </body>
</html> 