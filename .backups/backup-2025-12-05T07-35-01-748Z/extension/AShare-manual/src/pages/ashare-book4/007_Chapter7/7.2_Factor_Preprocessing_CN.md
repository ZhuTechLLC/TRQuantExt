---
title: "7.2 因子预处理"
description: "学习因子的标准化、去极值、中性化等预处理方法"
lang: "zh-CN"
layout: "/src/layouts/Layout.astro"
currentBook: "ashare-quantitative"
currentChapter: "ashare-quantitative-chapter7"
updateDate: "2025-01-26"
---

# ⚙️ 7.2 因子预处理

> **核心摘要：**
> 
> 因子预处理是多因子模型的关键步骤。本节讲解因子的标准化、去极值、中性化等预处理方法。

## 📋 章节概览

<div class="section-overview">
  <div class="section-item">
    <h4>📊 7.2.1 去极值</h4>
    <p>处理因子异常值</p>
  </div>
  <div class="section-item">
    <h4>⚖️ 7.2.2 标准化</h4>
    <p>消除量纲差异</p>
  </div>
  <div class="section-item">
    <h4>🏭 7.2.3 中性化</h4>
    <p>消除行业、市值影响</p>
  </div>
</div>

## 📊 7.2.1 去极值

### 去极值方法

<div class="comparison-table">
  <table>
    <thead>
      <tr>
        <th>方法</th>
        <th>原理</th>
        <th>适用场景</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>MAD法</strong></td>
        <td>中位数绝对偏差</td>
        <td>推荐使用</td>
      </tr>
      <tr>
        <td><strong>3σ法</strong></td>
        <td>3倍标准差截断</td>
        <td>正态分布因子</td>
      </tr>
      <tr>
        <td><strong>分位数法</strong></td>
        <td>1%/99%分位截断</td>
        <td>简单有效</td>
      </tr>
    </tbody>
  </table>
</div>

## ⚖️ 7.2.2 标准化

### Z-score标准化

<div class="tip-box">
  <h4>⚖️ Z-score标准化</h4>
  <p><strong>公式：</strong>Z = (X - μ) / σ</p>
  <p><strong>效果：</strong>均值为0，标准差为1</p>
  <p><strong>优点：</strong>消除量纲差异，便于因子比较和合成</p>
</div>

## 🏭 7.2.3 中性化

### 行业市值中性化

<div class="board-details">
  <div class="board-card">
    <h4>🏭 中性化代码示例</h4>
    <div class="board-content">

```python
def neutralize_factor(factor, industry, market_cap):
    """行业市值中性化"""
    import statsmodels.api as sm
    
    # 创建行业哑变量
    industry_dummies = pd.get_dummies(industry)
    
    # 对数市值
    log_cap = np.log(market_cap)
    
    # 回归
    X = pd.concat([industry_dummies, log_cap], axis=1)
    X = sm.add_constant(X)
    
    model = sm.OLS(factor, X)
    results = model.fit()
    
    # 残差即为中性化后的因子
    return results.resid
```

</div>
  </div>
</div>

## 🔮 总结与展望

<div class="summary-outlook">
  <h3>本节回顾</h3>
  <p>本节讲解了因子的去极值、标准化、中性化等预处理方法。</p>
  
  <h3>下节预告</h3>
  <p>下一节将学习因子合成方法，包括等权、IC加权等。</p>
  
  <a href="/ashare-book4/007_Chapter7/7.3_Factor_Combination_CN" class="next-section">
    继续学习：7.3 因子合成方法 →
  </a>
</div>













