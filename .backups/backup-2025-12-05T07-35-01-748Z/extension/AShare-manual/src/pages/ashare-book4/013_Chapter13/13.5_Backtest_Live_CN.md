---
title: "13.5 å›æµ‹ä¸å®ç›˜æ¨¡å—"
description: "å­¦ä¹ éŸ¬ç¿ç³»ç»Ÿçš„å›æµ‹å¼•æ“å’Œå®ç›˜äº¤æ˜“å¯¹æ¥"
lang: "zh-CN"
layout: "/src/layouts/Layout.astro"
currentBook: "ashare-quantitative"
currentChapter: "ashare-quantitative-chapter13"
updateDate: "2025-01-26"
---

# ğŸ“Š 13.5 å›æµ‹ä¸å®ç›˜æ¨¡å—

> **æ ¸å¿ƒæ‘˜è¦ï¼š**
> 
> æœ¬èŠ‚ä»‹ç»éŸ¬ç¿é‡åŒ–ç³»ç»Ÿçš„å›æµ‹å¼•æ“ä½¿ç”¨æ–¹æ³•ï¼Œä»¥åŠPTrade/QMTå®ç›˜äº¤æ˜“å¯¹æ¥æµç¨‹ã€‚

## ğŸ“Š å›æµ‹å¼•æ“

<div class="board-details">
  <div class="board-card">
    <h4>ğŸ“Š å›æµ‹å¼•æ“ä½¿ç”¨</h4>
    <div class="board-content">

```python
# core/backtest_engine.py
class BacktestEngine:
    """å›æµ‹å¼•æ“"""
    
    def __init__(self, strategy, config):
        self.strategy = strategy
        self.config = config
        self.results = []
    
    def run(self, start_date, end_date):
        """è¿è¡Œå›æµ‹"""
        dates = self.get_trading_dates(start_date, end_date)
        portfolio = Portfolio(self.config['initial_capital'])
        
        for date in dates:
            # ç”Ÿæˆä¿¡å·
            signals = self.strategy.generate_signals(date)
            
            # æ‰§è¡Œäº¤æ˜“
            portfolio.rebalance(signals, date)
            
            # è®°å½•ç»“æœ
            self.results.append({
                'date': date,
                'nav': portfolio.nav,
                'positions': portfolio.positions.copy()
            })
        
        return self.generate_report()
    
    def generate_report(self):
        """ç”Ÿæˆå›æµ‹æŠ¥å‘Š"""
        df = pd.DataFrame(self.results)
        
        return {
            'total_return': df['nav'].iloc[-1] / df['nav'].iloc[0] - 1,
            'annual_return': self.calc_annual_return(df),
            'max_drawdown': self.calc_max_drawdown(df),
            'sharpe_ratio': self.calc_sharpe(df),
            'nav_series': df[['date', 'nav']]
        }
```

</div>
  </div>
</div>

## ğŸ–¥ï¸ PTradeå®ç›˜å¯¹æ¥

<div class="board-details">
  <div class="board-card">
    <h4>ğŸ–¥ï¸ PTrade BridgeæœåŠ¡</h4>
    <div class="board-content">

```python
# ptrade_bridge/main.py
from fastapi import FastAPI
from ptrade_sdk import PTrade

app = FastAPI()
ptrade = PTrade()

@app.get("/strategies")
def get_strategies():
    """è·å–ç­–ç•¥åˆ—è¡¨"""
    return ptrade.get_strategies()

@app.get("/backtests/{strategy_id}")
def get_backtest(strategy_id: str):
    """è·å–å›æµ‹ç»“æœ"""
    return ptrade.get_backtest_result(strategy_id)

@app.post("/strategies/deploy")
def deploy_strategy(strategy_id: str):
    """éƒ¨ç½²ç­–ç•¥åˆ°å®ç›˜"""
    return ptrade.deploy(strategy_id)

@app.get("/positions")
def get_positions():
    """è·å–å½“å‰æŒä»“"""
    return ptrade.get_positions()
```

</div>
  </div>
</div>

## ğŸ”® æ€»ç»“ä¸å±•æœ›

<div class="summary-outlook">
  <h3>æœ¬èŠ‚å›é¡¾</h3>
  <p>æœ¬èŠ‚ä»‹ç»äº†éŸ¬ç¿ç³»ç»Ÿçš„å›æµ‹å¼•æ“å’Œå®ç›˜äº¤æ˜“å¯¹æ¥ã€‚</p>
  
  <h3>ä¸‹èŠ‚é¢„å‘Š</h3>
  <p>ä¸‹ä¸€èŠ‚å°†å­¦ä¹ Cursor AIé›†æˆåŠŸèƒ½ã€‚</p>
  
  <a href="/ashare-book4/013_Chapter13/13.6_Cursor_Integration_CN" class="next-section">
    ç»§ç»­å­¦ä¹ ï¼š13.6 Cursor AIé›†æˆ â†’
  </a>
</div>













