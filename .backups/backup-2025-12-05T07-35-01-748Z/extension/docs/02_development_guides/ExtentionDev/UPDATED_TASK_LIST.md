# TRQuant Cursor Extension æ›´æ–°ä»»åŠ¡åˆ—è¡¨

> åŸºäºQuantConnectæ’ä»¶åŠŸèƒ½å¯¹æ ‡ï¼Œæ›´æ–°äº 2025-12-03

---

## ğŸ“Š å½“å‰çŠ¶æ€è¯„ä¼°

### âœ… å·²å®Œæˆï¼ˆä½†éœ€éªŒè¯ï¼‰

| åŠŸèƒ½ | æ–‡ä»¶ | çŠ¶æ€ | é—®é¢˜ |
|------|------|------|------|
| Extensionéª¨æ¶ | `extension.ts` | âœ… | éœ€è¦é‡æ–°ç¼–è¯‘ |
| è·å–å¸‚åœºçŠ¶æ€ | `getMarketStatus.ts` | âœ… | éœ€éªŒè¯ |
| è·å–æŠ•èµ„ä¸»çº¿ | `getMainlines.ts` | âœ… | éœ€éªŒè¯ |
| æ¨èå› å­ | `recommendFactors.ts` | âœ… | éœ€éªŒè¯ |
| ç”Ÿæˆç­–ç•¥(PTrade/QMT) | `generateStrategy.ts` | âœ… | éœ€éªŒè¯ |
| Python Bridge | `bridge.py` | âœ… | éœ€éªŒè¯ |
| MCP ServeråŸºç¡€ | `mcp_server.py` | âœ… | å·¥å…·ä¸å®Œæ•´ |
| é¡¹ç›®åˆ›å»ºå‘å¯¼ | `createProject.ts` | âœ… | æœªç¼–è¯‘æµ‹è¯• |
| é¡¹ç›®èµ„æºç®¡ç†å™¨ | `projectExplorer.ts` | âœ… | æœªç¼–è¯‘æµ‹è¯• |
| Dashboardé¢æ¿ | `dashboardPanel.ts` | âœ… | æœªç¼–è¯‘æµ‹è¯• |
| æ¬¢è¿ç•Œé¢ | `welcomePanel.ts` | âœ… | æœªç¼–è¯‘æµ‹è¯• |
| å›æµ‹å¼•æ“ | `backtest_engine.py` | âœ… | æœªé›†æˆæµ‹è¯• |

### âŒ å…³é”®ç¼ºå¤±ï¼ˆå¯¹æ ‡QuantConnectï¼‰

| QuantConnectåŠŸèƒ½ | TRQuantçŠ¶æ€ | ä¼˜å…ˆçº§ |
|------------------|-------------|--------|
| é¡¹ç›®æ¨¡æ¿ç³»ç»Ÿ | âš ï¸ åŸºç¡€å®ç° | P0 |
| **å®Œæ•´ç¼–è¯‘æµ‹è¯•** | âŒ æœªå®Œæˆ | **P0** |
| **å®‰è£…åŒ…ç”Ÿæˆ** | âŒ æœªå®Œæˆ | **P0** |
| ä¸“ä¸šå›¾è¡¨(ECharts) | âŒ ç¼ºå¤± | P1 |
| ç­–ç•¥è°ƒè¯•å™¨ | âŒ ç¼ºå¤± | P1 |
| å‚æ•°ä¼˜åŒ–å™¨ | âŒ ç¼ºå¤± | P1 |
| Walk-Forwardåˆ†æ | âŒ ç¼ºå¤± | P2 |
| å®ç›˜éƒ¨ç½² | âŒ ç¼ºå¤± | P2 |
| å®æ—¶æ•°æ®è®¢é˜… | âŒ ç¼ºå¤± | P2 |

---

## ğŸš¨ ç«‹å³éœ€è¦è§£å†³çš„é—®é¢˜

### é—®é¢˜1ï¼šç¼–è¯‘å¤±è´¥

å½“å‰æ–°å¢çš„æ–‡ä»¶å¯èƒ½æœªæ­£ç¡®ç¼–è¯‘åˆ°distç›®å½•ã€‚

**éœ€è¦æ‰§è¡Œï¼š**
```bash
cd /home/taotao/dev/QuantTest/TRQuant/extension
rm -rf dist node_modules
npm install
npm run compile
```

### é—®é¢˜2ï¼šTypeScriptå¯èƒ½å­˜åœ¨æœªå¯¼å‡ºçš„æ¨¡å—

æ–°å¢çš„viewså’Œserviceså¯èƒ½æœªæ­£ç¡®å¯¼å…¥åˆ°extension.ts

**éœ€è¦æ£€æŸ¥ï¼š**
- `welcomePanel.ts` æ˜¯å¦æ­£ç¡®å¯¼å‡º
- `dashboardPanel.ts` æ˜¯å¦æ­£ç¡®å¯¼å‡º
- `projectConfig.ts` æ˜¯å¦æ­£ç¡®å¯¼å‡º
- `backtestManager.ts` æ˜¯å¦æ­£ç¡®å¯¼å‡º

### é—®é¢˜3ï¼špackage.jsonå‘½ä»¤ä¸å®Œæ•´

éƒ¨åˆ†æ–°å¢å‘½ä»¤å¯èƒ½æœªæ·»åŠ åˆ°package.jsonçš„contributes.commands

---

## ğŸ“‹ æ›´æ–°åçš„å¼€å‘ä»»åŠ¡

### Phase 0: ç´§æ€¥ä¿®å¤ï¼ˆç«‹å³æ‰§è¡Œï¼‰

#### P0-001 ä¿®å¤ç¼–è¯‘é—®é¢˜
```
ä¼˜å…ˆçº§: ğŸ”´ ç´§æ€¥
é¢„è®¡å·¥æ—¶: 1å¤©

ä»»åŠ¡ï¼š
1. [ ] æ¸…ç†node_moduleså’Œdistç›®å½•
2. [ ] é‡æ–°å®‰è£…ä¾èµ–
3. [ ] ä¿®å¤æ‰€æœ‰TypeScriptç¼–è¯‘é”™è¯¯
4. [ ] éªŒè¯dist/extension.jsç”Ÿæˆ
```

#### P0-002 éªŒè¯æ‰€æœ‰å‘½ä»¤
```
ä¼˜å…ˆçº§: ğŸ”´ ç´§æ€¥
é¢„è®¡å·¥æ—¶: 1å¤©

ä»»åŠ¡ï¼š
1. [ ] åœ¨å¼€å‘æ¨¡å¼ä¸‹æµ‹è¯•æ¯ä¸ªå‘½ä»¤
2. [ ] ä¿®å¤è¿è¡Œæ—¶é”™è¯¯
3. [ ] éªŒè¯Python bridgeé€šä¿¡
4. [ ] éªŒè¯MCP Serverå¯åŠ¨
```

#### P0-003 ç”Ÿæˆå®‰è£…åŒ…
```
ä¼˜å…ˆçº§: ğŸ”´ ç´§æ€¥
é¢„è®¡å·¥æ—¶: 0.5å¤©

ä»»åŠ¡ï¼š
1. [ ] æˆåŠŸæ‰“åŒ…vsixæ–‡ä»¶
2. [ ] åœ¨å¹²å‡€ç¯å¢ƒå®‰è£…æµ‹è¯•
3. [ ] éªŒè¯æ‰€æœ‰åŠŸèƒ½å¯ç”¨
```

---

### Phase 4: å®Œå–„é¡¹ç›®ç®¡ç†ï¼ˆå·²éƒ¨åˆ†å®Œæˆï¼‰

#### P4-001 é¡¹ç›®åˆ›å»ºå‘å¯¼ âœ… å·²å®Œæˆ
- æ–‡ä»¶: `src/commands/createProject.ts`
- éœ€è¦: ç¼–è¯‘éªŒè¯

#### P4-002 é¡¹ç›®èµ„æºç®¡ç†å™¨ âœ… å·²å®Œæˆ
- æ–‡ä»¶: `src/views/projectExplorer.ts`
- éœ€è¦: ç¼–è¯‘éªŒè¯

#### P4-003 é¡¹ç›®é…ç½®ç®¡ç† âš ï¸ éœ€å®Œå–„
```
çŠ¶æ€: åŸºç¡€å®Œæˆï¼Œç¼ºå°‘å›¾å½¢åŒ–ç¼–è¾‘å™¨
éœ€è¦è¡¥å……ï¼š
- [ ] WebViewé…ç½®ç¼–è¾‘å™¨ï¼ˆéJSONç›´æ¥ç¼–è¾‘ï¼‰
- [ ] è‚¡ç¥¨æ± é€‰æ‹©å™¨ç»„ä»¶
- [ ] å›æµ‹å‚æ•°æ»‘å—é…ç½®
```

---

### Phase 5: æœ¬åœ°å›æµ‹ç³»ç»Ÿï¼ˆå·²éƒ¨åˆ†å®Œæˆï¼‰

#### P5-001 å›æµ‹å¼•æ“æ ¸å¿ƒ âœ… å·²å®Œæˆ
- æ–‡ä»¶: `python/tools/backtest_engine.py`
- éœ€è¦: é›†æˆæµ‹è¯•

#### P5-002 å›æµ‹ä»»åŠ¡ç®¡ç† âœ… å·²å®Œæˆ
- æ–‡ä»¶: `src/services/backtestManager.ts`
- éœ€è¦: ç¼–è¯‘éªŒè¯

#### P5-003 å›æµ‹ç»“æœç®¡ç† âš ï¸ éœ€è¡¥å……
```
çŠ¶æ€: åŸºç¡€å®Œæˆï¼Œç¼ºå°‘å¯¼å‡ºåŠŸèƒ½
éœ€è¦è¡¥å……ï¼š
- [ ] PDFæŠ¥å‘Šå¯¼å‡º
- [ ] Excelæ•°æ®å¯¼å‡º
- [ ] ç»“æœç‰ˆæœ¬ç®¡ç†
```

---

### Phase 6: ä¸“ä¸šå¯è§†åŒ–ï¼ˆæ ¸å¿ƒç¼ºå¤±ï¼‰

#### P6-001 å›¾è¡¨åº“é›†æˆ âŒ éœ€å¼€å‘
```
ä¼˜å…ˆçº§: P1
é¢„è®¡å·¥æ—¶: 5å¤©

ä»»åŠ¡ï¼š
- [ ] å®‰è£…echartsä¾èµ–
- [ ] åˆ›å»º src/views/chartPanel.ts
- [ ] å®ç°Kçº¿å›¾ç»„ä»¶
- [ ] å®ç°æ”¶ç›Šæ›²çº¿å›¾
- [ ] å®ç°å›æ’¤æ›²çº¿å›¾
- [ ] å®ç°å› å­çƒ­åŠ›å›¾
- [ ] å›¾è¡¨äº¤äº’ï¼ˆç¼©æ”¾ã€æ ‡æ³¨ï¼‰
```

#### P6-002 Dashboardå‡çº§ âš ï¸ éœ€å¢å¼º
```
çŠ¶æ€: åŸºç¡€å®Œæˆï¼Œç¼ºå°‘å®æ—¶æ•°æ®
éœ€è¦è¡¥å……ï¼š
- [ ] å®æ—¶è¡Œæƒ…ç»„ä»¶
- [ ] æŒä»“ç›‘æ§ç»„ä»¶
- [ ] WebSocketæ•°æ®æ¨é€
```

#### P6-003 æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿ âŒ éœ€å¼€å‘
```
ä¼˜å…ˆçº§: P1
é¢„è®¡å·¥æ—¶: 3å¤©

ä»»åŠ¡ï¼š
- [ ] è®¾è®¡æŠ¥å‘Šæ¨¡æ¿
- [ ] å®ç°å›æµ‹æŠ¥å‘Šç”Ÿæˆ
- [ ] å®ç°ç­–ç•¥åˆ†ææŠ¥å‘Š
- [ ] PDF/HTMLå¯¼å‡º
```

---

### Phase 7: ç­–ç•¥ä¼˜åŒ–å™¨ï¼ˆå®Œå…¨ç¼ºå¤±ï¼‰

#### P7-001 å‚æ•°ä¼˜åŒ– âŒ éœ€å¼€å‘
```
ä¼˜å…ˆçº§: P1
é¢„è®¡å·¥æ—¶: 5å¤©

ä»»åŠ¡ï¼š
- [ ] åˆ›å»º src/commands/optimizeStrategy.ts
- [ ] å‚æ•°ç©ºé—´å®šä¹‰ï¼ˆJSON Schemaï¼‰
- [ ] ç½‘æ ¼æœç´¢å®ç°
- [ ] å¹¶è¡Œä¼˜åŒ–ä»»åŠ¡
- [ ] 3Dç»“æœå¯è§†åŒ–
```

#### P7-002 Walk-Forwardåˆ†æ âŒ éœ€å¼€å‘
```
ä¼˜å…ˆçº§: P2
é¢„è®¡å·¥æ—¶: 4å¤©
```

#### P7-003 å› å­åˆ†æå·¥å…· âŒ éœ€å¼€å‘
```
ä¼˜å…ˆçº§: P1
é¢„è®¡å·¥æ—¶: 3å¤©
```

---

### Phase 8: å®ç›˜å¯¹æ¥ï¼ˆå®Œå…¨ç¼ºå¤±ï¼‰

#### P8-001 PTradeå®ç›˜éƒ¨ç½² âŒ éœ€å¼€å‘
```
ä¼˜å…ˆçº§: P2
é¢„è®¡å·¥æ—¶: 5å¤©

ä»»åŠ¡ï¼š
- [ ] åˆ›å»º src/commands/deployToPTrade.ts
- [ ] PTrade APIå¯¹æ¥
- [ ] ä»£ç æ ¼å¼éªŒè¯
- [ ] ä¸€é”®éƒ¨ç½²åŠŸèƒ½
```

#### P8-002 QMTå®ç›˜éƒ¨ç½² âŒ éœ€å¼€å‘
```
ä¼˜å…ˆçº§: P2
é¢„è®¡å·¥æ—¶: 5å¤©
```

---

### Phase 9: æ‰©å±•MCPå·¥å…·é›†ï¼ˆéœ€è¡¥å……ï¼‰

#### P9-001 è¡¥å……MCPå·¥å…· âš ï¸ éœ€æ‰©å±•
```
å½“å‰å·¥å…·ï¼š5ä¸ª
ç›®æ ‡å·¥å…·ï¼š12ä¸ª

éœ€è¦æ–°å¢ï¼š
- [ ] trquant_create_project
- [ ] trquant_run_backtest
- [ ] trquant_optimize_params
- [ ] trquant_get_realtime_data
- [ ] trquant_deploy_strategy
- [ ] trquant_get_portfolio
- [ ] trquant_compare_strategies
```

---

### Phase 10: æ•°æ®æœåŠ¡å¢å¼ºï¼ˆå®Œå…¨ç¼ºå¤±ï¼‰

#### P10-001 æ•°æ®æºç®¡ç† âŒ éœ€å¼€å‘
```
ä¼˜å…ˆçº§: P1
é¢„è®¡å·¥æ—¶: 4å¤©

ä»»åŠ¡ï¼š
- [ ] ç»Ÿä¸€æ•°æ®æºæ¥å£
- [ ] JQDataé€‚é…å™¨
- [ ] AKShareé€‚é…å™¨
- [ ] Baostocké€‚é…å™¨
- [ ] æ•°æ®ç¼“å­˜ç®¡ç†
```

---

## ğŸ¯ ç«‹å³æ‰§è¡Œè®¡åˆ’

### ä»Šæ—¥ä»»åŠ¡ï¼ˆDay 1ï¼‰

```bash
# 1. è¿›å…¥extensionç›®å½•
cd /home/taotao/dev/QuantTest/TRQuant/extension

# 2. æ¸…ç†å¹¶é‡æ–°å®‰è£…
rm -rf node_modules dist
npm install

# 3. ç¼–è¯‘å¹¶æŸ¥çœ‹é”™è¯¯
npm run compile 2>&1 | tee compile_log.txt

# 4. å¦‚æœç¼–è¯‘æˆåŠŸï¼Œæ‰“åŒ…
npx @vscode/vsce package --allow-missing-repository --no-dependencies

# 5. å®‰è£…æµ‹è¯•
cursor --install-extension trquant-cursor-extension-0.1.0.vsix
```

### æœ¬å‘¨ä»»åŠ¡ï¼ˆWeek 1ï¼‰

| æ—¥æœŸ | ä»»åŠ¡ | ç›®æ ‡ |
|------|------|------|
| Day 1 | P0-001 ä¿®å¤ç¼–è¯‘ | ç¼–è¯‘æˆåŠŸ |
| Day 2 | P0-002 éªŒè¯å‘½ä»¤ | æ‰€æœ‰å‘½ä»¤å¯ç”¨ |
| Day 3 | P0-003 æ‰“åŒ…å®‰è£… | vsixå¯å®‰è£… |
| Day 4-5 | P6-001 å›¾è¡¨é›†æˆ | EChartså¯ç”¨ |

### ä¸‹å‘¨ä»»åŠ¡ï¼ˆWeek 2ï¼‰

| ä»»åŠ¡ | ç›®æ ‡ |
|------|------|
| P6-003 æŠ¥å‘Šç³»ç»Ÿ | PDFå¯¼å‡º |
| P7-001 å‚æ•°ä¼˜åŒ– | ç½‘æ ¼æœç´¢ |
| P9-001 MCPæ‰©å±• | 12ä¸ªå·¥å…· |

---

## ğŸ“ éœ€è¦åˆ›å»º/ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

```
extension/src/extension.ts          # ç¡®ä¿æ‰€æœ‰æ¨¡å—æ­£ç¡®å¯¼å…¥
extension/package.json              # ç¡®ä¿æ‰€æœ‰å‘½ä»¤å·²æ³¨å†Œ
```

### éœ€è¦åˆ›å»ºçš„æ–‡ä»¶

```
extension/src/views/chartPanel.ts           # å›¾è¡¨é¢æ¿
extension/src/commands/optimizeStrategy.ts  # å‚æ•°ä¼˜åŒ–
extension/src/commands/deployToPTrade.ts    # PTradeéƒ¨ç½²
extension/src/commands/deployToQMT.ts       # QMTéƒ¨ç½²
extension/python/tools/optimizer.py         # å‚æ•°ä¼˜åŒ–å™¨
extension/python/tools/report_generator.py  # æŠ¥å‘Šç”Ÿæˆ
extension/webview/                          # WebViewç»„ä»¶ç›®å½•
```

---

## âœ… éªŒæ”¶æ ‡å‡†

### Phase 0 éªŒæ”¶ï¼ˆæœ¬å‘¨ï¼‰
- [ ] `npm run compile` æ— é”™è¯¯
- [ ] `vsix` æ–‡ä»¶æˆåŠŸç”Ÿæˆ
- [ ] å®‰è£…åæ‰€æœ‰å‘½ä»¤å¯è§
- [ ] ä¾§è¾¹æ æ­£å¸¸æ˜¾ç¤º
- [ ] æ¬¢è¿ç•Œé¢æ­£å¸¸æ˜¾ç¤º

### Phase 6 éªŒæ”¶ï¼ˆä¸‹å‘¨ï¼‰
- [ ] EChartså›¾è¡¨æ­£å¸¸æ˜¾ç¤º
- [ ] å›æµ‹æŠ¥å‘Šå¯å¯¼å‡ºPDF
- [ ] Dashboardå®æ—¶æ›´æ–°

### æœ€ç»ˆéªŒæ”¶ï¼ˆ4å‘¨åï¼‰
- [ ] å®Œæ•´çš„QuantConnectå¼å·¥ä½œæµ
- [ ] é¡¹ç›®åˆ›å»ºâ†’å›æµ‹â†’ä¼˜åŒ–â†’éƒ¨ç½²å…¨æµç¨‹
- [ ] AIèƒ½è‡ªåŠ¨è°ƒç”¨æ‰€æœ‰MCPå·¥å…·

---

*æ›´æ–°æ—¥æœŸ: 2025-12-03*
*ç‰ˆæœ¬: v3.0*







