中国A股量化投资系统架构设计方案
概述：  为构建面向中国A股市场的高标准量化投资系统，我们综合考虑交易通道选择、数据源、策略研发框
架、回测与风控设计、实盘执行架构、报告展示以及部署方案。下面将逐项说明各模块的设计方案和推荐理
由。
1. 券商与交易通道推荐
候选方案：  华泰证券 + QMT量化交易平台 vs. 国金证券 + PTrade量化交易平台。两者均为国内领先的量化实盘
工具，各有特点：
QMT（Quick Model Trade） 由迅投公司开发，是本地运行的专业量化交易软件，华泰等多家券商可用
。支持多市场多品种交易（股票、期货、期权、两融等） 。提供<1毫秒级的本地内存撮合交
易，延迟极低 。策略在本地编写和运行，安全性高且可利用本地高性能计算资源 。适合具备编
程能力、追求灵活控制和高性能的专业量化团队 。 
PTrade 由恒生电子开发，是部署在券商机房的云端量化交易平台，国金证券等券商提供 。策略代码
提交后在券商服务器上自动完成回测和实盘，全流程托管，7x24小时稳定运行 。由于托管于券
商核心机房，可直接连接交易所，订单响应速度毫秒级 。界面友好易上手，适合希望快速部署策
略、减少运维的新量化用户 。 
下表对比了两种方案的主要差异：
对
比
维
度华泰证券 + QMT  (本地量化终端) 国金证券 + PTrade  (券商云托管)
执
行
架
构本地运行，策略在用户电脑执行，撮合引擎内存级，
单笔下单延迟<1ms 。用户对硬件环境可完全掌
控。云端运行，部署在券商机房服务器，策
略托管执行，交易所直连实现毫秒级响
应 。用户无需维护硬件。
行
情
数
据推送式高速Level-2行情：全市场股票五档行情实时推
送终端，支持历史Tick和盘口回放 。可本地缓存行
情，稳定高效。券商提供免费Level-2实时行情，云端集
中处理，数据直接来自券商行情源，速
度快且免订阅费用 。
支
持
资
产
类
型支持 股票、期货、期权、两融、港股通、ETF、可转债
等全市场品种，跨市场交易一站式完成 。主要支持券商经纪业务范围内的品种
（以A股股票交易为主，视券商权限可能
扩展至股指期货等）。偏重股票现货交
易场景。• 
1 1
2 3
4
• 5
5 6
6
4
2
6
7
8
1 9
1
对
比
维
度华泰证券 + QMT  (本地量化终端) 国金证券 + PTrade  (券商云托管)
策
略
开
发本地 Python/VBA 双语言开发，内置策略编辑器和调试
工具，支持模块化策略编写与回测优化 。可在
miniQMT 模式下使用熟悉的IDE编写策略，通过
xtquant 库连接券商，实现“本地开发+实时交
易” 。能充分利用Python第三方库（如Numpy、
TensorFlow）扩展复杂策略 。策略以Python编写后上传托管，一键启
动后由系统自动完成历史回测、模拟测
试到实盘交易的闭环流程 。平台界面
简洁，开发流程与优矿等云平台类似，
上手难度低 。无需本地IDE，直接在
券商提供的环境中编写或提交策略。
安
全
性策略代码和数据均保存在本地，经过多重加密保护，
确保策略不外泄 。本地运行避免他人接触策略核心
逻辑。策略代码存放并运行在券商服务器上，
需信任券商的安全隔离措施。券商一般
具有严格风控和权限管理，但代码不在
本地主控，相对而言策略隐私依赖于托
管方保障。
运
行
维
护需要自行搭建并维护运行环境。对电脑配置要求较高
，需确保本地服务器稳定在线。如果本地设备故障
或断网，交易可能中断，因此运维压力在用户侧。券商机房专业维护，7x24稳定运行，无
需盯盘 。不需要关心电力、网络、中
断等问题。交易环境升级和维护由券商
负责，用户运维负担小。
交
易
速
度本地撮合+券商通道，因采用内存撮合和高速API，下
单速度极快，瓶颈仅在网路传输（可通过申请券商VIP
通道降低延迟）。适合需要极低延迟的策略。由于运行在券商内网并直连交易所，订
单发送路径更短，无公网传输延迟，速
度非常快 。在日频策略场景下，两者
速度差异可忽略，但在子毫秒级别
PTrade理论上更具优势。
适
用
用
户注重策略 灵活性和专业性能 的量化团队。有较强IT开发
能力，愿意投入硬件和运维，以获取本地高性能和对
策略的完全控制 。也适用于未来计划运行复杂
模型、高频策略的用户。更看重 部署便捷和稳定托管 的用户。适
合量化初学者、小型团队或不具备运维
条件的团队，用最小的开发运维成本实
现策略上线 。策略主要为中低频交
易，希望“无人值守”地持续运行。
推荐选择：  鉴于本系统优先强调效率与专业度，以及未来可能扩展更复杂的策略，我们倾向选择 华泰证券  +
QMT方案 作为主要实盘平台。QMT提供的本地高性能环境和多市场支持，为后续引入机器学习、组合优化等复
杂策略预留了充分空间 。在资金规模和交易频率适中的情况下，本地部署带来的灵活性优于云托管方案。
同时，华泰证券作为业内顶级券商，技术和服务成熟，支持迅投QMT等专业量化工具。我们建议在开户时申请
量化交易专属通道 （如华泰极速柜台、VIP通道）以及Level-2高速行情服务，以确保交易指令高速稳定传输
。
国金证券  +  PTrade亦是可行方案，特别是如果团队希望降低基础设施运维压力。国金在量化领域服务友好，佣
金和通道优惠力度大。如果选择PTrade，可获得券商机房托管的便利和免费高速行情 。不过PTrade环境对
自定义扩展略有局限，对于需要自由调用外部数据、第三方库的策略，可能不如QMT灵活。综合考虑，我们优
先采用 华泰+QMT 作为实盘交易渠道，并将其作为系统核心。但也可以在国金券商开立备用账户，日后视情况
使用PTrade做策略托管冗余，以增加系统弹性和容灾能力。
(注：开通QMT或PTrade通常需要一定资金门槛，例如约10万元资金 。当前账户资金60万已满足条件，可通
过券商客户经理申请相关量化平台权限。)10
11
115
4
3
45
6
1244
12
13
8
14
2
2. 数据源选型
构建高质量的量化投资系统离不开 全面可靠的数据源 。本系统所需数据包括行情数据、财务基本面数据、估值
指标、量化因子和行业分类等。我们的选型及方案如下：
市场行情数据： 使用券商提供的实时行情作为主要数据源。QMT/PTrade均提供免费的全市场Level-2行
情推送，涵盖沪深A股全部股票的五档行情，推送速度快、延迟低 。在实盘中，这将作为实时行
情输入，确保策略获取高质量的市场数据。在研究和回测阶段，我们还需要历史行情数据（日线为主，
可能包括分钟线以备扩展）。推荐订阅 万得 Wind 等专业数据服务，其行情接口覆盖A股Tick级别、分钟
K线、日线等历史数据 。Wind的数据稳定且准实时更新，能够为回测提供准确的行情序列。此
外，可将行情数据存入本地数据库或文件缓存，方便快速读取和反复使用（例如使用PostgreSQL/
ClickHouse存储OHLCV数据，或利用HDF5/Parquet文件存历史K线）。在预算充足情况下，Wind或同
级别的数据源（如同花顺 行情Level-2 或聚宽JQData）是理想选择；在初期验证时也可借助 TuShare
Pro 等开源数据接口获取部分免费/低成本的行情数据用于开发测试。
财务及基本面数据： 量化选股和因子研究需要深入的上市公司财务数据（财报指标、盈利状况、资产负
债等）以及宏观基本面信息。 Wind金融终端/API 是此领域的权威数据源，提供全面的A股财务数据和研
报指标 。Wind的参考数据几乎覆盖了A股所有上市公司历年的财务报表、经营指标，数据清洗完备
且更新及时，对于构建基本面因子、估值模型非常有利 。我们建议订阅Wind的财务和经济数据库，
以获取准确的财务指标（如每股收益、净资产收益率ROE、营收增长率等）。Wind还包含上市公司公
告、新闻等资讯，有助于后续扩展事件驱动策略。作为补充或备选，可考虑 东方财富Choice 数据、 聚源
数据库 等国内常用的数据服务。如果预算有限，也可以通过TuShare等获取部分财务数据（TuShare提
供了上市公司业绩、财务主要指标数据），但需要注意免费数据的及时性和准确性不如专业付费数据。
在数据选型上，我们优先Wind等高品质源，以保证策略研究结论的可靠性。
估值指标数据： 估值类数据（PE市盈率、PB市净率、股息率、EV/EBITDA等）可由行情和财务数据计算
得到，也可以直接从数据服务商处获取已有指标。Wind数据库直接提供A股全市场的估值指标快照和时
间序列，可以方便地提取某一日期的市盈率中位数、行业估值水平等信息 。在本系统中，我们计划
对接Wind的估值数据接口，定期更新各股票的PE(TTM)、PB以及相对市场或行业的百分位指标，供策
略选股或风险控制使用。如果不使用Wind，也可通过编程实时计算：比如从行情数据库提取股价、市值
和财务数据库提取净利润、净资产，然后计算估值比率。这需要处理数据的有效性（如亏损公司的PE为
负等情况）。鉴于效率，我们倾向直接使用成熟数据源的估值字段，并做自校验。 估值数据 对于多因子
模型很重要，我们会确保其准确和可追溯（例如对极端值公司进行排查）。
量化因子数据： 动量和多因子策略依赖于构造各种alpha因子。我们将建立 内部因子库 ：包括动量类技
术因子（如过去N月收益、均线偏离等）、基本面因子（如盈利质量、成长性指标）、情绪类因子等。
因子的原始数据大部分来自前述行情和财务源，我们会通过批量计算生成。由于不考虑预算限制，也可
考虑引用专业机构的现成因子数据以作参考或校验。例如，Wind提供了 量化因子库 ，涵盖技术面、基本
面等众多因子 ；学术机构如中证指数公司/国泰安也有中国市场因子数据。对于初期的动量+多因子
策略，我们将重点构造 价格动量因子 （如3个月动量、12-1反转因子）和 基本面因子 （如市值、价值、
质量类因子）。这些可用公开经典定义自行计算，也可通过Wind的一键因子提取功能获得横截面因子
值。未来扩展方面，如需加入 另类数据因子 （例如基于新闻舆情、网络搜索指数等），可以接入专门的
数据源：Wind已开始提供部分舆情数据、ESG及其他另类数据集 。我们会保持框架开放，支持导入
CSV/数据库的自定义因子，以便将来融合NLP情绪分数、卫星数据指标等新因子。
行业分类标准： 为了在多因子选股中进行行业中性化处理、分组比较，以及监控组合的行业暴露，我们
需要采用权威的行业分类体系。一方面，券商研究和指数普遍使用 中信证券行业分类 （30个一级行业）
或申万行业分类 （申万一级28个行业）作为标准。很多国内机构更偏好使用申万分类，便于横向对比
。中信分类则在量化中也广泛应用，并有对应的行业指数供参考。我们计划选取 申万行业分类 作为
基准分类体系（例如使用申万2021版的一级行业划分），并获取每只股票的行业归属。获取方式可以通• 
7 8
15 16
• 
17
16
• 
16
• 
16
18
• 
19
3
过Wind专业数据（Wind提供股票所属申万行业、中信行业的历史变迁信息），或者通过TuShare Pro的
接口直接获取申万分类数据 。一旦选定分类标准，系统中将统一使用，用于因子计算（如行业中性
化处理）、风险暴露监控（如避免过度集中单一行业）等。我们也会留意行业分类的调整（例如申万不
定期更新行业定义），及时更新映射，确保分类的准确性和前后一致。对于回测历史，需要注意某些股
票跨行业变更的情况，我们考虑使用 恒定分类口径 （按最新行业追溯历史）以简化处理。
数据质量与频率： 在数据源选型中，我们始终强调 专业、稳定、准确 。Wind等数据源经过严格
质检 确保数据完整性和正确性，这对量化研究至关重要。我们将建立数据更新流程：行情数
据实时更新，日线级别数据每日收盘后获取；财务数据每季度财报发布后及时刷新（并考虑财报
滞后影响）；因子数据定期批量计算更新。所有数据获取过程增加校验，如检查股票数量是否匹
配预期、财务指标缺失值、极端异常值等，发现问题及时与数据商沟通或手工修正，保证进入策
略的原始数据可靠无误。
3. 策略开发框架设计
总体架构： 策略开发采用模块化、可扩展的框架设计，以便支持未来更复杂的策略类型。我们选用Python作为
主要开发语言（用户开发环境基于Cursor智能IDE），结合良好的代码组织和库支持，实现从数据处理到交易执
行的流水线式框架。核心模块划分如下：
数据层（Data Layer）： 负责连接各数据源并提供标准化的数据接口给策略使用。我们将编写数据接口
类对接行情数据、财务数据、因子库等，使策略获取数据时无需关心底层来源。例如实现一个
MarketDataProvider 类，从本地行情数据库或券商API读取所需的价格数据；
FundamentalDataProvider 从Wind提取财务指标。数据层还负责基础的预处理，如对原始数据对齐、
填充缺失值、处理复权等。通过将数据获取封装起来，未来如果更换数据源（例如改用另一个API）或
增加新数据类型（如新闻情绪），只需扩展数据层而不用修改策略逻辑。数据层模块会以 时间序列 和截
面数据 两种形式提供接口：如提供某支股票的历史序列，或某一时点全市场截面因子值矩阵等，方便多
因子模型的计算。
信号层（Alpha/Signal  Layer）： 在这一层实现具体的策略逻辑，包括因子计算、信号生成和调仓决
策。我们会设计 因子库模块 ，用于计算各种因子值。例如动量策略需要计算过去N日的累计收益率作为
动量因子，基本面多因子策略需要计算市盈率、盈利增速等因子。本模块将利用数据层提供的原始数据
计算因子，并支持组合多个因子产生综合评分。一个常见设计是 Pipeline流水线 ：先计算每个股票的一
系列因子，然后按照预先设定的因子权重或模型得到每只股票的综合得分，再根据得分排序产生选股信
号。我们的框架将因子计算和组合封装为可插拔的组件。例如，可以有一个 MomentumFactor 类和
ValueFactor 类，各自计算动量和价值评分，再有一个 CombinedSignal 模块将多个因子按照配置的权
重合成为总分。这样要新增一个因子，只需新增对应类并在组合配置中加入即可，无需大改代码。此
外，信号层还可以容纳更复杂的模型：例如NLP情绪分析模型、机器学习预测模型等。由于QMT（尤其
miniQMT模式）支持直接调用本地Python库运行策略 ，我们可以在策略中自由集成 第三方机器学习
库（如scikit-learn、PyTorch）来训练或调用模型，从而支持日后将 深度学习模型 融入选股信号。这种
开放性确保框架对策略复杂度有足够扩展空间。
组合构建与仓位管理层（Portfolio Construction/Risk Layer）： 生成股票买卖信号后，需要决定具体
的持仓组合和交易计划。本层负责将原始信号转化为最终的投资组合，考虑风险约束和仓位分配。例
如，多因子选股策略可能选择评分最高的前50只股票作为投资组合，本层将根据评分确定选股名单，并
设定每只股票的权重（可以简单等权重，或者按评分比例/市值加权等方式）。在设定权重时，纳入风险
控制因素，如行业中性约束（使投资组合在行业层面与基准接近）、单只股票权重上限（避免过度集
中）、交易成本考虑等。我们将引入一个 风险模型组件 ，例如基于行业和市值因子的协方差模型，来估
算组合的风险暴露，指导仓位调整。本层也涵盖仓位管理逻辑，如跟踪现有持仓，对比目标持仓计算调
仓指令。对于中低频策略，每日调仓前会计算新的目标组合，然后与当前持仓比较得到需要买入/卖出的
数量。本层需要处理 交易成本 和流动性 因素：例如若某股票信号变化要求大幅加仓，但考虑其流动性可19
20
• 
• 
11
• 
4
能分几天执行。本模块可以制定 交易计划 （如分批交易）。另外，如果未来使用投资组合优化技术（例
如均值方差优化、CVaR优化），可在本层集成优化算法模块，通过给定的预期收益（因子信号）和风险
模型计算最优组合权重。我们预留接口以便将来接入诸如cvxpy/Gurobi等优化库来解优化问题，实现更
复杂的组合优化策略。
执行层（Execution  Layer）： 执行层负责将组合层提出的交易计划付诸市场交易，包括下单、成交回
报处理和交易异常处理。执行层与具体券商交易API对接。对于QMT方案，我们将使用迅投提供的
xtquant  Python交易接口，将生成的交易指令通过API发送到券商柜台 。在框架设计上，我们会实
现一个 订单管理模块 （Order Management System, OMS），统一处理下单请求：接收来自组合层的买
卖指令列表，逐笔通过API下单，并维护订单状态。OMS模块将为每个订单记录委托编号，跟踪其成交
回报，未成交部分等，并及时反馈给上层（例如更新持仓和资金可用情况）。执行层还包含 风控检查
（与风控模块联动，详见下一节），在订单发送前调用风控模块进行规则校验，只有通过的订单才能发
送，从而在实盘中杜绝明显违规或风险过高的交易 。执行层也要处理 异常情况 ：例如下单被拒
绝、网络中断、券商接口超时等。这需要相应的异常处理代码，确保一旦出现问题能够自动重试或安全
停止。由于我们采用模块化设计，执行层的券商接口是可替换的。如果将来接入其他券商或交易渠道，
只需替换这一层的API实现而不影响上层策略逻辑。
其他辅助模块： 包括参数配置管理、日志和监控模块等。参数管理用于集中管理策略参数（因子权重、
选股数量、风控阈值等），方便调优和不同策略间共享配置。日志模块会记录策略运行过程中的关键信
息（如因子值快照、选股结果、下单情况），便于调试和追责。监控模块可在策略运行时对关键指标实
时监控（比如监视是否偏离目标仓位、检查程序是否卡死等），在发现异常时通知开发人员。所有这些
辅助模块提升了系统的 可维护性和团队协作 效率。
框架特色： 这样的分层设计确保 高内聚、低耦合 。数据、信号、风险、执行各司其职，使得修改某一部分时对
其他部分影响最小。例如，可以方便地替换因子或模型而不必重写交易接口；更换券商API也无需修改策略逻
辑。这种灵活性使得我们能快速尝试新策略想法，这对于量化研究至关重要。同时，利用miniQMT模式，我们
在本地IDE中开发调试策略，享受完善的Python生态（科学计算库、机器学习库等）的支持 。开发好之后，
通过接口部署到交易系统上即可，实现“ 一次开发，随处运行 ”的体验 。框架还考虑了未来 扩展性 ：无论
是加入新的因子、替换为更先进的选股模型，还是增加新的策略模块（如择时模型、期货对冲模块），都可以
在现有框架上拓展实现，而无需推倒重来。
4. 回测引擎与风控模块设计建议
回测引擎设计：
我们需要一个 准确、高效、功能完善 的回测引擎来评估策略历史表现。考虑到A股市场特性（如涨跌停板限制、
交易费用、分红送配等），回测引擎必须精确模拟实际交易细节。设计上有两种方案并行参考：
利用券商平台自带的回测功能：  QMT平台内置了强大的本地回测引擎，支持从Tick到日线多粒度的数据
回测和丰富的绩效指标输出 。PTrade平台则能在券商服务器上自动执行历史回测以验证策略 。
我们可以在策略开发的初期借助这些自带工具快速检验策略有效性。例如，将策略代码加载到QMT模型
研究模块，对接其历史数据，即可获得回测结果和指标（年化收益、最大回撤等) 。这种方式便利且
速度快（QMT回测引擎支持多线程并行加速 ）。不过，券商平台回测有一定封装，可能对策略复杂
行为的定制支持有限。因此我们会 将券商回测作为辅助验证 ，主要在策略雏形阶段使用，确保与我们自
研回测结果一致，从而双重验证模型正确性。
开发自研回测系统：  为了更灵活地支持各类策略研究，我们计划搭建自己的回测模块，集成在Python
研究环境中。一种方式是 使用开源框架 为基础，例如 Backtrader 、Zipline 或微软开源的 QLib 平台。
QLib是专为AI量化研究设计的开源平台，支持从因子研究到预测模型训练、回测的一整套流程，并针对
中国市场有一定适配。这些框架可以加速开发，但也需要二次开发以满足A股特有规则。我们也可选择
自行开发 轻量级回测引擎，针对日频交易做简化假设提高性能。具体来说，自研引擎将采用 事件驱动 模• 
11
21 22
• 
11
11
• 
23 5
23
24
• 
5
式：按照交易日序列迭代，每个交易日事件触发策略信号计算，然后生成交易指令并模拟撮合成交。引
擎需要维护投资组合状态（持仓、现金），根据当天行情决定订单能否成交及成交价格。例如，考虑涨
跌停板：若策略下达买入价高于涨停价，则实际只能以涨停价成交或者无法成交，需要引擎判断。类似
地，若卖出时遇跌停可能无法全额卖出，回测需模拟这些约束。 交易成本 也会在回测中纳入，包括佣金
（假设万2.5或团队实际费率）、印花税（卖出千分之一）以及滑点。滑点模型可以简单取固定的买卖价
差，或基于成交量占比模拟市场冲击。
自研回测系统还应支持 参数化和批量回测 ，便于策略优化。我们将实现可以批量跑不同参数组合甚至不同策略
的功能，以选取最优参数或比较策略效果。此外，回测系统会输出详细的日志和结果，例如每日持仓、每日交
易列表，方便进一步分析。对于绩效评估，我们会计算 常用指标 ：年化收益率、夏普比率、最大回撤、卡玛比
率等，以及 收益曲线 和回撤曲线 等图表。可以集成像 Pyfolio 或QuantStats 之类的Python库来生成专业的策略
报告（这些报告涵盖各类风险调整指标、月度盈亏、收益分布等）。总之，回测引擎的目标是尽可能逼近真实
交易结果，从而让我们在实盘前充分发现策略问题并加以改进。
风险控制模块设计：
风控制度在量化交易系统中至关重要，我们将建立一个 多层次的风控模块 ，在回测和实盘中均发挥作用，确保
策略运作在可控风险范围内 。风控模块主要涵盖 事前 、事中 、事后 三个阶段的风险管理：
事前风控（交易前检查）： 在每次调仓下单之前，系统会对拟执行的交易指令进行合规性和风险阈值检
查 。例如：
仓位限制： 检查调仓后单只股票持仓占比是否超过预先设定上限（比如不超过投资组合的10%），多只
股票集中度是否过高。若某一股票计划买入后仓位超限，风控模块可自动削减订单量至上限以内。
交易额度限制： 设定每日交易金额或委托笔数上限，防止因程序故障无限制地下单。比如每日单只股票
成交金额不超账户净值的一定比例，过大的委托将被拒绝 。
价格合理性检查： 防止以明显不合理的价格下单。如买入价相对于最新市价偏离超过一定阈值（例如
5%）则判定异常 。特别地，避开涨跌停板附近不恰当报单：买单高于涨停价、卖单低于跌停价
的指令应拦截 。风控模块将动态获取当前行情价格范围，计算允许的价格区间并调整委托价到合理
范围内。
黑白名单： 支持设置股票交易黑名单和白名单 。黑名单中的标的不允许交易（例如问题股、策
略不熟悉的股票暂不交易），白名单则是只允许特定股票交易（可用于策略试运行阶段限制交易标的范
围）。
杠杆与资金检查： 如果使用两融或衍生品，限制融资杠杆倍数，检查保证金充足率等，确保不会过度杠
杆导致风险失控 。
模型有效性： 从策略逻辑上看，如果某次调仓计算出的目标仓位或交易量与常理相差太大（比如模型错
误导致建议买入总市值远超可用资金），风控应能检测出异常并阻止执行。这可以通过设定阈值或者规
则来实现（例如单次调仓换手率不得超过组合的X%等）。
事前风控的总体目标是“ 防患于未然 ”，在交易指令真正发出前尽可能过滤掉违背风险规则的操作 。这些
规则阈值将根据策略历史波动和团队风险偏好设定，并可在实践中逐步校准 。
事中风控（实时监控）： 在交易执行过程中以及持仓期间，风控模块会 实时监测 风险指标和异常情况
。对于日频策略，实时监控主要体现在盘中监控和日终监控两个层面：
盘中监控： 在交易时段，实时跟踪账户的资金使用、持仓市值变化以及未成交委托情况。一旦出现异常
（例如某只持仓突然临时停牌，导致无法卖出；或某股票盘中大幅波动超出预设范围），风控模块将立
即告警，甚至采取动作（例如触发快速卖出其他相关持仓降低风险）。对于可能的 自成交 情况，在多策
略或多账户下也需监控，避免策略在同一账户内出现对倒委托 。另外，如果系统采用逐笔撮合，风
控模块需监控 撤单频率 和委托流量 ，防止因程序bug造成过度报撤单 ——券商往往对撤单频次和
订单流量有风控限制，我们的系统要确保遵守这些要求。
持仓风控： 持续计算当前组合的风险暴露指标，如当日浮动损益、累计盈亏、行业集中度、因子敞口
等。一旦发现超过预警阈值（例如单日净值回撤超过2%），系统可以触发预警通知团队，并根据预先
策略决定是否减仓止损 。我们计划实现 动态止损/止盈 机制：比如某日组合亏损超过X%，系统提示22
• 
22
• 
• 
25
• 
26 27
28
• 29 30
• 
31
• 
21
32
• 
22
• 
33
34 35
• 
36
6
人工确认是否暂停策略或降低仓位；反之盈利达到Y%也可考虑落袋一部分。这些属于策略层面的风控措
施，需和具体策略逻辑配合设计。
自动纠错与容错： 事中风控也涵盖系统层面的监控。如果交易模块发生异常（如某笔订单长时间无回
报、或者程序出现未捕获的错误），风控模块应该检测到（通过心跳检测或超时检测）并采取行动。例
如尝试撤销挂单、重启交易连接，或在必要时切换到备用系统。
实时风控强调 快检快处 ,  力争在风险扩大会导致严重后果前就及时干预或预警 。这要求风控模块高度稳定、
低延迟并与交易执行紧密结合。
事后风控（交易后评估）： 交易日结束后，风控模块对当日交易和持仓风险进行 分析和记录 。主要
措施包括：
交易日志审查： 核对所有交易与风控规则日志，检查是否有任何异常委托被拦截、预警触发的情况，并
验证风控规则是否如预期发挥作用。所有被拒交易、超限情况都会在日志中有记录，便于事后改进策略
或调整风控参数。
风险报告生成： 提取当日组合风险指标，生成报告（这部分可与报告展示层结合）。报告包括账户当日
盈亏、最新净值，持仓分布，主要风险指标如Beta、VAR估算等。如果某些风险指标超出设定范围，需
要在报告中标示并说明原因。
策略回顾与优化： 风控模块将累计交易数据用于风险模型的持续校准。例如根据历史交易行为，调整撤
单频率限制、单日交易额限制等参数更贴近实际需要 。如果发现某类风险频繁出现（如某行业仓位
经常超标），这可能需要反馈到策略层面进行调整（例如降低该行业在模型中的权重）。
数据留存和追溯： 风控模块会保存完整的历史风险数据和交易记录，做到有迹可循。这在需要 追溯 时非
常重要，比如监管要求下需要证明策略合规性，或团队内部复盘时分析某次异常交易的前因后果 。
我们将把风控相关的数据存档，定期备份，确保安全。
通过上述多层次风控体系，我们力求实现 交易全过程 的风险管控：从源头防止不当交易发生，过程中监控并及
时响应，事后总结改进 。特别值得一提的是，我们的风控模块会同时应用于回测和实盘。回测中的风控
可检验策略历史上是否经常触碰风控红线，从而指导策略优化（例如某因子策略如果频繁违反某风险约束，可
能需要降低该因子暴露）。实盘中的风控则保障实时安全，让系统在高自动化运行的同时保持 稳健性 。
另外，我们也会利用券商提供的风控/合规接口（如QMT支持账户和账号组多层次风控设置 ），与我们
自有风控形成双保险。券商层面的风控（如账户资产不足禁止下单等）提供底线保障，我们的风控模块则可以
更严格、更个性化地管控策略行为。两者结合将筑牢系统的风险防线。
5. 实盘执行系统架构
实盘执行系统是将策略信号转化为实际交易的“最后一公里”。我们设计一个 稳健高效 的执行架构，涵盖指令
处理、下单接口、反馈处理和异常应对。
指令流流程：
信号生成与交易决策： 策略在指定调仓时间点生成交易信号。例如日频策略通常在收盘后或次日开盘前
产生新的目标持仓和交易指令列表。假设策略决定增加A股票仓位5%，减少B股票仓位3%。这些决策以
一种中间表示记录，如“Buy 1000股 Stock_A”或“Sell 500股 Stock_B”。
订单管理与分单策略： OMS（订单管理系统）接收策略信号后，会根据当前持仓和目标持仓差异生成具
体订单 。若交易量较小且股票流动性好，可直接生成一次性市价/限价单完成交易。若交易量较大或市场
容量有限，我们可能采用 分批下单 策略。OMS可拆分大订单为多笔小单，设定在不同时段或价格执行，
以降低冲击。例如利用前一日成交量的X%作为单笔委托上限，分批执行。对于动量策略，也可能需要
算法交易手段，我们可以借助QMT内置的算法交易模块（如TWAP、VWAP随机算法）来执行大额订单
。订单管理模块还会为每笔委托赋予唯一ID，进入 订单队列 等待发送。• 
37
• 38
• 
• 
• 
32
• 
38
39 22
39
39 40
1. 
2. 
41
7
风控复核： 在正式向券商交易接口发送订单前，订单数据会传递给风控模块进行最后检查（实盘中这一
过程非常快，毫秒级即可完成）。如风控发现某订单违反规则（例如下单金额超出单日限额、买入价格
不在允许范围等），该订单将被标记拒绝或调整后再发送 。通过这一道关卡，确保了异常订单
不会进入市场。合格的订单则进入下一个阶段。
通过API下单： 系统根据所选券商渠道调用相应的交易API发送订单。对于华泰+QMT方案，我们使用迅
投xtquant  Python接口，连接登录券商交易服务器，然后调用例如 order_buy('Stock_A',  1000,  
price)的方法下达买单 。由于我们运行的是miniQMT极简模式，指令实际上通过本地Python直连
券商柜台，速度快且无需人工干预 。对于PTrade方案，策略部署后订单发送由券商的后端系统负
责，我们只需确保策略代码正确提交触发交易，券商系统会自动下单并执行 。无论哪种模式，我们
都会收到券商返回的下单结果（下单成功与否，订单号等）。 特别 ：为了提高鲁棒性，我们会对每个下
单请求设置 超时和重试 机制。如果API在预期时间内未返回（可能网络波动），系统可以尝试重发或切
换到备用线路，以免遗漏交易时机。
成交回报处理： 券商柜台会推送订单成交回报信息，包括成交数量、成交价、剩余未成交量等。执行系
统需要实时接收这些回报并更新组合状态。例如，买单部分成交，则更新对应股票持仓增加相应数量，
同时剩余委托继续等待成交或判断是否撤单。若使用QMT，本地会收到终端回报事件，我们可以注册回
调函数处理；PTrade则通过接口查询或回调获取成交信息。 部分成交与撤单策略： 在日内，如果有委托
长时间未成交，我们需要根据预设逻辑处理。可以选择 撤单重发 （如撤掉未成交部分，改用更积极的价
格重新下单），或者 顺延 （允许未成交部分保留到收盘前自动撤销）。这些策略需结合具体股票流动性
和策略急迫性决定。对于日终未成交的委托，我们一般在收盘前强制撤单，避免过夜挂单。
持仓和现金更新： 随着成交回报流入，执行系统不断刷新账户持仓和现金余额。这些信息反馈回策略模
块用于后续决策（例如下一交易日的信号计算需要知道最新持仓）。我们会维护一个实时的账户状态对
象，记录当前各股票持有量、持仓成本价、现金余额可用情况等。这对风控监控（如融资融券余额、可
用资金）也很重要。
风控与执行融合： 风控模块在执行阶段不仅仅事前检查，也可能 实时干预 。例如，如果某一订单挂出后市场情
况突变（如大盘突然跳水导致风险剧增），风控可以决定 撤销尚未成交的订单 以收缩风险暴露。这需要执行系
统提供撤单接口，并允许风控触发。我们将实现一个撤单函数，可根据订单ID随时取消挂单，并更新状态。在
极端情况下（如发现策略失控疯狂下单），风控模块甚至可以向执行系统发出 “紧急停止” 指令，暂停所有交
易活动并撤销所有挂单，等待人工检查。这相当于添加一层“安全闸”。
异常处理与容错： 实盘环境中各种意外都可能发生，我们为此设计多重保障： - 网络与连接异常： 如果本地与券
商服务器的网络连接中断或延迟严重，系统首先在程序上检测心跳超时，然后尝试重连。一段时间无法恢复
时，进入降级策略：如通知运维人员，同时备切换到备用网络（比如4G备线）或备用交易终端。如果使用云服
务器部署，本身网络较可靠，但也需要考虑万一云服务故障的预案（例如准备一个本地机器可随时接管）。 - 券
商柜台故障： 券商交易系统若出现故障（交易API长时间无响应、大面积拒单等），我们需要识别这种情况。这
时候策略可能需要 停止发单 ，以免错误扩散。同时立即通知人工，通过人工手段（例如电话下单或另一券商账
户）对关键仓位进行风险处理。在历史上券商柜台故障极少但不能不预防，我们会与券商量化团队保持沟通，
及时获取故障通知并采取措施。 -  系统自身异常： 如程序bug导致进程崩溃，为防止交易中断，我们考虑部署 冗
余实例 。例如运行两个策略实例，一个主用一个备用；主实例正常工作时备用监听关键参数不实际下单，一旦
主实例停止，备用立即接管（需要确保不会双重下单）。这种主备架构较复杂，初期可只实现基本的Crash监
测，然后人工介入。随着系统成熟，再完善自动故障切换机制。 - 交易错误处理： 包括下单被拒绝（可能因账户
资金不足或风控限制）、订单撮合错误等情况。我们在交易API返回中检查每笔委托状态，若发现被拒，将日志
记录具体原因（券商通常会给出错误码），并对当次交易做出相应调整。例如资金不足则停止进一步下单或减
少下单量。对于超买超卖（自成交）等错误，正常情况下我们的风控已避免此类情况发生 ，若发生也应立
即撤销相关订单并纠正策略。 - 信息同步与人工接口： 执行系统将提供实时监控界面（后述），团队可以随时看
到当前订单队列和成交状况。如果发现异常，人工可以通过界面或命令介入，例如手动触发撤单、暂停策略
等。我们会设定人工干预的权限和流程，确保紧急情况下团队成员能快速接管控制权。3. 
42 43
4. 
11
44
5
5. 
6. 
33
8
总结执行架构 ：整体来说，实盘执行由“策略信号 -> 订单生成 -> 风控审核 -> 券商下单 -> 成交回报 -> 状态更
新”这一流水线贯通。各环节有校验、有反馈，并设置了多种错误处理机制，保证交易按策略意图进行的同
时，将偏差和风险降到最低。特别地，借助券商提供的 高速交易通道 和我们自建的 OMS+风控 系统，整个交易
流程既快速又稳健，能够满足日频策略的执行要求和风控要求。在系统设计上注重松耦合和可观测性，各模块
出问题时不会影响其他模块的运行，并能及时暴露给监控系统，从而实现 高可用性 的目标。
6. 报告与展示层设计
一个高标准的量化系统需要将策略表现和运行状况 清晰直观地呈现 给团队，这离不开完善的报告与可视化展示
层。我们将构建多种形式的报告和看板，供研究分析和实时监控使用，并支持团队协作查看。
策略研究报告（离线分析）:  每当我们完成一次策略回测或阶段性分析后，系统应生成一份 富文本HTML
报告 ，总结策略的历史绩效和特征。这份报告类似于基金季报或研究报告，包含以下内容:
总体绩效指标:  例如年化收益率、年化波动率、夏普比率、最大回撤、Calmar比率、信息比率等，以表
格形式给出，方便与基准比较。
收益曲线图:  绘制策略净值曲线与基准指数的对比图，从起始日期到结束日期的累计收益走向。一目了
然地展示策略增长过程。还会配套绘制回撤曲线，突出历史上经历的回撤幅度和持续时间。
分阶段绩效:  将整体周期按年度或季度分段，列出各段收益表现（收益率、胜率），帮助发现策略是否
稳定。比如可能包含一个年度收益柱状图，对比每年策略与沪深300的涨跌幅。
多因子策略特有分析:  对于多因子选股策略，报告会深入分析因子效果。例如按因子分组的组合收益
（IC值、分层多空组合收益），以验证因子有效性；因子暴露变化图，展示组合随时间对主要风格因子
的偏离；以及贡献分析，定性说明哪类因子在特定阶段贡献了超额收益。
交易特征统计:  例如换手率（年化换手、平均持股天数）、平均持仓数量、单笔交易胜率、平均盈亏比
等。这些有助于了解策略交易频率和稳定性。还有每月交易频数、月度盈亏分布等图表。
风险指标:  包括beta系数（相对基准的）,跟踪误差，VAR（在一定置信度下的在险价值）等。如果组合
有明显行业集中，则列出主要行业的敞口比例。还可包含一个 风险雷达图 ，从多个维度刻画策略风险轮
廓。
文字分析:  报告中会配以专业的文字说明，对上述量化指标进行解读。例如指出策略的夏普比率远高于
基准，表现出优秀的风险调整收益；某一年出现较大回撤，主要由于市场风格转换导致当时因子失效
等。这些说明便于团队和潜在投资人理解数字背后的含义。
报告以HTML形式保存，可以内嵌丰富的交互图表（例如Plotly绘制的可交互曲线）。这使团队可以通过浏览器
方便地查看，并且通过简单搭建web服务或直接打开文件即可共享。必要时我们也能将HTML转换为PDF用于归
档或对外展示 。我们计划借助 QuantStats 等开源库来生成部分分析内容 （QuantStats可一键生成类似
对冲基金report的HTML报告，包含丰富图表和表格），然后结合我们定制的信息（如因子分析）嵌入报告模
板。借助自动报告，每次策略调整或回测完成后都能快速得到标准化的结果展示，大大提高研究效率。
实盘监控面板（在线Dashboard）:  实盘运行需要实时监控策略状态，我们将搭建一个前端可视化
Dashboard，供团队随时掌握账户情况。考虑到团队成员可能异地，通过 Web前端 展示是最佳选择。
Dashboard主要包括：
实时账户概况： 显示当前总资产、当日盈亏、累计收益率等核心指标的数字看板，以及当前仓位列表。
仓位列表以表格形式列出每只持股的市值占比、浮动盈亏、买入成本等，并高亮今天有变动的仓位。
权益曲线监控： 内嵌策略净值实时曲线图，随每日收盘更新。如果需要，也可以做更高频的曲线（例如
分钟级更新组合净值），但对日频策略意义不大，每日收盘后更新即可。这条曲线与历史曲线相连，团
队可以查看最新的组合表现相对于历史的走势是否稳健。
风险指标监控： 包括当前杠杆倍数（如果用融资的话）、行业分布饼图、单票集中度、组合Beta预估值
等。利用图形组件让团队快速了解当前组合风险特征。例如一个饼图显示行业配置比例，柱状图显示前
十大持仓权重，等等。
交易日志与告警： Dashboard的一部分将实时滚动显示当日策略的交易日志（如“09:30:00 买入 平安银
行 1000股 @ ¥13.50 成交1000”）。这让团队对当天操作透明可见。如果风控触发了告警或采取了动作• 
• 
• 
• 
• 
• 
• 
• 
45 46
• 
• 
• 
• 
• 
9
（如撤单），也会以红色警示在日志/通知区域显示。我们还计划对关键事件（例如组合市值回撤超过阈
值）在面板上弹出提醒，或通过企业微信/短信发送通知，以确保相关人员及时知晓。
团队协作和注释： Dashboard可以设计一个简单的 注释/沟通 功能，团队成员可以针对异常现象或策略
表现发表评论留资。例如看到某天组合波动较大，可以记录猜测原因。这些注释存入数据库，形成运行
日志的一部分，便于日后回顾决策。
技术实现方面，前端可使用 Plotly  Dash 或Streamlit 这类Python友好的web应用框架快速搭建。也可以基于
Flask+D3/ECharts定制。但Plotly  Dash能很方便地绑定Python后端数据，对我们来说开发效率更高。后端从
交易系统获取最新数据（比如通过查询数据库或直接从内存共享数据），更新Dash组件，实现准实时展示。部
署在云端服务器上后，团队只需浏览器访问指定URL并登录授权即可查看。我们会做好权限控制，确保只有授
权人员能访问敏感的实时数据。
团队协作与云端展示:  为了便利团队协同，我们会把 研究成果和实盘报告都集中在云端 存储，供成员随
时调阅。一种方式是在公司内网或云服务器上建立一个 知识库/报告库网站 。这个网站可以基于Wiki或
Docs系统，按日期和主题组织报告。例如，“2025-11-08_多因子策略回测报告.html”、“2025-12月
运行报告.pdf”等，方便检索。我们也会在内部版本控制系统（如Gitlab私有仓库）中保存策略代码和
文档，结合issue和wiki功能进行协作。每次策略改进，我们要求研究人员更新相应文档说明，使知识得
以积累。
此外，结合CI/CD流程，我们可以自动化一些报告的发布：当回测跑完后，触发脚本把生成的HTML报告推送到
团队共享的云盘或知识库，并通知成员查看。实盘Dashboard也可以扩展权限，给予只读访问给相关风控人员
或合作伙伴来实时查看（如果需要对接资管产品的话）。总的来说，我们希望通过 可视化和信息共享 ，打造一
个透明的量化投资流程：从研究假设、历史验证到实盘交易和归因复盘，都有据可查、有图可视。这样的报告
展示层也提升了团队内部沟通效率，使大家对策略运行状况形成共识，更好地协同改进。
对外展示（如需）： 尽管目前系统主要内部使用，但如果将来面对投资人或管理层汇报业绩，我们的报
告系统也可以产出 对外版本 。比如定期生成策略表现简报，去除敏感信息后提供给客户。这方面只需在
现有报告基础上做模板调整即可。因此我们提前搭建专业风格的报告格式，既满足内部技术分析，也可
以稍作修改用于对外交流，体现我们量化系统的专业性。
7. 部署建议与推荐配置
部署环境选择：  本系统可以选择本地部署、自有云部署或券商云托管等多种模式，各有优劣。鉴于我们对效率
和稳定性的高要求，建议采用 本地/自有云为主，券商云为辅的混合部署 策略：
本地部署： 在办公室或机房自建一套服务器运行策略。优点是对环境完全可控，数据和代码均存储在本
地内网，安全性高。可根据需求选购高性能硬件，例如配置 高端工作站 ：CPU  12核以上、内存32GB以
上、NVMe高速固态硬盘、千兆以上有线网络连接。如果需要跑繁重的因子计算或机器学习训练，可选
配GPU卡。这种配置对60万资金量的日频策略来说绰绰有余，但我们考虑到未来扩展，提前准备富余的
算力。部署操作系统可以使用 Windows  Server  2019/2022 （因为QMT需要Windows环境），并关闭
无关服务确保性能专用。我们也需要配置UPS不间断电源、防火墙等，保障服务器在断电或网络波动时
尽可能不中断交易。对于本地部署方案，我们要有专人定期维护服务器、更新系统补丁，监控硬件健
康。这种方案的缺点是 维护成本较高 且存在单点故障风险（因此需要备份机器）。但其 延迟低 （本地直
连券商，特别是若地处券商机房附近，网络延迟可以很低）且 策略保密 （无需上传代码），符合我们优
先追求专业度和性能的取向。
自有云部署： 将策略服务器部署在云端（如阿里云、腾讯云的国内节点）。这在功能上和本地自建类
似，但将硬件维护外包给云服务商，提升了可靠性和弹性。我们可以租用一台云主机用于实盘执行，操
作系统仍用Windows以运行QMT。推荐配置如：4~8核CPU、16~32GB内存、100GB SSD硬盘起步，根
据策略复杂度随时升级。云服务器能够保证7x24运行稳定，有专门机房维护，网络有冗余，非常适合要
求高可用的场景。同时如果后续计算需求增加，可以快速升级配置或增加新实例进行分布式计算（比如• 
• 
• 
• 
• 
10
并行跑多个回测任务）。需要注意选取云服务器的地域：尽量选择 靠近券商交易服务器所在地 的区域，
以缩小网络物理距离。比如我们的券商服务器在上海，则选上海/华东区的云机房，典型  ping  延迟可以
在几毫秒内。云部署的 安全 需要特别关注，我们会采取措施：开启云主机的安全组策略，只开放必要端
口（如券商API端口、SSH/远程桌面端口限定特定IP访问）；策略代码和数据在云端也加密存储，并禁
止除团队外的访问。由于有了这些安全隔离，策略部署在云上也基本可保证和本地类似的安全级别
。云部署的成本相对可以接受，相比因为本地自建服务器需要一次性投入硬件，云服务是按月/年计
费的OPEX模式，灵活度更高。我们预计一个月云服务器成本几百元左右，这在我们的预算考量范围
内。综上，自有云部署 减少了硬件运维工作量 ，并提高了部署灵活性，是本系统推荐的方案之一。
券商云托管部署： 即充分利用券商提供的PTrade环境或托管服务，将策略完全跑在券商的服务器上。这
种模式的 优势极明显 ：由券商机房专业维护，基本不会有宕机；与交易所直连带来的超低延迟和免行情
费用 ；策略部署非常简单，只需上传代码或在券商提供的界面配置后，即可让其在后台持续运
行 。对于我们关注的实盘执行可靠性，这是一种极省心的选择。然而 劣势 也需要权衡：首先环境封
闭，不能自由安装自定义的分析库或者接入额外数据源。如果将来我们的策略用到复杂的NLP模型，需
要加载大型深度学习框架，而券商平台未必支持，这会受限。其次策略代码在券商端运行，存在一定 策
略泄露 可能（虽然券商信誉良好，但毕竟代码离开了我们自有环境）。另外，若券商平台出现问题（尽
管少见但并非不可能），我们只能等待其修复而无法自主重启服务器。因此完全依赖券商云有一些 不可
控风险 。基于这些考虑，我们倾向于 不将券商云作为唯一运行环境 ，但可以将其作为备份或特定策略的
运行选择。比如可以让核心策略在自有环境跑，同时把同一策略副本部署一份在券商PTrade上（不开
仓，只监控），一旦主环境出问题可快速切换。这利用了券商云的高可用性，起到冗余备份作用。
综合考虑，我们推荐的部署策略是： 开发与研究环境 放在本地和云端结合（开发者本地电脑+一台云服务器用于
跑批量回测、存储数据）， 实盘交易环境 以云端部署主节点+本地/券商托管备节点 的形式。在云端部署主交易
程序，可以获得接近本地的灵活度和靠近券商的稳定性；同时保留一套本地QMT终端作为监控和紧急操作用途
（本地终端平时不主动交易，但能在需要时介入）。如下表对比了不同部署模式供参考：
部署模式 优点 缺点 适用场景
本地自建服
务器- 完全控制环境，数据不出内网，
策略保密性高<br>- 可定制硬件配
置，利用高性能计算资源（如本地
GPU）<br>- 延迟可控，可申请券
商VIP通道降低网络延迟- 需自行维护软硬件，保证
7x24稳定运行<br>- 存在断
电、网络中断等物理风险，需
UPS等容灾<br>- 初始投入较
大，扩容弹性略差专业量化团队追
求高灵活性和数
据安全性，具备
运维能力的情况
自有云服务
器部署- 专业机房运维，可靠性高<br>- 弹
性扩展，按需升级配置或增加实例
<br>- 快速部署，无需购买物理服
务器设备- 持续的云服务成本支出<br>-
数据上云有安全风险，需加强
加密和访问控制<br>- 网络依
赖云厂商，需选择低延迟区域需要高可用性和
弹性伸缩的场
景，团队希望降
低硬件维护负担
券商云托管
（PTrade
等）- 券商机房专业保障，7×24小时运
行，无需任何本地维护 <br>- 与
交易所直连，订单响应极快，行情
免费推送 <br>- 部署步骤简
单，满足条件即可申请使用- 策略环境封闭，对第三方库和
外部数据支持有限<br>- 策略
代码托管在券商端，有潜在策
略泄露顾虑<br>- 个性化修改
不便，需要适应券商系统约束小团队或个人快
速上线策略，要
求稳健运行且策
略逻辑相对标准
化的情况
推荐配置:  基于以上分析，我们具体建议如下部署组合：  -  主交易服务器： 选择阿里云华东2（上海）区域，启
动一台Windows  Server云主机，4核CPU、16GB内存起步（可根据回测需要随时升级至8核+32GB），安装华
泰QMT终端（或miniQMT）用于实盘连接。该服务器负责每日策略运行和下单。通过配置定时任务或守护进
程，保证策略程序在开盘前自动启动、收盘后正常结束。开启系统远程桌面供开发人员维护，同时利用VPN或
SSH通道加强连接安全。此主服务器会持续运行，我们会配置监控报警（如使用云厂商提供的监控，监听
CPU、网络、进程存活），一旦有异常（进程崩溃或资源异常）及时通知我们。 - 备份及容灾： 在本地办公室保
留一台装有QMT的电脑（可利用开发人员PC或一台小型服务器）。这台设备平时同步接收行情和策略信号输3
• 
6 8
5
13
5
6 8
11
出，但默认不自动下单。当主服务器发生故障或网络不通时，可由团队远程启动本地备机的交易功能，接管交
易。同时，我们也可以将策略同时部署在 国金PTrade 上作为第二备份（策略设定为初始不建仓，或者用一个小
额资金账户跟单），以验证实盘行为一致性。多层备份确保即使一种环境出问题，策略仍有其他路径继续或平
稳退出市场。  -  研发环境： 研究员日常在各自本地电脑通过Cursor等工具编写策略代码，连接到一台 研究用云
服务器 （可以与主交易服务器物理分离，以免相互影响）。研究服务器可以是Linux系统，方便利用Python科
学计算库。上面部署JupyterLab用于因子研究和模型训练，存放行情和财务数据库的只读副本。这样研发和实
盘既解耦又保持一致的数据接口（通过我们设计的数据层适配），减少策略迁移误差。
环境隔离与安全:  我们会将交易服务器和外网隔离，只允许必要的连接（如行情、交易连到券商，监控连到我们
的Dashboard服务器）。研究服务器可以访问互联网以便获取资料和第三方数据，但交易服务器上的实盘策略
将不主动访问外部网络 （除券商指定接口），防止因调用未知API导致安全隐患。这种隔离也符合监管对于自动
交易程序的要求，保证策略执行的独立和可控。
配置管理:  利用容器或脚本记录下整个系统依赖环境。例如记录QMT版本、Python依赖库版本。当需要新建服
务器或重装时，按照文档迅速部署一致的环境。这确保环境的一致性，避免“本地能跑云端异常”等问题。
总结部署:  我们将在保证性能和稳定的前提下，搭建一个灵活多用的部署架构。本地/云端结合让我们兼顾了 高
性能计算 和高可靠运行 ，而多重备份方案使系统具有 容错能力 。随着策略复杂度和团队规模扩大，我们的部署
方案也可平滑扩展：例如增加独立的 风控服务器 、数据库服务器 ，或采用Kubernetes集群管理多个策略容器
等。不过就当前需求而言，上述配置已足够专业并留有余量。通过精心的架构设计和配置选型，我们有信心本
量化系统在实盘中将实现 高效率运作 和稳健风控 ，为60万资金的A股投资提供强大的技术支撑。
参考文献：
迅投QMT量化交易平台简介及特性
恒生PTrade云托管交易平台特点与QMT对比
Sohu专栏 – 《QMT、PTrade量化软件讲解》 （司木量财, 2024）
Wind数据服务 – 覆盖A股行情、财务和量化因子等全量数据
CSDN博客 – 《中信行业分类判断标准》  对国内主流行业分类的说明
VN.PY开源框架 – 事前风控模块规则（限价检查、持仓限额等）
QMT风控机制 – 多层次并行风控与事前/事中/事后控制要点
量化交易系统QMT与PTrade的区别、优势、量化交易策略， - 木头量
化入门 - 博客园
https://www.cnblogs.com/bigleft/p/18286458
2025量化攻略：如何开通Xtquant与PTrade？两者有何区别？_实盘交易_策
略_支持
https://www.sohu.com/a/910547414_121974495
Wind - 数据服务
https://www.wind.com.cn/mobile/WDS/zh.html
中国A股行业指数概览-CSDN博客
https://blog.csdn.net/The_Time_Runner/article/details/100564574
VN.PY项目中的事前交易风控模块深度解析-CSDN博客
https://blog.csdn.net/gitblog_00134/article/details/148360174
QMT-QMT风险控制：量化交易中的稳健基石
http://qmt.hxquant.com/?id=211. 47 48 10 3
2. 5 4
3. 49 14
4. 17 16
5. 19
6. 26 27
7. 22
1 2 3 7 9 10 23 24 41 47 48
4 5 6 8 11 12 13 14 44
15 16 17 18 20
19
21 25 26 27 28 29 30 31 32 33 34 35 42 43
22 36 37 38 39 40
12
Report - QuantConnect.com
https://www.quantconnect.com/docs/v2/cloud-platform/backtesting/report
ranaroussi/quantstats: Portfolio analytics for quants, written in Python
https://github.com/ranaroussi/quantstats
小白也能做量化：QMT、PTrade量化软件讲解_交易_策略_行情
https://www.sohu.com/a/788058940_12197449545
46
49
13