# TRQuant ç­–ç•¥ä¼˜åŒ–å™¨ & å­¦ä¹ å¼•æ“ - å®Œæ•´æ–‡æ¡£

> **ç‰ˆæœ¬**: 1.0.0  
> **æ›´æ–°æ—¥æœŸ**: 2025-12-03  
> **ä½œè€…**: TRQuant Team

---

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
3. [å­¦ä¹ å¼•æ“å·¥ä½œæµç¨‹](#å­¦ä¹ å¼•æ“å·¥ä½œæµç¨‹)
4. [æ ¸å¿ƒæ¨¡å—è¯¦è§£](#æ ¸å¿ƒæ¨¡å—è¯¦è§£)
5. [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
6. [APIå‚è€ƒ](#apiå‚è€ƒ)
7. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## æ¦‚è¿°

### ä»€ä¹ˆæ˜¯ç­–ç•¥ä¼˜åŒ–å™¨ï¼Ÿ

**ç­–ç•¥ä¼˜åŒ–å™¨**æ˜¯TRQuantæ‰©å±•çš„æ ¸å¿ƒæ¨¡å—ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

- ğŸ” **ä»£ç åˆ†æ** - è‡ªåŠ¨è§£æç­–ç•¥ä»£ç ï¼Œè¯†åˆ«æ ¸å¿ƒé€»è¾‘ã€APIè°ƒç”¨ã€å› å­ä½¿ç”¨
- ğŸ”„ **å¹³å°è½¬æ¢** - ä¸€é”®è½¬æ¢ç­–ç•¥ä»£ç åˆ°ä¸åŒé‡åŒ–å¹³å°ï¼ˆJoinQuant â†” PTrade â†” QMTï¼‰
- ğŸ“Š **æŠ¥å‘Šç”Ÿæˆ** - ç”Ÿæˆå®Œæ•´çš„ç­–ç•¥åˆ†ææŠ¥å‘Šï¼ˆHTML/Markdownï¼‰
- ğŸ§  **æ™ºèƒ½å­¦ä¹ ** - ä»å¤šä¸ªæ¥æºæŒç»­å­¦ä¹ ï¼Œä¸æ–­è¿›åŒ–ä¼˜åŒ–èƒ½åŠ›

### ä¸ºä»€ä¹ˆéœ€è¦å­¦ä¹ å¼•æ“ï¼Ÿ

ä¼ ç»Ÿé‡åŒ–å·¥å…·çš„é—®é¢˜æ˜¯ï¼š
- âŒ å¹³å°APIå·®å¼‚å¤§ï¼Œè¿ç§»æˆæœ¬é«˜
- âŒ æœ€ä½³å®è·µéš¾ä»¥æ²‰æ·€å’Œå¤ç”¨
- âŒ çŸ¥è¯†åˆ†æ•£ï¼Œæ— æ³•ç³»ç»ŸåŒ–ç§¯ç´¯
- âŒ ç­–ç•¥æ¨¡å¼æ— æ³•è‡ªåŠ¨è¯†åˆ«å’Œæ¨è

**å­¦ä¹ å¼•æ“**è§£å†³äº†è¿™äº›é—®é¢˜ï¼š
- âœ… è‡ªåŠ¨ä»æ–‡æ¡£ã€å†å²ç­–ç•¥ã€ç”¨æˆ·åé¦ˆä¸­å­¦ä¹ 
- âœ… çŸ¥è¯†åº“æŒç»­ç§¯ç´¯å’Œè¿›åŒ–
- âœ… æ™ºèƒ½æ¨èç¼ºå¤±çš„æ¨¡å¼å’Œæœ€ä½³å®è·µ
- âœ… å®æ—¶åŒæ­¥Aè‚¡å®æ“æ‰‹å†Œæ›´æ–°

---

## æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TRQuant ç­–ç•¥ä¼˜åŒ–å™¨                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ä»£ç åˆ†æå™¨  â”‚  â”‚  å¹³å°é€‚é…å™¨  â”‚  â”‚  æŠ¥å‘Šç”Ÿæˆå™¨  â”‚     â”‚
â”‚  â”‚ CodeAnalyzerâ”‚  â”‚PlatformAdapterâ”‚ â”‚ReportGeneratorâ”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                  â”‚                  â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                            â”‚                                â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                    â”‚ å­¦ä¹ å¼•æ“æ ¸å¿ƒ   â”‚                       â”‚
â”‚                    â”‚ Learning Core  â”‚                       â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                            â”‚                                â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚                  â”‚                  â”‚             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ æ–‡æ¡£å­¦ä¹ å™¨  â”‚  â”‚ å†å²å­¦ä¹ å™¨    â”‚  â”‚ æ‰‹å†Œå­¦ä¹ å™¨   â”‚     â”‚
â”‚  â”‚Document     â”‚  â”‚History       â”‚  â”‚Manual        â”‚     â”‚
â”‚  â”‚Learner      â”‚  â”‚Learner       â”‚  â”‚Learner       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                  â”‚                  â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                            â”‚                                â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                    â”‚  çŸ¥è¯†å­˜å‚¨åº“    â”‚                       â”‚
â”‚                    â”‚ KnowledgeStore â”‚                       â”‚
â”‚                    â”‚                â”‚                       â”‚
â”‚                    â”‚ [ç­–ç•¥æ¨¡å¼]     â”‚                       â”‚
â”‚                    â”‚ [æœ€ä½³å®è·µ]     â”‚                       â”‚
â”‚                    â”‚ [APIæ˜ å°„]      â”‚                       â”‚
â”‚                    â”‚ [ç”¨æˆ·åé¦ˆ]     â”‚                       â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—ä¾èµ–å…³ç³»

```
StrategyOptimizerService (ä¸»æœåŠ¡)
    â”œâ”€â”€ CodeAnalyzer (ä»£ç åˆ†æ)
    â”œâ”€â”€ PlatformAdapter (å¹³å°è½¬æ¢)
    â”œâ”€â”€ ReportGenerator (æŠ¥å‘Šç”Ÿæˆ)
    â””â”€â”€ Learning Engine (å­¦ä¹ å¼•æ“)
        â”œâ”€â”€ StrategyLearner (ç­–ç•¥å­¦ä¹ å™¨)
        â”‚   â”œâ”€â”€ DocumentLearner (æ–‡æ¡£å­¦ä¹ )
        â”‚   â”œâ”€â”€ HistoryLearner (å†å²å­¦ä¹ )
        â”‚   â””â”€â”€ FeedbackLearner (åé¦ˆå­¦ä¹ )
        â”œâ”€â”€ ManualLearner (æ‰‹å†Œå­¦ä¹ å™¨)
        â””â”€â”€ KnowledgeStore (çŸ¥è¯†å­˜å‚¨)
```

---

## å­¦ä¹ å¼•æ“å·¥ä½œæµç¨‹

### 1. å®Œæ•´å­¦ä¹ æµç¨‹

```mermaid
graph TD
    A[å­¦ä¹ å¼•æ“å¯åŠ¨] --> B{é€‰æ‹©å­¦ä¹ æº}
    
    B -->|æ–‡æ¡£å­¦ä¹ | C[æ‰«ææ–‡æ¡£ç›®å½•]
    B -->|å†å²å­¦ä¹ | D[åŠ è½½å†å²ç­–ç•¥]
    B -->|æ‰‹å†Œå­¦ä¹ | E[æ‰«æAè‚¡å®æ“æ‰‹å†Œ]
    B -->|åé¦ˆå­¦ä¹ | F[å¤„ç†ç”¨æˆ·åé¦ˆ]
    
    C --> G[æå–ä»£ç å—]
    C --> H[æå–æœ€ä½³å®è·µ]
    
    D --> I[åˆ†æç­–ç•¥è¡¨ç°]
    D --> J[æ›´æ–°æ¨¡å¼æœ‰æ•ˆæ€§]
    
    E --> K[æå–ç­–ç•¥æ¨¡å¼]
    E --> L[æå–é£æ§è§„åˆ™]
    
    F --> M[è®°å½•çº æ­£]
    F --> N[æ›´æ–°APIæ˜ å°„]
    
    G --> O[çŸ¥è¯†å­˜å‚¨åº“]
    H --> O
    I --> O
    J --> O
    K --> O
    L --> O
    M --> O
    N --> O
    
    O --> P[ç”Ÿæˆæ¨è]
    P --> Q[ç­–ç•¥ä¼˜åŒ–å»ºè®®]
```

### 2. æ–‡æ¡£å­¦ä¹ æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ–‡æ¡£å­¦ä¹ æµç¨‹ (Document Learning)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è¾“å…¥: æ–‡æ¡£è·¯å¾„åˆ—è¡¨
  â†“
[æ­¥éª¤1] æ‰«ææ–‡æ¡£æ–‡ä»¶
  â”œâ”€â”€ Markdownæ–‡ä»¶ (.md)
  â”œâ”€â”€ Pythonæ–‡ä»¶ (.py)
  â””â”€â”€ æ–‡æœ¬æ–‡ä»¶ (.txt)
  â†“
[æ­¥éª¤2] å†…å®¹è§£æ
  â”œâ”€â”€ æå–ä»£ç å— (```python ... ```)
  â”œâ”€â”€ æå–å‡½æ•°å®šä¹‰ (def function_name)
  â”œâ”€â”€ æå–æœ€ä½³å®è·µæ ‡è®° (å»ºè®®ã€æ³¨æ„ã€æç¤º)
  â””â”€â”€ æå–é£æ§è§„åˆ™ (æ­¢æŸã€æ­¢ç›ˆã€ä»“ä½)
  â†“
[æ­¥éª¤3] æ¨¡å¼è¯†åˆ«
  â”œâ”€â”€ é€‰è‚¡æ¨¡å¼ (select/filter/stockç›¸å…³)
  â”œâ”€â”€ æ‹©æ—¶æ¨¡å¼ (timing/signal/trendç›¸å…³)
  â”œâ”€â”€ é£æ§æ¨¡å¼ (stop/risk/positionç›¸å…³)
  â””â”€â”€ æ‰§è¡Œæ¨¡å¼ (order/trade/executeç›¸å…³)
  â†“
[æ­¥éª¤4] çŸ¥è¯†æå–
  â”œâ”€â”€ åˆ›å»ºç­–ç•¥æ¨¡å¼ (StrategyPattern)
  â”œâ”€â”€ åˆ›å»ºæœ€ä½³å®è·µ (BestPractice)
  â””â”€â”€ æ›´æ–°çŸ¥è¯†åº“ (KnowledgeStore)
  â†“
è¾“å‡º: å­¦ä¹ ç»Ÿè®¡ (patterns, practices, learned)
```

### 3. å†å²å­¦ä¹ æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å†å²å­¦ä¹ æµç¨‹ (History Learning)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è¾“å…¥: å†å²ç­–ç•¥åˆ—è¡¨ [{code, filename, performance}]
  â†“
[æ­¥éª¤1] ç­–ç•¥åˆ†æ
  â”œâ”€â”€ ä»£ç åˆ†æ (CodeAnalyzer)
  â”œâ”€â”€ æå–ç»„ä»¶ (é€‰è‚¡/æ‹©æ—¶/é£æ§/æ‰§è¡Œ)
  â””â”€â”€ è¯†åˆ«å› å­å’ŒæŒ‡æ ‡
  â†“
[æ­¥éª¤2] è¡¨ç°è¯„ä¼°
  â”œâ”€â”€ æˆåŠŸç­–ç•¥ (returns > 10%, sharpe > 1.0, drawdown < -20%)
  â””â”€â”€ å¤±è´¥ç­–ç•¥ (returns < -10%)
  â†“
[æ­¥éª¤3] æ¨¡å¼æœ‰æ•ˆæ€§æ›´æ–°
  â”œâ”€â”€ æˆåŠŸç­–ç•¥ â†’ æ¨¡å¼æœ‰æ•ˆæ€§ +5
  â”œâ”€â”€ å¤±è´¥ç­–ç•¥ â†’ æ¨¡å¼æœ‰æ•ˆæ€§ -3
  â””â”€â”€ æœ‰é£æ§ç­–ç•¥ â†’ é£æ§æ¨¡å¼æœ‰æ•ˆæ€§ +2
  â†“
[æ­¥éª¤4] ç»éªŒæ€»ç»“
  â”œâ”€â”€ è®°å½•æˆåŠŸæ¨¡å¼ç»„åˆ
  â”œâ”€â”€ è®°å½•å¤±è´¥åŸå› 
  â””â”€â”€ æ›´æ–°æœ€ä½³å®è·µ
  â†“
è¾“å‡º: åˆ†æç»Ÿè®¡ (analyzed, successPatterns, failurePatterns)
```

### 4. æ‰‹å†Œå­¦ä¹ æµç¨‹ï¼ˆå®æ—¶æ›´æ–°ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        æ‰‹å†Œå­¦ä¹ æµç¨‹ (Manual Learning + Watch)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åˆå§‹åŒ–:
  â”œâ”€â”€ æ‰«æ AShare-manual/src/pages/
  â”œâ”€â”€ è¯†åˆ«ä¹¦ç±ç›®å½• (ashare-book1~5, ashare)
  â””â”€â”€ å»ºç«‹ç« èŠ‚æ˜ å°„
  â†“
[é˜¶æ®µ1] æ‰¹é‡å­¦ä¹ 
  â”œâ”€â”€ éå†æ‰€æœ‰ .md æ–‡ä»¶
  â”œâ”€â”€ æå–ä»£ç å—å’ŒçŸ¥è¯†
  â””â”€â”€ åˆ†ç±»å­˜å‚¨åˆ°çŸ¥è¯†åº“
  â†“
[é˜¶æ®µ2] å®æ—¶ç›‘å¬
  â”œâ”€â”€ ç›‘å¬æ–‡ä»¶ç³»ç»Ÿå˜åŒ– (fs.watch)
  â”œâ”€â”€ æ£€æµ‹ .md æ–‡ä»¶æ›´æ–°
  â””â”€â”€ è‡ªåŠ¨é‡æ–°å­¦ä¹ å˜æ›´æ–‡ä»¶
  â†“
[é˜¶æ®µ3] å¢é‡æ›´æ–°
  â”œâ”€â”€ æå–æ–°å†…å®¹
  â”œâ”€â”€ æ›´æ–°çŸ¥è¯†åº“
  â””â”€â”€ é€šçŸ¥ç”¨æˆ·æ›´æ–°å®Œæˆ
  â†“
è¾“å‡º: å®æ—¶åŒæ­¥çš„çŸ¥è¯†åº“
```

### 5. åé¦ˆå­¦ä¹ æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           åé¦ˆå­¦ä¹ æµç¨‹ (Feedback Learning)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è¾“å…¥: ç”¨æˆ·åé¦ˆ
  â”œâ”€â”€ correction (çº æ­£) - APIè½¬æ¢é”™è¯¯
  â”œâ”€â”€ improvement (æ”¹è¿›) - ä¼˜åŒ–å»ºè®®
  â”œâ”€â”€ bug (é—®é¢˜) - åŠŸèƒ½ç¼ºé™·
  â””â”€â”€ feature (åŠŸèƒ½) - æ–°éœ€æ±‚
  â†“
[æ­¥éª¤1] åé¦ˆåˆ†ç±»
  â”œâ”€â”€ çº æ­£ â†’ å­¦ä¹ APIæ˜ å°„
  â”œâ”€â”€ æ”¹è¿› â†’ åˆ›å»ºæœ€ä½³å®è·µ
  â”œâ”€â”€ é—®é¢˜ â†’ è®°å½•å¾…ä¿®å¤
  â””â”€â”€ åŠŸèƒ½ â†’ è®°å½•éœ€æ±‚
  â†“
[æ­¥éª¤2] çŸ¥è¯†æå–
  â”œâ”€â”€ ä»çº æ­£ä¸­æå–æ–°çš„APIæ˜ å°„è§„åˆ™
  â”œâ”€â”€ ä»æ”¹è¿›ä¸­æå–æœ€ä½³å®è·µ
  â””â”€â”€ æ›´æ–°çŸ¥è¯†åº“
  â†“
[æ­¥éª¤3] åé¦ˆå¤„ç†
  â”œâ”€â”€ æ ‡è®°ä¸ºå·²å¤„ç†
  â””â”€â”€ ä¿å­˜åˆ°çŸ¥è¯†åº“
  â†“
è¾“å‡º: æ”¹è¿›çš„çŸ¥è¯†åº“
```

### 6. æ™ºèƒ½æ¨èæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           æ™ºèƒ½æ¨èæµç¨‹ (Intelligent Recommendation)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è¾“å…¥: ç­–ç•¥ä»£ç 
  â†“
[æ­¥éª¤1] ä»£ç åˆ†æ
  â”œâ”€â”€ åˆ†æä»£ç ç»“æ„
  â”œâ”€â”€ è¯†åˆ«å·²æœ‰ç»„ä»¶
  â””â”€â”€ æ£€æµ‹ç¼ºå¤±åŠŸèƒ½
  â†“
[æ­¥éª¤2] çŸ¥è¯†åŒ¹é…
  â”œâ”€â”€ æŸ¥è¯¢çŸ¥è¯†åº“ä¸­çš„æ¨¡å¼
  â”œâ”€â”€ æŸ¥è¯¢æœ€ä½³å®è·µ
  â””â”€â”€ åŒ¹é…ç›¸å…³APIæ˜ å°„
  â†“
[æ­¥éª¤3] æ¨èç”Ÿæˆ
  â”œâ”€â”€ å¦‚æœç¼ºå°‘é£æ§ â†’ æ¨èé£æ§æ¨¡å¼
  â”œâ”€â”€ å¦‚æœé€‰è‚¡ç®€å• â†’ æ¨èå¤æ‚é€‰è‚¡æ¨¡å¼
  â”œâ”€â”€ å¦‚æœç¼ºå°‘æ­¢æŸ â†’ æ¨èæ­¢æŸæœ€ä½³å®è·µ
  â””â”€â”€ å¦‚æœç¼ºå°‘æ—¥å¿— â†’ æ¨èæ—¥å¿—æœ€ä½³å®è·µ
  â†“
[æ­¥éª¤4] æ’åºå’Œè¿‡æ»¤
  â”œâ”€â”€ æŒ‰æœ‰æ•ˆæ€§æ’åº
  â”œâ”€â”€ å»é‡
  â””â”€â”€ è¿”å›TOPæ¨è
  â†“
è¾“å‡º: æ¨èåˆ—è¡¨ (patterns, practices)
```

---

## æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. KnowledgeStore (çŸ¥è¯†å­˜å‚¨åº“)

**èŒè´£**: æŒä¹…åŒ–å­˜å‚¨æ‰€æœ‰å­¦ä¹ åˆ°çš„çŸ¥è¯†

**æ•°æ®ç»“æ„**:
```typescript
interface LearningData {
    patterns: StrategyPattern[];      // ç­–ç•¥æ¨¡å¼
    apiMappings: APIMapping[];        // APIæ˜ å°„è§„åˆ™
    bestPractices: BestPractice[];    // æœ€ä½³å®è·µ
    userFeedback: UserFeedback[];     // ç”¨æˆ·åé¦ˆ
}
```

**å­˜å‚¨ä½ç½®**: `{storagePath}/knowledge.json`

**å†…ç½®çŸ¥è¯†**:
- 6ä¸ªç­–ç•¥æ¨¡å¼ï¼ˆå¤šå› å­é€‰è‚¡ã€åŠ¨é‡æ‹©æ—¶ã€å›ºå®šæ­¢æŸç­‰ï¼‰
- 7ä¸ªæœ€ä½³å®è·µï¼ˆå¿…é¡»è®¾ç½®æ­¢æŸã€æ§åˆ¶å•ç¥¨ä»“ä½ç­‰ï¼‰

### 2. StrategyLearner (ç­–ç•¥å­¦ä¹ å™¨)

**èŒè´£**: ä»æ–‡æ¡£ã€å†å²ã€åé¦ˆä¸­å­¦ä¹ 

**ä¸»è¦æ–¹æ³•**:
- `learnFromDocuments()` - ä»æ–‡æ¡£å­¦ä¹ 
- `learnFromHistory()` - ä»å†å²ç­–ç•¥å­¦ä¹ 
- `recordFeedback()` - è®°å½•ç”¨æˆ·åé¦ˆ
- `recommendPatterns()` - æ¨èæ¨¡å¼
- `recommendBestPractices()` - æ¨èæœ€ä½³å®è·µ

### 3. ManualLearner (æ‰‹å†Œå­¦ä¹ å™¨)

**èŒè´£**: ä»Aè‚¡å®æ“æ‰‹å†Œå®æ—¶å­¦ä¹ 

**ä¸»è¦æ–¹æ³•**:
- `learnFromManual()` - æ‰¹é‡å­¦ä¹ æ•´ä¸ªæ‰‹å†Œ
- `watchForUpdates()` - ç›‘å¬æ–‡ä»¶æ›´æ–°
- `getChapterKnowledge()` - è·å–ç‰¹å®šç« èŠ‚çŸ¥è¯†

**æ”¯æŒçš„ä¹¦ç±**:
- `ashare-book1` - Aè‚¡æŠ•èµ„åŸºç¡€ (10ç« )
- `ashare-book2` - å®è§‚ç»æµ (11ç« )
- `ashare-book3` - ä¸ªè‚¡ç ”ç©¶ (11ç« )
- `ashare-book4` - æŠ€æœ¯åˆ†æ (5ç« )
- `ashare-book5` - é‡åŒ–ä¸“é¢˜ (11ç« )
- `ashare` - Aè‚¡é‡åŒ–æ ¸å¿ƒ (8ç« )

### 4. CodeAnalyzer (ä»£ç åˆ†æå™¨)

**èŒè´£**: åˆ†æç­–ç•¥ä»£ç ç»“æ„

**åˆ†æå†…å®¹**:
- å…ƒä¿¡æ¯ï¼ˆåç§°ã€æè¿°ã€å›æµ‹åŒºé—´ï¼‰
- ä»£ç å—ï¼ˆå‡½æ•°ã€ç±»ã€å˜é‡ï¼‰
- ç»„ä»¶åˆ†ç±»ï¼ˆé€‰è‚¡/æ‹©æ—¶/é£æ§/æ‰§è¡Œï¼‰
- APIä½¿ç”¨æƒ…å†µ
- å› å­å’ŒæŒ‡æ ‡ä½¿ç”¨
- å¹³å°å…¼å®¹æ€§

### 5. PlatformAdapter (å¹³å°é€‚é…å™¨)

**èŒè´£**: åœ¨ä¸åŒå¹³å°é—´è½¬æ¢ä»£ç 

**æ”¯æŒçš„è½¬æ¢**:
- JoinQuant â†’ PTrade
- PTrade â†’ JoinQuant
- JoinQuant â†’ QMT (è§„åˆ’ä¸­)

**è½¬æ¢å†…å®¹**:
- APIè°ƒç”¨æ›¿æ¢
- å‚æ•°æ˜ å°„
- ä»£ç ç»“æ„è°ƒæ•´
- è‚¡ç¥¨ä»£ç æ ¼å¼è½¬æ¢

### 6. ReportGenerator (æŠ¥å‘Šç”Ÿæˆå™¨)

**èŒè´£**: ç”Ÿæˆç­–ç•¥åˆ†ææŠ¥å‘Š

**æŠ¥å‘Šæ ¼å¼**:
- HTML (å¯è§†åŒ–ï¼Œå¸¦å›¾è¡¨)
- Markdown (çº¯æ–‡æœ¬)
- JSON (ç»“æ„åŒ–æ•°æ®)

**æŠ¥å‘Šå†…å®¹**:
- æŠ•èµ„ç†å¿µ
- ä»£ç æ¶æ„
- å¹³å°å…¼å®¹æ€§
- ä¼˜åŒ–å»ºè®®
- ä»£ç è´¨é‡è¯„ä¼°

---

## ä½¿ç”¨æŒ‡å—

### åŸºæœ¬ä½¿ç”¨

#### 1. åˆ†æç­–ç•¥ä»£ç 

```typescript
import { strategyOptimizer } from './services/strategyOptimizer';

const code = `...ç­–ç•¥ä»£ç ...`;
const analysis = strategyOptimizer.analyzeStrategy(code, 'my_strategy.py');
```

#### 2. è½¬æ¢åˆ°ç›®æ ‡å¹³å°

```typescript
const result = strategyOptimizer.convertToPlatform(code, 'ptrade');
if (result.success) {
    console.log('è½¬æ¢åçš„ä»£ç :', result.convertedCode);
}
```

#### 3. ç”ŸæˆæŠ¥å‘Š

```typescript
const report = strategyOptimizer.generateReport(code, 'html');
// ä¿å­˜ä¸ºHTMLæ–‡ä»¶
```

### å­¦ä¹ å¼•æ“ä½¿ç”¨

#### 1. åˆå§‹åŒ–å­¦ä¹ å¼•æ“

```typescript
const storagePath = context.globalStorageUri.fsPath;
const manualPath = path.join(context.extensionPath, 'AShare-manual');

strategyOptimizer.initLearner(storagePath, manualPath);
```

#### 2. ä»æ‰‹å†Œå­¦ä¹ 

```typescript
const result = await strategyOptimizer.learnFromManual();
console.log(`å­¦ä¹ äº† ${result.stats.patternsExtracted} ä¸ªæ¨¡å¼`);
```

#### 3. ç›‘å¬æ‰‹å†Œæ›´æ–°

```typescript
const watcher = strategyOptimizer.watchManualUpdates((filename) => {
    console.log(`æ‰‹å†Œæ›´æ–°: ${filename}`);
});
```

#### 4. è·å–æ¨è

```typescript
const patterns = strategyOptimizer.getRecommendedPatterns(code);
const practices = strategyOptimizer.getRecommendedPractices(code);
```

### VS Codeå‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `TRQuant: ç­–ç•¥ä¼˜åŒ–å™¨` | æ‰“å¼€ä¼˜åŒ–å™¨é¢æ¿ |
| `TRQuant: è½¬æ¢ä¸ºPTradeæ ¼å¼` | å¿«é€Ÿè½¬æ¢å½“å‰æ–‡ä»¶ |
| `TRQuant: ç”Ÿæˆç­–ç•¥æŠ¥å‘Š` | ç”Ÿæˆåˆ†ææŠ¥å‘Š |
| `TRQuant: ä»å®æ“æ‰‹å†Œå­¦ä¹ ` | ä»Aè‚¡å®æ“æ‰‹å†Œå­¦ä¹  |
| `TRQuant: çŸ¥è¯†åº“ç»Ÿè®¡` | æŸ¥çœ‹çŸ¥è¯†åº“ç»Ÿè®¡ |

---

## APIå‚è€ƒ

### StrategyOptimizerService

#### æ–¹æ³•

##### `analyzeStrategy(code: string, filename?: string): StrategyAnalysis`
åˆ†æç­–ç•¥ä»£ç 

##### `convertToPlatform(code: string, targetPlatform: Platform, analysis?: StrategyAnalysis): ConversionResult`
è½¬æ¢åˆ°ç›®æ ‡å¹³å°

##### `generateReport(code: string, format: 'json' | 'markdown' | 'html'): StrategyReport | string`
ç”Ÿæˆç­–ç•¥æŠ¥å‘Š

##### `initLearner(storagePath: string, manualPath?: string): void`
åˆå§‹åŒ–å­¦ä¹ å¼•æ“

##### `learnFromManual(): Promise<{success, stats, log}>`
ä»Aè‚¡å®æ“æ‰‹å†Œå­¦ä¹ 

##### `getRecommendedPatterns(code: string): StrategyPattern[]`
è·å–æ¨èæ¨¡å¼

##### `getRecommendedPractices(code: string): BestPractice[]`
è·å–æ¨èæœ€ä½³å®è·µ

##### `getLearningStats(): Stats | null`
è·å–å­¦ä¹ ç»Ÿè®¡

### StrategyLearner

#### æ–¹æ³•

##### `learnFromDocuments(docPaths: string[]): Promise<Result>`
ä»æ–‡æ¡£å­¦ä¹ 

##### `learnFromHistory(strategies: Strategy[]): Promise<Result>`
ä»å†å²ç­–ç•¥å­¦ä¹ 

##### `recordFeedback(feedback: Feedback): void`
è®°å½•ç”¨æˆ·åé¦ˆ

##### `processFeedback(): Promise<Result>`
å¤„ç†åé¦ˆå¹¶å­¦ä¹ 

### ManualLearner

#### æ–¹æ³•

##### `learnFromManual(): Promise<Result>`
æ‰«æå¹¶å­¦ä¹ æ•´ä¸ªæ‰‹å†Œ

##### `watchForUpdates(callback?: Function): FSWatcher`
ç›‘å¬æ‰‹å†Œæ›´æ–°

##### `getChapterKnowledge(bookDir: string, chapterNum: string): Knowledge`
è·å–ç‰¹å®šç« èŠ‚çŸ¥è¯†

---

## æœ€ä½³å®è·µ

### 1. çŸ¥è¯†åº“ç®¡ç†

- âœ… **å®šæœŸå­¦ä¹ **: æ¯æ¬¡æ‰‹å†Œæ›´æ–°åæ‰§è¡Œå­¦ä¹ 
- âœ… **ç‰ˆæœ¬æ§åˆ¶**: çŸ¥è¯†åº“æ–‡ä»¶å»ºè®®åŠ å…¥ç‰ˆæœ¬æ§åˆ¶
- âœ… **å¤‡ä»½**: å®šæœŸå¤‡ä»½çŸ¥è¯†åº“æ–‡ä»¶

### 2. å­¦ä¹ ç­–ç•¥

- âœ… **å¢é‡å­¦ä¹ **: ä¼˜å…ˆä½¿ç”¨å®æ—¶ç›‘å¬ï¼Œé¿å…å…¨é‡æ‰«æ
- âœ… **åˆ†ç±»å­¦ä¹ **: æŒ‰ä¹¦ç±/ç« èŠ‚åˆ†ç±»å­¦ä¹ ï¼Œä¾¿äºç®¡ç†
- âœ… **è´¨é‡æ§åˆ¶**: å®šæœŸå®¡æŸ¥å­¦ä¹ ç»“æœï¼Œç¡®ä¿è´¨é‡

### 3. æ¨èä½¿ç”¨

- âœ… **ä¸Šä¸‹æ–‡ç›¸å…³**: æ ¹æ®ä»£ç åˆ†æç»“æœæ¨èç›¸å…³æ¨¡å¼
- âœ… **ä¼˜å…ˆçº§æ’åº**: æŒ‰æœ‰æ•ˆæ€§å’Œç›¸å…³æ€§æ’åºæ¨è
- âœ… **ç”¨æˆ·åé¦ˆ**: æ”¶é›†ç”¨æˆ·å¯¹æ¨èçš„ä½¿ç”¨åé¦ˆ

### 4. æ€§èƒ½ä¼˜åŒ–

- âœ… **å¼‚æ­¥å¤„ç†**: å­¦ä¹ è¿‡ç¨‹ä½¿ç”¨å¼‚æ­¥ï¼Œé¿å…é˜»å¡
- âœ… **ç¼“å­˜æœºåˆ¶**: ç¼“å­˜åˆ†æç»“æœï¼Œé¿å…é‡å¤è®¡ç®—
- âœ… **æ‰¹é‡å¤„ç†**: æ‰¹é‡å­¦ä¹ æ—¶ä½¿ç”¨æ‰¹å¤„ç†ä¼˜åŒ–

---

## æ•°æ®æµå›¾

### å®Œæ•´æ•°æ®æµ

```
ç”¨æˆ·æ“ä½œ
  â†“
ç­–ç•¥ä»£ç è¾“å…¥
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä»£ç åˆ†æå™¨     â”‚ â†’ æå–ç»“æ„ã€APIã€å› å­
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å­¦ä¹ å¼•æ“       â”‚ â†’ æŸ¥è¯¢çŸ¥è¯†åº“ã€ç”Ÿæˆæ¨è
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¹³å°é€‚é…å™¨     â”‚ â†’ è½¬æ¢ä»£ç 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æŠ¥å‘Šç”Ÿæˆå™¨     â”‚ â†’ ç”ŸæˆæŠ¥å‘Š
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
è¾“å‡ºç»“æœï¼ˆè½¬æ¢ä»£ç ã€æŠ¥å‘Šã€æ¨èï¼‰
```

### å­¦ä¹ æ•°æ®æµ

```
å­¦ä¹ æº
  â”œâ”€â”€ Aè‚¡å®æ“æ‰‹å†Œ â†’ ManualLearner â†’ KnowledgeStore
  â”œâ”€â”€ æ–‡æ¡£æ–‡ä»¶ â†’ StrategyLearner â†’ KnowledgeStore
  â”œâ”€â”€ å†å²ç­–ç•¥ â†’ StrategyLearner â†’ KnowledgeStore
  â””â”€â”€ ç”¨æˆ·åé¦ˆ â†’ StrategyLearner â†’ KnowledgeStore
         â†“
    KnowledgeStore
         â†“
    çŸ¥è¯†æŸ¥è¯¢
         â†“
    æ™ºèƒ½æ¨è
         â†“
    ç­–ç•¥ä¼˜åŒ–
```

---

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„å­¦ä¹ æº

1. åˆ›å»ºæ–°çš„å­¦ä¹ å™¨ç±»
2. å®ç° `learn()` æ–¹æ³•
3. é›†æˆåˆ° `StrategyOptimizerService`
4. æ·»åŠ åˆ°å­¦ä¹ æµç¨‹

### æ·»åŠ æ–°çš„æ¨èè§„åˆ™

1. åœ¨ `StrategyLearner.recommendPatterns()` ä¸­æ·»åŠ è§„åˆ™
2. æ›´æ–°çŸ¥è¯†åº“æŸ¥è¯¢é€»è¾‘
3. æµ‹è¯•æ¨èæ•ˆæœ

### è‡ªå®šä¹‰çŸ¥è¯†å­˜å‚¨

1. æ‰©å±• `KnowledgeStore` ç±»
2. æ·»åŠ æ–°çš„æ•°æ®ç»“æ„
3. å®ç°æŒä¹…åŒ–é€»è¾‘

---

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**Q: å­¦ä¹ å¤±è´¥ï¼Œæç¤º"æ‰‹å†Œè·¯å¾„ä¸å­˜åœ¨"**
- A: æ£€æŸ¥ `AShare-manual` ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œè·¯å¾„æ˜¯å¦æ­£ç¡®

**Q: çŸ¥è¯†åº“ç»Ÿè®¡ä¸º0**
- A: æ‰§è¡Œ `TRQuant: ä»å®æ“æ‰‹å†Œå­¦ä¹ ` å‘½ä»¤åˆå§‹åŒ–çŸ¥è¯†åº“

**Q: æ¨èç»“æœä¸ºç©º**
- A: ç¡®ä¿çŸ¥è¯†åº“å·²å­¦ä¹ ï¼Œæ£€æŸ¥ä»£ç åˆ†ææ˜¯å¦æ­£ç¡®

**Q: æ–‡ä»¶ç›‘å¬ä¸å·¥ä½œ**
- A: æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿæƒé™ï¼Œç¡®ä¿æœ‰è¯»å–æƒé™

---

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-12-03)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®ç°ä»£ç åˆ†æå™¨
- âœ… å®ç°å¹³å°é€‚é…å™¨
- âœ… å®ç°æŠ¥å‘Šç”Ÿæˆå™¨
- âœ… å®ç°å­¦ä¹ å¼•æ“
- âœ… å®ç°æ‰‹å†Œå­¦ä¹ å™¨
- âœ… æ”¯æŒå®æ—¶æ›´æ–°ç›‘å¬

---

## å‚è€ƒèµ„æ–™

- [ç­–ç•¥ä¼˜åŒ–å™¨æºç ](../src/services/strategyOptimizer/)
- [Aè‚¡å®æ“æ‰‹å†Œ](../../AShare-manual/)
- [ç±»å‹å®šä¹‰](../src/services/strategyOptimizer/types.ts)

---

**æ–‡æ¡£ç»´æŠ¤**: TRQuant Team  
**æœ€åæ›´æ–°**: 2025-12-03

