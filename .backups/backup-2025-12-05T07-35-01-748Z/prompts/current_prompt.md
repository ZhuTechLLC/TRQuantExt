# 多因子策略生成请求 - PTrade平台

## 角色设定
你是一名专门为中国A股市场、基于恒生PTrade平台编写Python策略的量化工程师。

## 任务
请根据以下多因子选股模型，生成一份可在PTrade Python策略环境中直接运行的完整策略代码。

## 1. 标的池与基本设定

- **标的池**：中证800成分股；剔除ST、*ST，以及近60日日均成交额低于3000万的股票
- **回测频率**：日频（使用日线收盘价进行因子计算与调仓）
- **调仓周期**：每10个交易日调仓一次
- **持仓数量**：每次持有30只股票，多头等权

## 2. 因子定义

请实现以下因子，并为每个因子标准化（z-score）：

- **价值因子**（权重0.25）：过去一年平均ROE或1/PE
- **成长因子**（权重0.25）：最近四个财报季度净利润同比增长率
- **动量因子**（权重0.30）：过去60个交易日收益率，剔除最近5日的短期波动
- **波动因子**（权重-0.20）：过去60日收益率标准差（作为风险惩罚项）

## 3. 因子合成与打分

总评分 = 0.25×价值因子 + 0.25×成长因子 + 0.30×动量因子 + (-0.20)×波动因子

每次调仓时：
1. 在标的池内计算上述因子并打分
2. 按评分从高到低排序，选取前30只股票
3. 组合等权分配

## 4. 交易与风控规则

- 单个标的最大持仓权重：不超过组合市值的8.0%
- 总仓位控制：目标总仓位80.0%，剩余20.0%现金
- 交易费用：买卖手续费3.0%%
- 换手约束：尽量保留前次高分股票，避免过度换手

## 5. PTrade接口要求

使用PTrade标准接口：
- `initialize(context)` - 初始化
- `before_trading_start(context)` - 盘前处理
- `handle_data(context, data)` - 盘中处理
- `order_target_percent(security, pct)` - 调仓到目标比例
- `get_price()`, `get_fundamentals()`, `get_index_stocks()`

## 6. 输出要求

- 生成完整的Python策略代码文件
- 在代码顶部集中定义所有参数
- 添加详细的中文注释
- 保证代码结构清晰，便于后续修改

请直接输出完整的Python代码，不要添加任何解释性文字。
