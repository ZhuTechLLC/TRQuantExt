# 策略优化 Prompt

> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行







> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行







> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行







> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行







> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行







> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行







> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行







> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行







> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行







> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行





> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行


> 用于根据回测结果优化现有策略代码

---

请帮我优化以下 PTrade 策略代码：

## 当前代码

```python
{{ 在这里粘贴现有策略代码 }}
```

## 当前回测表现

- 总收益率: {{ 例如：15.00% }}
- 年化收益: {{ 例如：16.50% }}
- 最大回撤: {{ 例如：12.00% }}
- 夏普比率: {{ 例如：1.50 }}
- 胜率: {{ 例如：55% }}
- 总交易次数: {{ 例如：120 }}

## 优化目标

{{ 例如：
- 提高夏普比率到 2.0 以上
- 降低最大回撤到 8% 以内
- 保持年化收益在 15% 以上
- 减少换手率
}}

## 可用因子

以下因子可以考虑加入或调整权重：

- **动量类**：
  - 过去 N 日收益率
  - 相对强弱指标 (RSI)
  - 动量加速度
  
- **价值类**：
  - PE、PB、PS 分位数
  - 股息率
  - EV/EBITDA
  
- **质量类**：
  - ROE、ROA
  - 毛利率、净利率
  - 资产负债率
  - 现金流质量
  
- **成长类**：
  - 营收增长率
  - 净利润增长率
  - ROE 变化
  
- **波动类**：
  - 历史波动率
  - 下行波动率
  - Beta 系数
  
- **资金流类**：
  - 主力资金净流入
  - 北向资金持仓变化
  - 成交量异动

## 风控约束

- 单股最大仓位: {{ 例如：10% }}
- 行业集中度: {{ 例如：单一行业不超过 30% }}
- 止损线: {{ 例如：个股亏损 8% 止损 }}
- 最大回撤限制: {{ 例如：总回撤超过 15% 减仓 }}

## 输出要求

1. 给出优化后的完整 PTrade 策略代码
2. 在代码注释中说明每处修改的原因
3. 列出主要改动点清单
4. 预估优化后的效果（定性描述）
5. 提示可能的风险点

## 注意事项

- 保持代码结构清晰，便于后续迭代
- 所有参数集中在文件开头定义
- 关键逻辑添加中文注释
- 确保代码可以在 PTrade Python 3.11 环境运行














