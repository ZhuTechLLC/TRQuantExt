---
title: "5.2 ä»·æ ¼åŠ¨é‡å› å­"
description: "å­¦ä¹ è¿‡å»Næœˆæ”¶ç›Šç‡ã€ç›¸å¯¹å¼ºå¼±ç­‰ä»·æ ¼åŠ¨é‡å› å­çš„è®¡ç®—æ–¹æ³•"
lang: "zh-CN"
layout: "/src/layouts/Layout.astro"
currentBook: "ashare-quantitative"
currentChapter: "ashare-quantitative-chapter5"
updateDate: "2025-01-26"
---

# ğŸ“ˆ 5.2 ä»·æ ¼åŠ¨é‡å› å­

> **æ ¸å¿ƒæ‘˜è¦ï¼š**
> 
> ä»·æ ¼åŠ¨é‡å› å­æ˜¯æœ€åŸºç¡€çš„åŠ¨é‡å› å­ï¼ŒåŸºäºè¿‡å»ä¸€æ®µæ—¶é—´çš„æ”¶ç›Šç‡æ¥é¢„æµ‹æœªæ¥è¡¨ç°ã€‚æœ¬èŠ‚è®²è§£ä»·æ ¼åŠ¨é‡å› å­çš„è®¡ç®—æ–¹æ³•å’ŒAè‚¡åº”ç”¨ã€‚

## ğŸ“‹ ç« èŠ‚æ¦‚è§ˆ

<div class="section-overview">
  <div class="overview-item">
    <span class="item-icon">ğŸ“Š</span>
    <a href="#n-month">Næœˆæ”¶ç›Šç‡å› å­</a>
    <span class="item-desc">è¿‡å»Næœˆç´¯è®¡æ”¶ç›Šç‡</span>
  </div>
  <div class="overview-item">
    <span class="item-icon">ğŸ”„</span>
    <a href="#relative">ç›¸å¯¹å¼ºå¼±å› å­</a>
    <span class="item-desc">ç›¸å¯¹äºåŸºå‡†çš„å¼ºå¼±</span>
  </div>
  <div class="overview-item">
    <span class="item-icon">ğŸ“ˆ</span>
    <a href="#backtest">Aè‚¡ä»·æ ¼åŠ¨é‡å›æµ‹</a>
    <span class="item-desc">ä¸åŒæ—¶é—´çª—å£çš„æ•ˆæœ</span>
  </div>
  <div class="overview-item">
    <span class="item-icon">ğŸ–¥ï¸</span>
    <a href="#implementation">ç­–ç•¥å®ç°</a>
    <span class="item-desc">éŸ¬ç¿å¹³å°åŠ¨é‡ç­–ç•¥</span>
  </div>
</div>

---

<h2 id="n-month">ğŸ“Š Næœˆæ”¶ç›Šç‡å› å­</h2>

### Næœˆæ”¶ç›Šç‡çš„å®šä¹‰

<div class="tip-box">
  <h4>ğŸ“Š Næœˆæ”¶ç›Šç‡å› å­</h4>
  <ul>
    <li><strong>å…¬å¼ï¼š</strong>Momentum_N = (P_t - P_{t-N}) / P_{t-N}</li>
    <li><strong>1æœˆåŠ¨é‡ï¼š</strong>çŸ­æœŸè¶‹åŠ¿</li>
    <li><strong>3æœˆåŠ¨é‡ï¼š</strong>ä¸­çŸ­æœŸè¶‹åŠ¿</li>
    <li><strong>6æœˆåŠ¨é‡ï¼š</strong>ä¸­æœŸè¶‹åŠ¿ï¼ˆç»å…¸çª—å£ï¼‰</li>
    <li><strong>12æœˆåŠ¨é‡ï¼š</strong>é•¿æœŸè¶‹åŠ¿</li>
  </ul>
</div>

### ä»·æ ¼åŠ¨é‡å› å­è®¡ç®—

```python
import pandas as pd
import numpy as np
from jqdata import *

def calculate_price_momentum(stocks, date, lookback_months=6):
    """
    è®¡ç®—ä»·æ ¼åŠ¨é‡å› å­
    
    å‚æ•°:
        stocks: è‚¡ç¥¨åˆ—è¡¨
        date: è®¡ç®—æ—¥æœŸ
        lookback_months: å›æº¯æœˆæ•°
    
    è¿”å›:
        ä»·æ ¼åŠ¨é‡å› å­Series
    """
    # è®¡ç®—äº¤æ˜“æ—¥æ•°
    trading_days = lookback_months * 20  # çº¦æ¯æœˆ20ä¸ªäº¤æ˜“æ—¥
    
    # è·å–å†å²ä»·æ ¼
    price_df = get_price(
        stocks, 
        end_date=date, 
        count=trading_days + 1, 
        fields=['close'],
        panel=False
    )
    
    # æŒ‰è‚¡ç¥¨åˆ†ç»„è®¡ç®—æ”¶ç›Šç‡
    momentum = price_df.groupby('code').apply(
        lambda x: (x['close'].iloc[-1] / x['close'].iloc[0] - 1) 
        if len(x) > 0 else np.nan
    )
    
    # æ ‡å‡†åŒ–
    momentum_zscore = (momentum - momentum.mean()) / momentum.std()
    
    return momentum_zscore


def calculate_momentum_skip_recent(stocks, date, lookback_months=6, skip_days=5):
    """
    è®¡ç®—è·³è¿‡æœ€è¿‘Nå¤©çš„åŠ¨é‡å› å­ï¼ˆé¿å…çŸ­æœŸåè½¬å½±å“ï¼‰
    
    å‚æ•°:
        stocks: è‚¡ç¥¨åˆ—è¡¨
        date: è®¡ç®—æ—¥æœŸ
        lookback_months: å›æº¯æœˆæ•°
        skip_days: è·³è¿‡æœ€è¿‘çš„å¤©æ•°
    
    è¿”å›:
        åŠ¨é‡å› å­Series
    """
    trading_days = lookback_months * 20
    
    # è·å–å†å²ä»·æ ¼
    price_df = get_price(
        stocks, 
        end_date=date, 
        count=trading_days + skip_days + 1, 
        fields=['close'],
        panel=False
    )
    
    # è®¡ç®—è·³è¿‡æœ€è¿‘Nå¤©çš„æ”¶ç›Šç‡
    momentum = price_df.groupby('code').apply(
        lambda x: (x['close'].iloc[-skip_days-1] / x['close'].iloc[0] - 1) 
        if len(x) > skip_days else np.nan
    )
    
    return momentum
```

---

<h2 id="relative">ğŸ”„ ç›¸å¯¹å¼ºå¼±å› å­</h2>

### ç›¸å¯¹å¼ºå¼±çš„å®šä¹‰

<div class="tip-box">
  <h4>ğŸ”„ ç›¸å¯¹å¼ºå¼±å› å­ï¼ˆRelative Strengthï¼‰</h4>
  <ul>
    <li><strong>å…¬å¼ï¼š</strong>RS = è‚¡ç¥¨æ”¶ç›Šç‡ - åŸºå‡†æ”¶ç›Šç‡</li>
    <li><strong>ä¼˜åŠ¿ï¼š</strong>å‰”é™¤å¸‚åœºæ•´ä½“å½±å“ï¼Œåæ˜ ä¸ªè‚¡ç›¸å¯¹è¡¨ç°</li>
    <li><strong>åŸºå‡†é€‰æ‹©ï¼š</strong>æ²ªæ·±300ï¼ˆå¤§ç›˜è‚¡ï¼‰ã€ä¸­è¯500ï¼ˆä¸­ç›˜è‚¡ï¼‰ã€è¡Œä¸šæŒ‡æ•°</li>
  </ul>
</div>

### ç›¸å¯¹å¼ºå¼±å› å­è®¡ç®—

```python
def calculate_relative_strength(stocks, date, benchmark='000300.XSHG', lookback_months=6):
    """
    è®¡ç®—ç›¸å¯¹å¼ºå¼±å› å­
    
    å‚æ•°:
        stocks: è‚¡ç¥¨åˆ—è¡¨
        date: è®¡ç®—æ—¥æœŸ
        benchmark: åŸºå‡†æŒ‡æ•°ä»£ç 
        lookback_months: å›æº¯æœˆæ•°
    
    è¿”å›:
        ç›¸å¯¹å¼ºå¼±å› å­Series
    """
    trading_days = lookback_months * 20
    
    # è·å–è‚¡ç¥¨æ”¶ç›Šç‡
    stock_price = get_price(
        stocks, 
        end_date=date, 
        count=trading_days + 1, 
        fields=['close'],
        panel=False
    )
    stock_return = stock_price.groupby('code').apply(
        lambda x: x['close'].iloc[-1] / x['close'].iloc[0] - 1
    )
    
    # è·å–åŸºå‡†æ”¶ç›Šç‡
    benchmark_price = get_price(
        benchmark, 
        end_date=date, 
        count=trading_days + 1, 
        fields=['close']
    )
    benchmark_return = benchmark_price['close'].iloc[-1] / benchmark_price['close'].iloc[0] - 1
    
    # è®¡ç®—ç›¸å¯¹å¼ºå¼±
    relative_strength = stock_return - benchmark_return
    
    return relative_strength


def calculate_industry_relative_strength(stocks, date, lookback_months=6):
    """
    è®¡ç®—è¡Œä¸šå†…ç›¸å¯¹å¼ºå¼±å› å­
    
    å‚æ•°:
        stocks: è‚¡ç¥¨åˆ—è¡¨
        date: è®¡ç®—æ—¥æœŸ
        lookback_months: å›æº¯æœˆæ•°
    
    è¿”å›:
        è¡Œä¸šå†…ç›¸å¯¹å¼ºå¼±å› å­Series
    """
    # è·å–è‚¡ç¥¨è¡Œä¸š
    industries = get_industry(stocks, date, 'sw_l1')
    
    # è®¡ç®—è‚¡ç¥¨æ”¶ç›Šç‡
    stock_return = calculate_price_momentum(stocks, date, lookback_months)
    
    # æŒ‰è¡Œä¸šè®¡ç®—ç›¸å¯¹å¼ºå¼±
    df = pd.DataFrame({
        'return': stock_return,
        'industry': [industries[s]['sw_l1']['industry_name'] for s in stocks]
    })
    
    # è¡Œä¸šå†…æ ‡å‡†åŒ–
    df['industry_rs'] = df.groupby('industry')['return'].transform(
        lambda x: (x - x.mean()) / x.std()
    )
    
    return df['industry_rs']
```

---

<h2 id="backtest">ğŸ“ˆ Aè‚¡ä»·æ ¼åŠ¨é‡å›æµ‹</h2>

### ä¸åŒæ—¶é—´çª—å£å›æµ‹

<div class="comparison-table">
  <table>
    <thead>
      <tr>
        <th>æ—¶é—´çª—å£</th>
        <th>ICå‡å€¼</th>
        <th>IC_IR</th>
        <th>å¹´åŒ–å¤šç©ºæ”¶ç›Š</th>
        <th>å¤æ™®æ¯”ç‡</th>
        <th>æœ€å¤§å›æ’¤</th>
        <th>Aè‚¡é€‚ç”¨æ€§</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>1æœˆåŠ¨é‡</strong></td>
        <td>-0.015</td>
        <td>-0.18</td>
        <td>-2.5%</td>
        <td>-0.20</td>
        <td>35%</td>
        <td>âŒ åè½¬æ›´å¼º</td>
      </tr>
      <tr>
        <td><strong>3æœˆåŠ¨é‡</strong></td>
        <td>0.018</td>
        <td>0.22</td>
        <td>2.8%</td>
        <td>0.22</td>
        <td>30%</td>
        <td>â­â­</td>
      </tr>
      <tr>
        <td><strong>6æœˆåŠ¨é‡</strong></td>
        <td>0.022</td>
        <td>0.28</td>
        <td>3.5%</td>
        <td>0.28</td>
        <td>28%</td>
        <td>â­â­â­</td>
      </tr>
      <tr>
        <td><strong>6æœˆåŠ¨é‡ï¼ˆè·³è¿‡1å‘¨ï¼‰</strong></td>
        <td>0.028</td>
        <td>0.35</td>
        <td>5.2%</td>
        <td>0.42</td>
        <td>25%</td>
        <td>â­â­â­â­</td>
      </tr>
      <tr>
        <td><strong>12æœˆåŠ¨é‡</strong></td>
        <td>-0.008</td>
        <td>-0.10</td>
        <td>-1.2%</td>
        <td>-0.10</td>
        <td>32%</td>
        <td>âŒ é•¿æœŸåè½¬</td>
      </tr>
    </tbody>
  </table>
</div>

### åŠ¨é‡å› å­çš„æ”¹è¿›

<div class="exchange-grid">
  <div class="exchange-card">
    <div class="exchange-header">
      <span class="exchange-icon">â­ï¸</span>
      <h3>è·³è¿‡æœ€è¿‘æœŸ</h3>
    </div>
    <div class="exchange-content">
      <p><strong>æ–¹æ³•ï¼š</strong>è®¡ç®—6æœˆåŠ¨é‡æ—¶è·³è¿‡æœ€è¿‘1å‘¨</p>
      <p><strong>åŸå› ï¼š</strong>é¿å…çŸ­æœŸåè½¬æ•ˆåº”çš„å¹²æ‰°</p>
      <p><strong>æ•ˆæœï¼š</strong>ICä»0.022æå‡åˆ°0.028</p>
    </div>
  </div>

  <div class="exchange-card">
    <div class="exchange-header">
      <span class="exchange-icon">ğŸ­</span>
      <h3>è¡Œä¸šä¸­æ€§åŒ–</h3>
    </div>
    <div class="exchange-content">
      <p><strong>æ–¹æ³•ï¼š</strong>è®¡ç®—è¡Œä¸šå†…ç›¸å¯¹åŠ¨é‡</p>
      <p><strong>åŸå› ï¼š</strong>å‰”é™¤è¡Œä¸šè½®åŠ¨å½±å“</p>
      <p><strong>æ•ˆæœï¼š</strong>é™ä½è¡Œä¸šæš´éœ²é£é™©</p>
    </div>
  </div>

  <div class="exchange-card">
    <div class="exchange-header">
      <span class="exchange-icon">ğŸ“Š</span>
      <h3>é£é™©è°ƒæ•´</h3>
    </div>
    <div class="exchange-content">
      <p><strong>æ–¹æ³•ï¼š</strong>æ”¶ç›Šç‡/æ³¢åŠ¨ç‡</p>
      <p><strong>åŸå› ï¼š</strong>é«˜æ³¢åŠ¨è‚¡ç¥¨åŠ¨é‡ä¸ç¨³å®š</p>
      <p><strong>æ•ˆæœï¼š</strong>æå‡å› å­ç¨³å®šæ€§</p>
    </div>
  </div>
</div>

---

<h2 id="implementation">ğŸ–¥ï¸ ç­–ç•¥å®ç°</h2>

### éŸ¬ç¿å¹³å°åŠ¨é‡ç­–ç•¥

```python
def taorui_momentum_strategy(context):
    """
    éŸ¬ç¿å¹³å°åŠ¨é‡ç­–ç•¥
    
    ç­–ç•¥é€»è¾‘ï¼š
    1. è®¡ç®—6æœˆåŠ¨é‡ï¼ˆè·³è¿‡æœ€è¿‘1å‘¨ï¼‰
    2. è¡Œä¸šä¸­æ€§åŒ–å¤„ç†
    3. é€‰æ‹©åŠ¨é‡æœ€å¼ºçš„30åª
    4. ç­‰æƒæŒæœ‰ï¼Œæœˆåº¦è°ƒä»“
    """
    # è·å–è‚¡ç¥¨æ± 
    stocks = get_index_stocks('000905.XSHG', context.current_dt)
    
    # è®¡ç®—åŠ¨é‡å› å­ï¼ˆè·³è¿‡æœ€è¿‘1å‘¨ï¼‰
    momentum = calculate_momentum_skip_recent(
        stocks, 
        context.current_dt, 
        lookback_months=6,
        skip_days=5
    )
    
    # è¡Œä¸šä¸­æ€§åŒ–
    momentum_neutral = industry_neutralize(momentum, stocks, context.current_dt)
    
    # é€‰æ‹©åŠ¨é‡æœ€å¼ºçš„30åª
    top_stocks = momentum_neutral.nlargest(30).index.tolist()
    
    # ç­‰æƒè°ƒä»“
    rebalance_portfolio(context, top_stocks)
```

---

## ğŸ’ æ ¸å¿ƒè¦ç‚¹æ€»ç»“

<div class="key-points">
  <div class="key-point">
    <h4>ğŸ“Š 6æœˆåŠ¨é‡æœ€ä¼˜</h4>
    <p>Aè‚¡ä¸­æœŸåŠ¨é‡ï¼ˆ3-6æœˆï¼‰æ•ˆæœç›¸å¯¹è¾ƒå¥½</p>
  </div>
  <div class="key-point">
    <h4>ğŸ”„ çŸ­æœŸæ˜¯åè½¬</h4>
    <p>1æœˆåŠ¨é‡åœ¨Aè‚¡æ˜¯åå‘æŒ‡æ ‡ï¼Œåº”è¯¥åšåè½¬</p>
  </div>
  <div class="key-point">
    <h4>â­ï¸ è·³è¿‡æœ€è¿‘æœŸ</h4>
    <p>è·³è¿‡æœ€è¿‘1å‘¨å¯ä»¥é¿å…çŸ­æœŸåè½¬å¹²æ‰°</p>
  </div>
  <div class="key-point">
    <h4>âš–ï¸ ç›¸å¯¹å¼ºå¼±æ›´ç¨³</h4>
    <p>ç›¸å¯¹å¼ºå¼±å› å­å‰”é™¤å¸‚åœºå½±å“ï¼Œæ›´ç¨³å®š</p>
  </div>
</div>

---

## ğŸ”® æ€»ç»“ä¸å±•æœ›

<div class="summary-outlook">
  <h3>æœ¬èŠ‚å›é¡¾</h3>
  <p>æœ¬èŠ‚è®²è§£äº†ä»·æ ¼åŠ¨é‡å› å­çš„è®¡ç®—æ–¹æ³•å’ŒAè‚¡å›æµ‹ç»“æœã€‚Aè‚¡åŠ¨é‡å› å­çš„æœ€ä½³å®è·µæ˜¯ä½¿ç”¨6æœˆåŠ¨é‡å¹¶è·³è¿‡æœ€è¿‘1å‘¨ï¼ŒåŒæ—¶è¿›è¡Œè¡Œä¸šä¸­æ€§åŒ–å¤„ç†ã€‚</p>
  
  <h3>ä¸‹èŠ‚é¢„å‘Š</h3>
  <p>ä¸‹ä¸€èŠ‚å°†å­¦ä¹ åè½¬å› å­ï¼Œè¿™æ˜¯Aè‚¡æœ€æœ‰æ•ˆçš„åŠ¨é‡ç±»å› å­ã€‚</p>
  
  <a href="/ashare-book4/005_Chapter5/5.3_Reversal_Factor_CN" class="next-section">
    ç»§ç»­å­¦ä¹ ï¼š5.3 åè½¬å› å­ â†’
  </a>
</div>
