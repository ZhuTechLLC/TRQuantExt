# 提交前检查清单 (PR Checklist)

每次提交代码或创建拉取请求（PR）前，请逐项确认以下事项，以保证代码质量和项目规范：

- [ ] **代码构建**：确认代码已通过编译/构建，无语法错误，能正常运行主要功能。必要时在本地完整运行一下关键场景。

- [ ] **自动测试**：运行所有单元测试和集成测试，确保全部通过且不存在新的断言失败或错误。新增的代码有相应测试覆盖，达到项目要求的覆盖率。

- [ ] **代码规范**：确保符合代码风格和工程规范。例如运行过格式化工具（如Prettier、Black等）和静态检查工具（如ESLint、Flake8）并修复报告的问题。

- [ ] **文档更新**：如果此更改影响了项目文档（如API接口、架构），同时更新相关文档（如`PROJECT_BRIEF.md`、`MODULE_INDEX.md`）。确保代码注释（特别是公共接口）已根据更改更新。

- [ ] **命名一致**：检查新增或修改的命名是否遵循命名规范，避免使用不同风格的缩写或不恰当的命名；保持与现有代码风格一致。

- [ ] **无敏感信息**：确认代码库中没有提交敏感信息或临时调试代码（如密码、秘钥、调试日志）。特别注意配置文件、日志输出中不应包含明文敏感数据。

- [ ] **性能影响**：考虑本次修改对性能的影响。对于涉及大量数据或频繁调用的功能，是否进行了必要的优化？如有需要，提供性能测试或说明结果。

- [ ] **PR 描述**：在提交PR时，填写清晰的描述，包括变更目的、内容摘要、相关背景（如Issue编号）和对其他模块的影响。确保 Reviewer 能充分理解你的改动。

- [ ] **自检通过**：最后，再次通读一遍改动的代码diff，自我审查逻辑是否清晰、注释是否完善、所有约定是否遵循。确认对上述检查项都回答"是"后，再提交PR。

- [ ] **Python Bridge测试**：如果修改了Python相关代码或Bridge通信逻辑，确保测试了TypeScript和Python之间的通信是否正常，JSON协议是否正确。

- [ ] **WebView测试**：如果修改了WebView面板，确保测试了消息通信、资源加载、面板生命周期是否正常。

- [ ] **命令注册**：如果添加了新命令，确保在`package.json`中注册，并在`extension.ts`中正确注册命令处理器。

- [ ] **类型定义**：如果添加了新的数据结构，确保在`types/index.ts`中定义了相应的TypeScript类型。

- [ ] **错误处理**：确保所有可能失败的操作都有适当的错误处理，使用`ErrorHandler`统一处理异常。

- [ ] **资源清理**：确保所有创建的`Disposable`资源（如事件监听器、子进程）都在适当的时候清理，避免内存泄漏。

