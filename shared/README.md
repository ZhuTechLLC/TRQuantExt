# TRQuant Shared Library

## ğŸ“ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TRQuant ç³»ç»Ÿæ¶æ„                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   æ¡Œé¢ç³»ç»Ÿ GUI  â”‚           â”‚  VS Code æ‰©å±•   â”‚             â”‚
â”‚  â”‚   (PyQt6)       â”‚           â”‚  (TypeScript)   â”‚             â”‚
â”‚  â”‚                 â”‚           â”‚                 â”‚             â”‚
â”‚  â”‚  gui/widgets/   â”‚           â”‚  extension/     â”‚             â”‚
â”‚  â”‚  â”œâ”€ market_*    â”‚           â”‚  â”œâ”€ src/views/  â”‚             â”‚
â”‚  â”‚  â”œâ”€ mainline_*  â”‚           â”‚  â””â”€ python/     â”‚             â”‚
â”‚  â”‚  â””â”€ strategy_*  â”‚           â”‚     â””â”€ bridge.pyâ”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚           â”‚                             â”‚                       â”‚
â”‚           â”‚         å…±äº«æ¥å£å±‚          â”‚                       â”‚
â”‚           â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚                       â”‚
â”‚           â””â”€â”€â”€â–ºâ”‚  shared/api.py â”‚â—„â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                â”‚                â”‚                               â”‚
â”‚                â”‚  TRQuantAPI    â”‚                               â”‚
â”‚                â”‚  â”œâ”€ CoreAdapterâ”‚ â† å®Œæ•´åŠŸèƒ½                    â”‚
â”‚                â”‚  â””â”€ MockAdapterâ”‚ â† ç‹¬ç«‹éƒ¨ç½²                    â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                        â”‚                                        â”‚
â”‚                        â–¼                                        â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚           â”‚      core/ æ¨¡å—        â”‚                           â”‚
â”‚           â”‚                        â”‚                           â”‚
â”‚           â”‚  workflow_orchestrator â”‚ â† å·¥ä½œæµç¼–æ’              â”‚
â”‚           â”‚  trend_analyzer        â”‚ â† è¶‹åŠ¿åˆ†æ                â”‚
â”‚           â”‚  candidate_pool_builderâ”‚ â† å€™é€‰æ±                   â”‚
â”‚           â”‚  mainline_scanner      â”‚ â† ä¸»çº¿æ‰«æ                â”‚
â”‚           â”‚  backtest_engine       â”‚ â† å›æµ‹å¼•æ“                â”‚
â”‚           â”‚  strategy_generator    â”‚ â† ç­–ç•¥ç”Ÿæˆ                â”‚
â”‚           â”‚  factors/*             â”‚ â† å› å­åº“                  â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. DRY (Don't Repeat Yourself)
- ä¸šåŠ¡é€»è¾‘é›†ä¸­åœ¨ `core/` æ¨¡å—
- UIå±‚ï¼ˆæ¡Œé¢/æ‰©å±•ï¼‰åªè´Ÿè´£å±•ç¤ºå’Œäº¤äº’
- é€šè¿‡ `shared/api.py` æä¾›ç»Ÿä¸€æ¥å£

### 2. é€‚é…å™¨æ¨¡å¼
- `CoreAdapter`: è°ƒç”¨å®Œæ•´ core æ¨¡å—ï¼ˆå¼€å‘/æ¡Œé¢éƒ¨ç½²ï¼‰
- `MockAdapter`: æä¾›æ¼”ç¤ºæ•°æ®ï¼ˆæ‰©å±•ç‹¬ç«‹éƒ¨ç½²ï¼‰

### 3. è‡ªåŠ¨ç¯å¢ƒæ£€æµ‹
```python
from shared import get_api
api = get_api()  # è‡ªåŠ¨é€‰æ‹©é€‚é…å™¨
print(api.mode)  # 'full' æˆ– 'mock'
```

## ğŸ“ ç›®å½•ç»“æ„

```
TRQuant/
â”œâ”€â”€ core/                    # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ â­
â”‚   â”œâ”€â”€ workflow_orchestrator.py
â”‚   â”œâ”€â”€ trend_analyzer.py
â”‚   â”œâ”€â”€ backtest_engine.py
â”‚   â”œâ”€â”€ strategy_generator.py
â”‚   â””â”€â”€ factors/
â”‚
â”œâ”€â”€ shared/                  # å…±äº«æ¥å£å±‚ â­ (æ–°å¢)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ api.py              # TRQuantAPI ç»Ÿä¸€æ¥å£
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ gui/                     # æ¡Œé¢GUI (PyQt6)
â”‚   â””â”€â”€ widgets/            # è°ƒç”¨ shared.api
â”‚
â””â”€â”€ extension/               # VS Codeæ‰©å±•
    â”œâ”€â”€ python/
    â”‚   â””â”€â”€ bridge.py       # è°ƒç”¨ shared.api
    â””â”€â”€ src/
        â””â”€â”€ views/          # TypeScript UI
```

## ğŸ”„ ä½¿ç”¨æ–¹å¼

### æ¡Œé¢ç³»ç»Ÿ (Python)
```python
from shared import get_api

api = get_api()
result = api.analyze_market_trend()
print(result.summary)
```

### VS Codeæ‰©å±• (é€šè¿‡bridge.py)
```python
# extension/python/bridge.py
from shared import get_api

_api = get_api()

def get_market_status(params):
    result = _api.analyze_market_trend()
    return {'ok': result.success, 'data': result.details}
```

## ğŸ“Š API æ–¹æ³•

| æ–¹æ³• | è¯´æ˜ | å¯¹åº”æ­¥éª¤ |
|------|------|----------|
| `check_data_sources()` | æ•°æ®æºæ£€æµ‹ | æ­¥éª¤1 |
| `analyze_market_trend()` | å¸‚åœºè¶‹åŠ¿åˆ†æ | æ­¥éª¤2 |
| `identify_mainlines()` | æŠ•èµ„ä¸»çº¿è¯†åˆ« | æ­¥éª¤3 |
| `build_candidate_pool()` | å€™é€‰æ± æ„å»º | æ­¥éª¤4 |
| `recommend_factors()` | å› å­æ¨è | æ­¥éª¤5 |
| `generate_strategy()` | ç­–ç•¥ç”Ÿæˆ | æ­¥éª¤6 |
| `run_backtest()` | å›æµ‹éªŒè¯ | æ­¥éª¤7 |
| `check_broker_status()` | åˆ¸å•†çŠ¶æ€ | æ­¥éª¤8 |
| `run_full_workflow()` | å®Œæ•´å·¥ä½œæµ | å…¨éƒ¨ |

## âœ… å·²å¤ç”¨æ¨¡å—

| æ¨¡å— | æ¥æº | çŠ¶æ€ |
|------|------|------|
| WorkflowOrchestrator | core/ | âœ… |
| TrendAnalyzer | core/ | âœ… |
| CandidatePoolBuilder | core/ | âœ… |
| MainlineScanner | core/ | âœ… |
| BacktestEngine | core/ | âœ… |
| StrategyGenerator | core/ | âœ… |
| FactorManager | core/factors/ | âœ… |

## ğŸš€ æ‰©å±•ç‹¬ç«‹éƒ¨ç½²

å½“æ‰©å±•ç‹¬ç«‹éƒ¨ç½²ï¼ˆæ— coreæ¨¡å—ï¼‰æ—¶ï¼š

```python
api = get_api()
print(api.mode)  # 'mock'

# ä»ç„¶å¯ä»¥æ­£å¸¸è°ƒç”¨ï¼Œè¿”å›æ¼”ç¤ºæ•°æ®
result = api.analyze_market_trend()
# result.summary = 'ğŸ“ˆ éœ‡è¡åå¤š | ç»¼åˆè¯„åˆ†:65ï¼ˆæ¼”ç¤ºï¼‰'
```







































